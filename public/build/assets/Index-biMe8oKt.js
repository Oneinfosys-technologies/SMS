import{f as T,m as F,n as j,r as l,o as u,q as c,w as e,d as y,e as n,y as g,l as N,u as o,s as i,t as d,b as M,a as V,v as S,F as U,h as q,j as E}from"./app-DCfJDSeM.js";const O={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},G={__name:"Filter",emits:["hide"],setup(h,{emit:f}){T();const _=f,v={name:"",startDate:"",endDate:""},m=F({...v}),D=F({isLoaded:!0});return j(async()=>{D.isLoaded=!0}),(p,r)=>{const C=l("DatePicker"),s=l("FilterForm");return u(),c(s,{"init-form":v,form:m,multiple:[],onHide:r[2]||(r[2]=t=>_("hide"))},{default:e(()=>[y("div",O,[y("div",z,[n(C,{start:m.startDate,"onUpdate:start":r[0]||(r[0]=t=>m.startDate=t),end:m.endDate,"onUpdate:end":r[1]||(r[1]=t=>m.endDate=t),name:"dateBetween",as:"range",label:p.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},J={name:"MessMealLogList"},Q=Object.assign(J,{setup(h){const f=q(),_=E("emitter");let v=["filter","config"];g("meal-log:create")&&v.unshift("create");let m=[];g("meal-log:export")&&(m=["print","pdf","excel"]);const D="mess/mealLog/",p=N(!1),r=F({}),C=s=>{Object.assign(r,s)};return(s,t)=>{const I=l("PageHeaderAction"),B=l("PageHeader"),w=l("ParentTransition"),$=l("DataCell"),k=l("FloatingMenuItem"),P=l("FloatingMenu"),A=l("DataRow"),H=l("BaseButton"),L=l("DataTable"),R=l("ListItem");return u(),c(R,{"init-url":D,"additional-query":{},onSetItems:C},{header:e(()=>[n(B,{title:s.$trans("mess.meal.log.log"),navs:[{label:s.$trans("mess.mess"),path:"Mess"}]},{default:e(()=>[n(I,{url:"mess/meal-logs/",name:"MessMealLog",title:s.$trans("mess.meal.log.log"),actions:o(v),"dropdown-actions":o(m),"config-path":"MessConfig",onToggleFilter:t[0]||(t[0]=a=>p.value=!p.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(w,{appear:"",visibility:p.value},{default:e(()=>[n(G,{onRefresh:t[1]||(t[1]=a=>o(_).emit("listItems")),onHide:t[2]||(t[2]=a=>p.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(w,{appear:"",visibility:!0},{default:e(()=>[n(L,{header:r.headers,meta:r.meta,module:"mess.meal.log",onRefresh:t[4]||(t[4]=a=>o(_).emit("listItems"))},{actionButton:e(()=>[o(g)("meal-log:create")?(u(),c(H,{key:0,onClick:t[3]||(t[3]=a=>o(f).push({name:"MessMealLogCreate"}))},{default:e(()=>[i(d(s.$trans("global.add",{attribute:s.$trans("mess.meal.log.log")})),1)]),_:1})):M("",!0)]),default:e(()=>[(u(!0),V(U,null,S(r.data,a=>(u(),c(A,{key:a.uuid},{default:e(()=>[n($,{name:"date"},{default:e(()=>[i(d(a.date.formatted),1)]),_:2},1024),n($,{name:"meal"},{default:e(()=>[i(d(a.meal.name),1)]),_:2},1024),n($,{name:"menuItems"},{default:e(()=>[i(d(a.menuItems),1)]),_:2},1024),n($,{name:"createdAt"},{default:e(()=>[i(d(a.createdAt.formatted),1)]),_:2},1024),n($,{name:"action"},{default:e(()=>[n(P,null,{default:e(()=>[n(k,{icon:"fas fa-arrow-circle-right",onClick:b=>o(f).push({name:"MessMealLogShow",params:{uuid:a.uuid}})},{default:e(()=>[i(d(s.$trans("general.show")),1)]),_:2},1032,["onClick"]),o(g)("meal-log:edit")?(u(),c(k,{key:0,icon:"fas fa-edit",onClick:b=>o(f).push({name:"MessMealLogEdit",params:{uuid:a.uuid}})},{default:e(()=>[i(d(s.$trans("general.edit")),1)]),_:2},1032,["onClick"])):M("",!0),o(g)("meal-log:create")?(u(),c(k,{key:1,icon:"fas fa-copy",onClick:b=>o(f).push({name:"MessMealLogDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[i(d(s.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):M("",!0),o(g)("meal-log:delete")?(u(),c(k,{key:2,icon:"fas fa-trash",onClick:b=>o(_).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[i(d(s.$trans("general.delete")),1)]),_:2},1032,["onClick"])):M("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Q as default};
