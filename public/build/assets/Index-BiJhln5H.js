import{f as H,m as B,n as R,r,o as y,q as g,w as e,d as h,s,t as o,b as w,e as t,y as b,l as T,u as m,a as M,v as O,F as j,h as q,j as U}from"./app-DCfJDSeM.js";import{_ as z}from"./ModuleDropdown-BYIhYXQ6.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={__name:"Filter",emits:["hide"],setup(I,{emit:v}){const _=H(),k=v,$={employees:[],startDate:"",endDate:""},u=B({...$}),p=B({employees:[],isLoaded:!_.query.employees});return R(async()=>{p.employees=_.query.employees?_.query.employees.split(","):[],p.isLoaded=!0}),(c,d)=>{const C=r("BaseSelectSearch"),n=r("DatePicker"),i=r("FilterForm");return y(),g(i,{"init-form":$,form:u,multiple:["employees"],onHide:d[3]||(d[3]=l=>k("hide"))},{default:e(()=>[h("div",G,[h("div",J,[p.isLoaded?(y(),g(C,{key:0,multiple:"",name:"employees",label:c.$trans("global.select",{attribute:c.$trans("employee.employee")}),modelValue:u.employees,"onUpdate:modelValue":d[0]||(d[0]=l=>u.employees=l),"value-prop":"uuid","init-search":p.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(l=>[s(o(l.value.name)+" ("+o(l.value.codeNumber)+") ",1)]),listOption:e(l=>[s(o(l.option.name)+" ("+o(l.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):w("",!0)]),h("div",K,[t(n,{start:u.startDate,"onUpdate:start":d[1]||(d[1]=l=>u.startDate=l),end:u.endDate,"onUpdate:end":d[2]||(d[2]=l=>u.endDate=l),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},W={class:"text-success font-semibold"},X={name:"EmployeePayrollList"},x=Object.assign(X,{setup(I){const v=q(),_=U("emitter");let k=["filter"];b("payroll:create")&&k.unshift("create");let $=[];b("payroll:export")&&($=["print","pdf","excel"]);const u="employee/payroll/",p=T(!1),c=B({}),d=n=>{Object.assign(c,n)},C=n=>{window.open(`/app/employee/payrolls/${n.uuid}/export?action=print`)};return(n,i)=>{const l=r("PageHeaderAction"),N=r("PageHeader"),P=r("ParentTransition"),f=r("DataCell"),D=r("FloatingMenuItem"),E=r("FloatingMenu"),L=r("DataRow"),S=r("BaseButton"),V=r("DataTable"),A=r("ListItem");return y(),g(A,{"init-url":u,onSetItems:d},{header:e(()=>[t(N,{title:n.$trans("employee.payroll.payroll"),navs:[{label:n.$trans("employee.employee"),path:"Employee"}]},{default:e(()=>[t(l,{url:"employee/payrolls/",name:"EmployeePayroll",title:n.$trans("employee.payroll.payroll"),actions:m(k),"dropdown-actions":m($),onToggleFilter:i[0]||(i[0]=a=>p.value=!p.value)},{moduleOption:e(()=>[t(z)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(P,{appear:"",visibility:p.value},{default:e(()=>[t(Q,{onRefresh:i[1]||(i[1]=a=>m(_).emit("listItems")),onHide:i[2]||(i[2]=a=>p.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(P,{appear:"",visibility:!0},{default:e(()=>[t(V,{header:c.headers,meta:c.meta,module:"employee.payroll",onRefresh:i[4]||(i[4]=a=>m(_).emit("listItems"))},{actionButton:e(()=>[m(b)("payroll:create")?(y(),g(S,{key:0,onClick:i[3]||(i[3]=a=>m(v).push({name:"EmployeePayrollCreate"}))},{default:e(()=>[s(o(n.$trans("global.add",{attribute:n.$trans("employee.payroll.payroll")})),1)]),_:1})):w("",!0)]),default:e(()=>[(y(!0),M(j,null,O(c.data,a=>(y(),g(L,{key:a.uuid},{default:e(()=>[t(f,{name:"codeNumber"},{default:e(()=>[s(o(a.codeNumber),1)]),_:2},1024),t(f,{name:"employee"},{default:e(()=>[s(o(a.employee.name)+" ("+o(a.employee.codeNumber)+") ",1)]),_:2},1024),t(f,{name:"designation"},{default:e(()=>[s(o(a.employee.designation),1)]),_:2},1024),t(f,{name:"startDate"},{default:e(()=>[s(o(a.startDate.formatted),1)]),_:2},1024),t(f,{name:"endDate"},{default:e(()=>[s(o(a.endDate.formatted),1)]),_:2},1024),t(f,{name:"total"},{default:e(()=>[h("span",W,o(a.total.formatted),1)]),_:2},1024),t(f,{name:"createdAt"},{default:e(()=>[s(o(a.createdAt.formatted),1)]),_:2},1024),t(f,{name:"action"},{default:e(()=>[t(E,null,{default:e(()=>[t(D,{icon:"fas fa-print",onClick:F=>C(a)},{default:e(()=>[s(o(n.$trans("general.print")),1)]),_:2},1032,["onClick"]),t(D,{icon:"fas fa-arrow-circle-right",onClick:F=>m(v).push({name:"EmployeePayrollShow",params:{uuid:a.uuid}})},{default:e(()=>[s(o(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),m(b)("payroll:edit")?(y(),g(D,{key:0,icon:"fas fa-edit",onClick:F=>m(v).push({name:"EmployeePayrollEdit",params:{uuid:a.uuid}})},{default:e(()=>[s(o(n.$trans("general.edit")),1)]),_:2},1032,["onClick"])):w("",!0),m(b)("payroll:delete")?(y(),g(D,{key:1,icon:"fas fa-trash",onClick:F=>m(_).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[s(o(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{x as default};
