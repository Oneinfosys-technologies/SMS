import{i as K,f as j,h as Q,G as W,m as T,n as X,r as c,o as m,q as _,w as i,e as l,s as g,t as d,d as u,u as n,b as v,a as V,F as B,H as Y,v as Z,I as w,aJ as x}from"./app-DCfJDSeM.js";const ee={class:"grid grid-cols-3 gap-6"},te={class:"col-span-3 sm:col-span-1"},ae={class:"col-span-3 sm:col-span-1"},oe={key:0},re={key:1,class:"text-danger"},ne={class:"col-span-3 sm:col-span-1"},se={class:"grid grid-cols-3 gap-6"},le={class:"col-span-3"},de={key:0,class:"col-span-3"},ie={class:"col-span-3 sm:col-span-2"},ue={class:"flex"},pe={class:"col-span-3 sm:col-span-1"},me={class:"col-span-3 sm:col-span-1"},ce={class:"col-span-3 sm:col-span-1"},ge={class:"mt-4 grid grid-cols-3 gap-6"},be={class:"col-span-3"},fe={key:0,class:"col-span-3 sm:col-span-2"},Ve={class:"col-span-3 sm:col-span-1"},Ne=["onClick"],$e={class:"col-span-3 sm:col-span-1"},ve={class:"col-span-3 sm:col-span-1"},ye={class:"mt-2 flex justify-end"},Ue={name:"StudentRegistrationForm"},_e=Object.assign(Ue,{setup(q){K();const N=j();Q();const b={period:"",course:"",date:"",studentType:"new",student:"",firstName:"",middleName:"",thirdName:"",lastName:"",birthDate:"",gender:"",contactNumber:"",guardians:[]},k="student/registration/",r=W(k),$=T({genders:[],studentTypes:[],guardianTypes:[],relations:[],periods:[]}),f=T({selectedCourse:null}),o=T({...b}),y=T({course:"",isLoaded:!N.params.uuid}),I=a=>{Object.assign($,a),Object.assign(o,w(b))},L=a=>{var t,U;Object.assign(b,{period:a.period.uuid,course:(t=a.course)==null?void 0:t.uuid,date:a.date.value}),Object.assign(o,w(b)),f.selectedCourse=a.course,y.period=a.period.name,y.course=(U=a.course)==null?void 0:U.name,y.isLoaded=!0},E=a=>{o.course=a?a.uuid:""},A=()=>{N.params.uuid||(f.selectedCourse=null,o.course="")},F=()=>{o.guardians.push(P())},H=async a=>{await x()&&o.guardians.splice(a,1)},P=()=>({guardianType:"new",guardian:"",name:"",relation:"",contactNumber:""});return X(()=>{N.params.uuid||F()}),(a,t)=>{const U=c("BaseSelect"),C=c("BaseSelectSearch"),G=c("FormInfo"),O=c("DatePicker"),S=c("BaseFieldset"),h=c("BaseRadioGroup"),R=c("BaseLabel"),z=c("NameInput"),D=c("BaseInput"),J=c("BaseButton"),M=c("FormAction");return m(),_(M,{"pre-requisites":!0,onSetPreRequisites:I,"init-url":k,"init-form":b,form:o,"set-form":L,redirect:"StudentRegistration"},{default:i(()=>[l(S,null,{legend:i(()=>[g(d(a.$trans("student.registration.registration")),1)]),default:i(()=>[u("div",ee,[u("div",te,[l(U,{modelValue:o.period,"onUpdate:modelValue":t[0]||(t[0]=e=>o.period=e),name:"period",label:a.$trans("global.select",{attribute:a.$trans("academic.period.period")}),options:$.periods,"label-prop":"name","value-prop":"uuid",error:n(r).period,"onUpdate:error":t[1]||(t[1]=e=>n(r).period=e),onChange:A},null,8,["modelValue","label","options","error"])]),u("div",ae,[y.isLoaded?(m(),_(C,{key:0,name:"course",label:a.$trans("global.select",{attribute:a.$trans("academic.course.course")}),modelValue:f.selectedCourse,"onUpdate:modelValue":t[2]||(t[2]=e=>f.selectedCourse=e),error:n(r).course,"onUpdate:error":t[3]||(t[3]=e=>n(r).course=e),"value-prop":"uuid","object-prop":!0,"init-search":y.course,"init-search-key":"name",onChange:E,"additional-search-query":{period:o.period},"search-action":"academic/course/list"},{selectedOption:i(e=>[g(d(e.value.division.name)+" - "+d(e.value.name),1)]),listOption:i(e=>[g(d(e.option.division.name)+" - "+d(e.option.name),1)]),_:1},8,["label","modelValue","error","init-search","additional-search-query"])):v("",!0),y.isLoaded&&f.selectedCourse?(m(),_(G,{key:1},{default:i(()=>[f.selectedCourse.enableRegistration?(m(),V("span",oe,d(a.$trans("academic.course.registration_fee_info",{attribute:f.selectedCourse.registrationFee.formatted})),1)):(m(),V("span",re,d(a.$trans("academic.course.registration_disabled_info")),1))]),_:1})):v("",!0)]),u("div",ne,[l(O,{modelValue:o.date,"onUpdate:modelValue":t[4]||(t[4]=e=>o.date=e),name:"date",label:a.$trans("student.registration.props.date"),"no-clear":"",error:n(r).date,"onUpdate:error":t[5]||(t[5]=e=>n(r).date=e)},null,8,["modelValue","label","error"])])])]),_:1}),n(N).params.uuid?v("",!0):(m(),_(S,{key:0,class:"mt-4"},{legend:i(()=>[g(d(a.$trans("student.student")),1)]),default:i(()=>[u("div",se,[u("div",le,[l(h,{"top-margin":"",options:$.studentTypes,name:"studentType",modelValue:o.studentType,"onUpdate:modelValue":t[6]||(t[6]=e=>o.studentType=e),error:n(r).studentType,"onUpdate:error":t[7]||(t[7]=e=>n(r).studentType=e),horizontal:""},null,8,["options","modelValue","error"])]),o.studentType=="existing"?(m(),V("div",de,[l(C,{name:"student",label:a.$trans("global.select",{attribute:a.$trans("student.student")}),modelValue:o.student,"onUpdate:modelValue":t[8]||(t[8]=e=>o.student=e),error:n(r).student,"onUpdate:error":t[9]||(t[9]=e=>n(r).student=e),"value-prop":"uuid","search-action":"student/summary","additional-search-query":{allPeriods:!0,status:"all"}},{selectedOption:i(e=>[g(d(e.value.name)+" ("+d(e.value.contactNumber)+") ",1)]),listOption:i(e=>[g(d(e.option.name)+" ("+d(e.option.contactNumber)+") ",1)]),_:1},8,["label","modelValue","error"])])):v("",!0),o.studentType=="new"?(m(),V(B,{key:1},[u("div",ie,[l(R,null,{default:i(()=>[g(d(a.$trans("student.props.name")),1)]),_:1}),u("div",ue,[l(z,{firstName:o.firstName,"onUpdate:firstName":t[10]||(t[10]=e=>o.firstName=e),middleName:o.middleName,"onUpdate:middleName":t[11]||(t[11]=e=>o.middleName=e),thirdName:o.thirdName,"onUpdate:thirdName":t[12]||(t[12]=e=>o.thirdName=e),lastName:o.lastName,"onUpdate:lastName":t[13]||(t[13]=e=>o.lastName=e),formErrors:n(r),"onUpdate:formErrors":t[14]||(t[14]=e=>Y(r)?r.value=e:null)},null,8,["firstName","middleName","thirdName","lastName","formErrors"])])]),u("div",pe,[l(R,null,{default:i(()=>[g(d(a.$trans("contact.props.gender")),1)]),_:1}),l(h,{"top-margin":"",options:$.genders,name:"gender",modelValue:o.gender,"onUpdate:modelValue":t[15]||(t[15]=e=>o.gender=e),error:n(r).gender,"onUpdate:error":t[16]||(t[16]=e=>n(r).gender=e),horizontal:""},null,8,["options","modelValue","error"])]),u("div",me,[l(O,{modelValue:o.birthDate,"onUpdate:modelValue":t[17]||(t[17]=e=>o.birthDate=e),name:"birthDate",label:a.$trans("contact.props.birth_date"),"no-clear":"",error:n(r).birthDate,"onUpdate:error":t[18]||(t[18]=e=>n(r).birthDate=e)},null,8,["modelValue","label","error"])]),u("div",ce,[l(D,{type:"text",modelValue:o.contactNumber,"onUpdate:modelValue":t[19]||(t[19]=e=>o.contactNumber=e),name:"contactNumber",label:a.$trans("contact.props.contact_number"),error:n(r).contactNumber,"onUpdate:error":t[20]||(t[20]=e=>n(r).contactNumber=e)},null,8,["modelValue","label","error"])])],64)):v("",!0)])]),_:1})),o.studentType=="new"&&!n(N).params.uuid?(m(),_(S,{key:1,class:"mt-4"},{legend:i(()=>[g(d(a.$trans("guardian.guardian")),1)]),default:i(()=>[(m(!0),V(B,null,Z(o.guardians,(e,p)=>(m(),V("div",ge,[u("div",be,[l(h,{"top-margin":"",options:$.guardianTypes,name:`guardians.${p}.guardianType`,modelValue:e.guardianType,"onUpdate:modelValue":s=>e.guardianType=s,error:n(r)[`guardians.${p}.guardianType`],"onUpdate:error":s=>n(r)[`guardians.${p}.guardianType`]=s,horizontal:""},null,8,["options","name","modelValue","onUpdate:modelValue","error","onUpdate:error"])]),e.guardianType=="existing"?(m(),V("div",fe,[l(C,{name:`guardians.${p}.guardian`,label:a.$trans("global.select",{attribute:a.$trans("guardian.guardian")}),modelValue:e.guardian,"onUpdate:modelValue":s=>e.guardian=s,error:n(r)[`guardians.${p}.guardian`],"onUpdate:error":s=>n(r)[`guardians.${p}.guardian`]=s,"value-prop":"uuid","search-action":"guardian/list"},{selectedOption:i(s=>[g(d(s.value.name)+" ("+d(s.value.contactNumber)+") ",1)]),listOption:i(s=>[g(d(s.option.name)+" ("+d(s.option.contactNumber)+") ",1)]),_:2},1032,["name","label","modelValue","onUpdate:modelValue","error","onUpdate:error"])])):v("",!0),e.guardianType=="new"?(m(),V(B,{key:1},[u("div",Ve,[l(R,null,{default:i(()=>[g(d(a.$trans("guardian.props.name"))+" ",1),u("span",{class:"text-danger cursor-pointer",onClick:s=>H(p)},t[22]||(t[22]=[u("i",{class:"fas fa-times-circle"},null,-1)]),8,Ne)]),_:2},1024),l(D,{type:"text",modelValue:e.name,"onUpdate:modelValue":s=>e.name=s,name:"name",placeholder:a.$trans("guardian.props.name"),error:n(r)[`guardians.${p}.name`],"onUpdate:error":s=>n(r)[`guardians.${p}.name`]=s},null,8,["modelValue","onUpdate:modelValue","placeholder","error","onUpdate:error"])]),u("div",$e,[l(D,{type:"text",modelValue:e.contactNumber,"onUpdate:modelValue":s=>e.contactNumber=s,name:"contactNumber",label:a.$trans("contact.props.contact_number"),error:n(r)[`guardians.${p}.contactNumber`],"onUpdate:error":s=>n(r)[`guardians.${p}.contactNumber`]=s},null,8,["modelValue","onUpdate:modelValue","label","error","onUpdate:error"])])],64)):v("",!0),u("div",ve,[l(U,{modelValue:e.relation,"onUpdate:modelValue":s=>e.relation=s,name:`guardians.${p}.relation`,label:a.$trans("contact.props.relation"),options:$.relations,"label-prop":"label","value-prop":"value",error:n(r)[`guardians.${p}.relation`],"onUpdate:error":s=>n(r)[`guardians.${p}.relation`]=s},null,8,["modelValue","onUpdate:modelValue","name","label","options","error","onUpdate:error"])])]))),256)),u("div",ye,[l(J,{design:"primary",onClick:t[21]||(t[21]=e=>F())},{default:i(()=>[g(d(a.$trans("global.add",{attribute:a.$trans("guardian.guardian")})),1)]),_:1})])]),_:1})):v("",!0)]),_:1},8,["form"])}}}),Te={name:"StudentRegistrationAction"},ke=Object.assign(Te,{setup(q){const N=j();return(b,k)=>{const r=c("PageHeaderAction"),$=c("PageHeader"),f=c("ParentTransition");return m(),V(B,null,[l($,{title:b.$trans(n(N).meta.trans,{attribute:b.$trans(n(N).meta.label)}),navs:[{label:b.$trans("student.student"),path:"Student"},{label:b.$trans("student.registration.registration"),path:"StudentRegistration"}]},{default:i(()=>[l(r,{name:"StudentRegistration",title:b.$trans("student.registration.registration"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),l(f,{appear:"",visibility:!0},{default:i(()=>[l(_e)]),_:1})],64)}}});export{ke as default};
