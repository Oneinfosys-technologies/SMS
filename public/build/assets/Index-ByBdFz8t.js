import{f as T,j as L,m as F,G as U,n as A,r as o,o as h,q as S,w as e,d as w,e as t,s as d,t as n,b as j,y as N,l as k,a as B,u as D,F as R,v as O,i as M}from"./app-DCfJDSeM.js";const W={class:"grid grid-cols-3 gap-6"},E={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},G={__name:"Filter",props:{initUrl:{type:String,default:""}},emits:["hide"],setup($,{emit:b}){const _=T();L("moment");const v=b,g=$,f={date:"",batches:[]},r=F({...f});U(g.initUrl);const c=F({isLoaded:!_.query.batches});return A(async()=>{c.batches=_.query.batches?_.query.batches.split(","):[],c.isLoaded=!0}),(l,i)=>{const u=o("DatePicker"),p=o("BaseSelectSearch"),y=o("FilterForm");return h(),S(y,{"init-form":f,multiple:["batches"],form:r,onHide:i[2]||(i[2]=a=>v("hide"))},{default:e(()=>[w("div",W,[w("div",E,[t(u,{modelValue:r.date,"onUpdate:modelValue":i[0]||(i[0]=a=>r.date=a),name:"date",as:"date",label:l.$trans("general.date")},null,8,["modelValue","label"])]),w("div",x,[c.isLoaded?(h(),S(p,{key:0,multiple:"",name:"batches",label:l.$trans("global.select",{attribute:l.$trans("academic.batch.batch")}),modelValue:r.batches,"onUpdate:modelValue":i[1]||(i[1]=a=>r.batches=a),"value-prop":"uuid","init-search":c.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:e(a=>[d(n(a.value.course.name)+" "+n(a.value.name),1)]),listOption:e(a=>[d(n(a.option.course.nameWithTerm)+" "+n(a.option.name),1)]),_:1},8,["label","modelValue","init-search"])):j("",!0)])])]),_:1},8,["form"])}}},z={name:"StudentReportDateWiseAttendance"},J=Object.assign(z,{setup($){const b=T(),_=M();let v=["filter"],g=[];N("student:list-attendance")&&(g=["print","pdf","excel"]);const f="student/report/",r=k(!0),c=k(!1),l=F({headers:[],data:[],meta:{total:0}}),i=async()=>{c.value=!0,await _.dispatch(f+"fetchReport",{name:"date-wise-attendance",params:b.query}).then(u=>{c.value=!1,Object.assign(l,u)}).catch(u=>{c.value=!1})};return A(async()=>{await i()}),(u,p)=>{const y=o("PageHeaderAction"),a=o("PageHeader"),V=o("ParentTransition"),C=o("TextMuted"),m=o("DataCell"),H=o("DataRow"),P=o("DataTable"),q=o("BaseCard");return h(),B(R,null,[t(a,{title:u.$trans(D(b).meta.label),navs:[{label:u.$trans("student.student"),path:"Student"},{label:u.$trans("student.report.report"),path:"StudentReport"}]},{default:e(()=>[t(y,{url:"student/reports/date-wise-attendance/",name:"StudentReportDateWiseAttendance",title:u.$trans("student.report.date_wise_attendance.date_wise_attendance"),actions:D(v),"dropdown-actions":D(g),headers:l.headers,onToggleFilter:p[0]||(p[0]=s=>r.value=!r.value)},null,8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title","navs"]),t(V,{appear:"",visibility:r.value},{default:e(()=>[t(G,{onAfterFilter:i,"init-url":f,onHide:p[1]||(p[1]=s=>r.value=!1)})]),_:1},8,["visibility"]),t(V,{appear:"",visibility:!0},{default:e(()=>[t(q,{"no-padding":"","no-content-padding":"","is-loading":c.value},{default:e(()=>[t(P,{header:l.headers,footer:l.footers,meta:l.meta,module:"student.report.date_wise_attendance",onRefresh:i},{default:e(()=>[(h(!0),B(R,null,O(l.data,s=>(h(),S(H,{key:s.uuid},{default:e(()=>[t(m,{name:"course_batch"},{default:e(()=>[d(n(s.courseBatch)+" ",1),t(C,{block:""},{default:e(()=>[d(n(s.incharge),1)]),_:2},1024)]),_:2},1024),t(m,{name:"strength"},{default:e(()=>[d(n(s.strength),1)]),_:2},1024),t(m,{name:"present"},{default:e(()=>[d(n(s.present),1)]),_:2},1024),t(m,{name:"absent"},{default:e(()=>[d(n(s.absent),1)]),_:2},1024),t(m,{name:"late"},{default:e(()=>[d(n(s.late),1)]),_:2},1024),t(m,{name:"halfDay"},{default:e(()=>[d(n(s.halfDay),1)]),_:2},1024),t(m,{name:"total"},{default:e(()=>[d(n(s.total),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","footer","meta"])]),_:1},8,["is-loading"])]),_:1})],64)}}});export{J as default};
