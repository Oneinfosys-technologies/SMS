import{f as U,m as x,n as E,r as o,o as s,q as m,w as t,d as l,e as n,b as h,y as b,l as O,u as i,C as z,t as a,a as T,v as I,ac as G,s as r,F as V,h as J,j as K}from"./app-DCfJDSeM.js";const Q={class:"grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={__name:"Filter",emits:["hide"],setup(P,{emit:$}){const g=U(),C=$,D={codeNumber:"",title:"",types:[],startDate:"",endDate:""},_=x({...D}),y=x({types:[],isLoaded:!g.query.types});return E(async()=>{y.types=g.query.types?g.query.types.split(","):[],y.isLoaded=!0}),(c,p)=>{const d=o("BaseInput"),u=o("BaseSelectSearch"),B=o("DatePicker"),F=o("FilterForm");return s(),m(F,{"init-form":D,form:_,multiple:["types"],onHide:p[4]||(p[4]=f=>C("hide"))},{default:t(()=>[l("div",Q,[l("div",W,[n(d,{type:"text",modelValue:_.title,"onUpdate:modelValue":p[0]||(p[0]=f=>_.title=f),name:"title",label:c.$trans("activity.trip.props.title")},null,8,["modelValue","label"])]),l("div",X,[y.isLoaded?(s(),m(u,{key:0,multiple:"",name:"types",label:c.$trans("global.select",{attribute:c.$trans("activity.trip.type.type")}),modelValue:_.types,"onUpdate:modelValue":p[1]||(p[1]=f=>_.types=f),"value-prop":"uuid","init-search":y.types,"search-action":"option/list","additional-search-query":{type:"trip_type"}},null,8,["label","modelValue","init-search"])):h("",!0)]),l("div",Y,[n(B,{start:_.startDate,"onUpdate:start":p[2]||(p[2]=f=>_.startDate=f),end:_.endDate,"onUpdate:end":p[3]||(p[3]=f=>_.endDate=f),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},ee={class:"grid grid-cols-1 gap-4 px-4 pt-4 md:grid-cols-2 lg:grid-cols-3"},te=["onClick"],ae=["src"],ne={class:"px-2 py-2 text-gray-800 dark:text-gray-400"},se={class:"flex items-center justify-between"},oe={class:"font-medium"},ie={class:"text-sm"},le={class:"mt-2 flex items-center"},re={class:"mt-2 text-xs"},de={class:"text-xl font-semibold"},ue={name:"ActivityTripList"},me=Object.assign(ue,{setup(P){const $=J(),g=K("emitter");let C=["filter"];b("activity:config")&&C.push("config"),b("trip:manage")&&C.unshift("create");let D=[];b("trip:manage")&&(D=["print","pdf","excel"]);const _="activity/trip/",y=O(!1),c=x({}),p=d=>{Object.assign(c,d)};return(d,u)=>{const B=o("PageHeaderAction"),F=o("PageHeader"),f=o("ParentTransition"),w=o("TextMuted"),L=o("CardView"),S=o("Pagination"),M=o("CardList"),k=o("DataCell"),A=o("FloatingMenuItem"),R=o("FloatingMenu"),H=o("DataRow"),j=o("BaseButton"),q=o("DataTable"),N=o("ListItem");return s(),m(N,{"init-url":_,onSetItems:p},{header:t(()=>[n(F,{title:d.$trans("activity.trip.trip"),navs:[{label:d.$trans("activity.activity"),path:"Activity"}]},{default:t(()=>[n(B,{url:"activity/trips/",name:"ActivityTrip",title:d.$trans("activity.trip.trip"),actions:i(C),"dropdown-actions":i(D),"config-path":"ActivityConfig",onToggleFilter:u[0]||(u[0]=e=>y.value=!y.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[n(f,{appear:"",visibility:y.value},{default:t(()=>[n(Z,{onRefresh:u[1]||(u[1]=e=>i(g).emit("listItems")),onHide:u[2]||(u[2]=e=>y.value=!1)})]),_:1},8,["visibility"])]),default:t(()=>[i(z)(["student","guardian"],"any")?(s(),m(f,{key:0,appear:"",visibility:!0},{default:t(()=>[n(M,{header:c.headers,meta:c.meta},{content:t(()=>[l("div",de,a(d.$trans("dashboard.nothing_to_show")),1)]),default:t(()=>[l("div",ee,[(s(!0),T(V,null,I(c.data,e=>(s(),T("div",{key:e.uuid,class:"cursor-pointer",onClick:v=>i($).push({name:"ActivityTripShow",params:{uuid:e.uuid}})},[l("div",null,[l("img",{class:"rounded-tl-lg rounded-tr-lg",src:e.coverImage},null,8,ae)]),n(L,{"no-padding":"","rounded-bottom":""},{default:t(()=>[l("div",ne,[l("div",se,[l("span",oe,a(e.title),1),l("span",ie,a(e.duration),1)]),l("div",le,[l("span",{class:"px-2 py-1 text-gray-50 text-xs rounded-lg mr-2",style:G(`background-color: ${e.type.color}`)},a(e.type.name),5),e.venue?(s(),m(w,{key:0,block:""},{default:t(()=>[r(" @ "+a(e.venue),1)]),_:2},1024)):h("",!0)]),l("p",re,a(e.durationInDetail),1)])]),_:2},1024)],8,te))),128))]),l("div",null,[n(S,{"card-view":"",meta:c.meta,onRefresh:u[3]||(u[3]=e=>i(g).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):(s(),m(f,{key:1,appear:"",visibility:!0},{default:t(()=>[n(q,{header:c.headers,meta:c.meta,module:"activity.trip",onRefresh:u[5]||(u[5]=e=>i(g).emit("listItems"))},{actionButton:t(()=>[i(b)("trip:manage")?(s(),m(j,{key:0,onClick:u[4]||(u[4]=e=>i($).push({name:"ActivityTripCreate"}))},{default:t(()=>[r(a(d.$trans("global.add",{attribute:d.$trans("activity.trip.trip")})),1)]),_:1})):h("",!0)]),default:t(()=>[(s(!0),T(V,null,I(c.data,e=>(s(),m(H,{key:e.uuid},{default:t(()=>[n(k,{name:"type"},{default:t(()=>[r(a(e.type.name),1)]),_:2},1024),n(k,{name:"title"},{default:t(()=>[r(a(e.title)+" ",1),n(w,{block:""},{default:t(()=>[r(a(e.venue),1)]),_:2},1024)]),_:2},1024),n(k,{name:"startDate"},{default:t(()=>[r(a(e.startDate.formatted)+" ",1),e.startTime.value?(s(),m(w,{key:0,block:""},{default:t(()=>[r(a(e.startTime.formatted),1)]),_:2},1024)):h("",!0)]),_:2},1024),n(k,{name:"endDate"},{default:t(()=>{var v;return[r(a(((v=e.endDate)==null?void 0:v.formatted)||"-")+" ",1),e.endTime.value?(s(),m(w,{key:0,block:""},{default:t(()=>[r(a(e.endTime.formatted),1)]),_:2},1024)):h("",!0)]}),_:2},1024),n(k,{name:"fee"},{default:t(()=>[r(a(e.fee.formatted),1)]),_:2},1024),n(k,{name:"audience"},{default:t(()=>[(s(!0),T(V,null,I(e.audienceTypes,v=>(s(),T("div",null,a(v),1))),256))]),_:2},1024),n(k,{name:"createdAt"},{default:t(()=>[r(a(e.createdAt.formatted),1)]),_:2},1024),n(k,{name:"action"},{default:t(()=>[n(R,null,{default:t(()=>[n(A,{icon:"fas fa-arrow-circle-right",onClick:v=>i($).push({name:"ActivityTripShow",params:{uuid:e.uuid}})},{default:t(()=>[r(a(d.$trans("general.show")),1)]),_:2},1032,["onClick"]),i(b)("trip:manage")?(s(),m(A,{key:0,icon:"fas fa-edit",onClick:v=>i($).push({name:"ActivityTripEdit",params:{uuid:e.uuid}})},{default:t(()=>[r(a(d.$trans("general.edit")),1)]),_:2},1032,["onClick"])):h("",!0),i(b)("trip:manage")?(s(),m(A,{key:1,icon:"fas fa-copy",onClick:v=>i($).push({name:"ActivityTripDuplicate",params:{uuid:e.uuid}})},{default:t(()=>[r(a(d.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):h("",!0),i(b)("trip:manage")?(s(),m(A,{key:2,icon:"fas fa-trash",onClick:v=>i(g).emit("deleteItem",{uuid:e.uuid})},{default:t(()=>[r(a(d.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1}))]),_:1})}}});export{me as default};
