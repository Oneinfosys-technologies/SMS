import{f as j,m as C,n as H,r as n,o as f,q as y,w as e,d as g,e as s,G as z,l as T,s as l,t as i,a as w,u as d,b as P,i as G,F as V,A as x,v as J,h as K,j as Q,z as W}from"./app-DCfJDSeM.js";import{d as X}from"./vuedraggable.umd-DO5pvILy.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},ee={__name:"Filter",emits:["hide"],setup(I,{emit:$}){j();const c=$,v={search:""},p=C({...v}),h=C({isLoaded:!0});return H(async()=>{h.isLoaded=!0}),(m,r)=>{const k=n("BaseInput"),b=n("FilterForm");return f(),y(b,{"init-form":v,form:p,multiple:[],onHide:r[1]||(r[1]=_=>c("hide"))},{default:e(()=>[g("div",Y,[g("div",Z,[s(k,{type:"text",modelValue:p.search,"onUpdate:modelValue":r[0]||(r[0]=_=>p.search=_),name:"search",label:m.$trans("general.search")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},te={key:0},se={class:"flex border rounded-xl px-4 py-2"},oe={key:1},ne={key:2,class:"mt-4 flex justify-end"},ae={name:"SiteBlockReorder"},le=Object.assign(ae,{props:{visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(I,{emit:$}){j();const c=G(),v=$,p={blocks:[]};z("site/block/");const m=T(!1),r=C({blocks:[]});C({...p});const k=async()=>{m.value=!0,await c.dispatch("site/block/list",{params:{all:!0}}).then(u=>{m.value=!1,r.blocks=u}).catch(u=>{m.value=!1})},b=async()=>{m.value=!0,await c.dispatch("site/block/reorder",{data:{blocks:r.blocks}}).then(u=>{m.value=!1,v("refresh"),v("close")}).catch(u=>{m.value=!1})},_=()=>{v("close")};return H(()=>{k()}),(u,a)=>{const t=n("BaseLabel"),B=n("BaseAlert"),M=n("BaseButton"),L=n("BaseModal");return f(),y(L,{show:I.visibility,onClose:_},{title:e(()=>[l(i(u.$trans("global.reorder",{attribute:u.$trans("site.block.block")})),1)]),default:e(()=>[r.blocks.length?(f(),w("div",te,[s(d(X),{class:"space-y-2",list:r.blocks,"item-key":"uuid"},{item:e(({element:F,index:S})=>[g("div",se,[a[0]||(a[0]=g("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),s(t,null,{default:e(()=>[l(i(F.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(f(),w("div",oe,[s(B,{design:"info",size:"xs"},{default:e(()=>[l(i(u.$trans("general.errors.record_not_found")),1)]),_:1})])),r.blocks.length?(f(),w("div",ne,[s(M,{onClick:b},{default:e(()=>[l(i(u.$trans("general.reorder")),1)]),_:1})])):P("",!0)]),_:1},8,["show"])}}}),ie={name:"SiteBlockList"},de=Object.assign(ie,{emits:["refresh"],setup(I,{emit:$}){const c=K(),v=$,p=Q("emitter");let h=["filter"];h.unshift("create");let m=["print","pdf","excel"];const r="site/block/",k=T(!1),b=T(!1),_=C({}),u=a=>{Object.assign(_,a)};return(a,t)=>{const B=n("BaseButton"),M=n("PageHeaderAction"),L=n("PageHeader"),F=n("ParentTransition"),S=n("DataCell"),A=n("TextMuted"),D=n("FloatingMenuItem"),N=n("FloatingMenu"),U=n("DataRow"),E=n("DataTable"),O=n("ListItem"),q=W("tooltip");return f(),w(V,null,[s(O,{"init-url":r,"additional-query":{},onSetItems:u},{header:e(()=>[s(L,{title:a.$trans("site.block.block"),navs:[{label:a.$trans("site.site"),path:"Site"}]},{default:e(()=>[s(M,{url:"site/blocks/",name:"SiteBlock",title:a.$trans("site.block.block"),actions:d(h),"dropdown-actions":d(m),"config-path":"SiteConfig",onToggleFilter:t[2]||(t[2]=o=>k.value=!k.value)},{after:e(()=>[s(B,{design:"white",onClick:t[1]||(t[1]=o=>d(c).push({name:"SiteConfig"}))},{default:e(()=>t[10]||(t[10]=[g("i",{class:"fas fa-cog"},null,-1)])),_:1})]),default:e(()=>[x((f(),y(B,{design:"white",onClick:t[0]||(t[0]=o=>b.value=!b.value)},{default:e(()=>t[9]||(t[9]=[g("i",{class:"fas fa-arrows-up-down-left-right"},null,-1)])),_:1})),[[q,a.$trans("global.reorder",{attribute:a.$trans("site.block.block")})]])]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[s(F,{appear:"",visibility:k.value},{default:e(()=>[s(ee,{onRefresh:t[3]||(t[3]=o=>d(p).emit("listItems")),onHide:t[4]||(t[4]=o=>k.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[s(F,{appear:"",visibility:!0},{default:e(()=>[s(E,{header:_.headers,meta:_.meta,module:"site.block",onRefresh:t[6]||(t[6]=o=>d(p).emit("listItems"))},{actionButton:e(()=>[s(B,{onClick:t[5]||(t[5]=o=>d(c).push({name:"SiteBlockCreate"}))},{default:e(()=>[l(i(a.$trans("global.add",{attribute:a.$trans("site.block.block")})),1)]),_:1})]),default:e(()=>[(f(!0),w(V,null,J(_.data,o=>(f(),y(U,{key:o.uuid},{default:e(()=>[s(S,{name:"name"},{default:e(()=>[l(i(o.name),1)]),_:2},1024),s(S,{name:"title"},{default:e(()=>[l(i(o.title)+" ",1),s(A,{block:""},{default:e(()=>[l(i(o.subTitle),1)]),_:2},1024),o.url?(f(),y(A,{key:0,block:""},{default:e(()=>[l(i(o.url),1)]),_:2},1024)):P("",!0)]),_:2},1024),s(S,{name:"action"},{default:e(()=>[s(N,null,{default:e(()=>[s(D,{icon:"fas fa-arrow-circle-right",onClick:R=>d(c).push({name:"SiteBlockShow",params:{uuid:o.uuid}})},{default:e(()=>[l(i(a.$trans("general.show")),1)]),_:2},1032,["onClick"]),s(D,{icon:"fas fa-edit",onClick:R=>d(c).push({name:"SiteBlockEdit",params:{uuid:o.uuid}})},{default:e(()=>[l(i(a.$trans("general.edit")),1)]),_:2},1032,["onClick"]),s(D,{icon:"fas fa-copy",onClick:R=>d(c).push({name:"SiteBlockDuplicate",params:{uuid:o.uuid}})},{default:e(()=>[l(i(a.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),s(D,{icon:"fas fa-trash",onClick:R=>d(p).emit("deleteItem",{uuid:o.uuid})},{default:e(()=>[l(i(a.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1}),s(le,{visibility:b.value,onClose:t[7]||(t[7]=o=>b.value=!1),onRefresh:t[8]||(t[8]=o=>v("refresh"))},null,8,["visibility"])],64)}}});export{de as default};
