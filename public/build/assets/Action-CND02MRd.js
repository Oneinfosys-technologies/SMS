import{f as L,m as w,G as Z,r as V,z as I,o as c,q as f,w as $,d as p,e as i,u as r,x,s as T,t as k,A as D,a as H,b as U,F as R,v as N,E as q,I as z}from"./app-DCfJDSeM.js";import{d as ee}from"./vuedraggable.umd-DO5pvILy.js";const ae={class:"grid grid-cols-2 gap-6"},oe={class:"col-span-2 sm:col-span-1"},le={class:"col-span-2 sm:col-span-1"},re={class:"col-span-2"},se={class:"col-span-2 sm:col-span-1"},te={class:"flex items-center justify-between"},ne={class:"grid grid-cols-4 gap-3"},pe={class:"col-span-4 sm:col-span-1"},ie={class:"col-span-4 sm:col-span-1"},de={class:"space-x-2"},ce=["onClick"],ue={key:0},me={key:1},ye={class:"col-span-4 sm:col-span-1"},_e={class:"col-span-4 sm:col-span-1"},$e={class:"mt-4"},Ve={key:0,class:"mt-2 space-y-4"},ve=["onClick"],he={class:"col-span-4 sm:col-span-1"},ge={class:"col-span-4 sm:col-span-1"},be={class:"col-span-4 sm:col-span-1"},fe={class:"col-span-4 sm:col-span-1"},Ue={class:"flex items-end align-baseline"},Fe={class:"flex-1"},He=["onClick"],Pe={class:"flex justify-between mt-2"},ke={class:"mt-2"},Ce={class:"mt-4"},Te={name:"EmployeePayrollSalaryTemplateForm"},Be=Object.assign(Te,{setup(G){L();const g={name:"",alias:"",hasHourlyPayroll:!1,records:[],description:""},b="employee/payroll/salaryTemplate/",h=w({attendanceTypes:[],payHeadTypes:[],payHeads:[],variables:[],comparisonOperators:[],logicalOperators:[]}),s=Z(b),m=w({...g}),j=a=>h.variables.filter(o=>o.value!==a.code),J=a=>{a.conditionalFormulas||(a.conditionalFormulas=[]),a.conditionalFormulas.push({conditions:[{referencePayHead:null,operator:">",value:0,logicalOperator:"AND"}],formula:""})},K=(a,o)=>{a.conditionalFormulas.splice(o,1)},M=a=>{a.conditions.push({referencePayHead:null,operator:">",value:0,logicalOperator:"AND"})},Q=(a,o)=>{a.conditions.splice(o,1)},W=a=>{Object.assign(h,a),h.payHeads.forEach((o,v)=>{g.records.push({uuid:q(),payHead:o,attendanceType:"",type:"",position:v,computation:"",hasRange:!1,hasCondition:!1,conditionalFormulas:[],minValue:"",maxValue:""})}),Object.assign(m,z(g))},X=a=>{let o=[];h.payHeads.forEach((v,S)=>{var O,F,E,B;let t=a.records.find(P=>P.payHead.uuid==v.uuid);o.push({uuid:(t==null?void 0:t.uuid)||q(),payHead:v,attendanceType:(t==null?void 0:t.attendanceType)||"",type:((O=t==null?void 0:t.type)==null?void 0:O.value)||"",position:S,computation:(t==null?void 0:t.computation)||"",hasCondition:(t==null?void 0:t.hasCondition)||!1,hasRange:(t==null?void 0:t.hasRange)||!1,conditionalFormulas:((F=t==null?void 0:t.conditionalFormulas)==null?void 0:F.map(P=>({conditions:P.conditions.map(C=>({referencePayHead:C.referencePayHead,operator:C.operator,value:C.value,logicalOperator:C.logicalOperator})),formula:P.formula})))||[],minValue:((E=t==null?void 0:t.minValue)==null?void 0:E.value)||0,maxValue:((B=t==null?void 0:t.maxValue)==null?void 0:B.value)||0})}),Object.assign(g,{...a,records:o}),Object.assign(m,z(g))};return(a,o)=>{const v=V("BaseInput"),S=V("BaseTextarea"),t=V("BaseSwitch"),O=V("BaseLabel"),F=V("BaseSelect"),E=V("HelperText"),B=V("BaseButton"),P=V("BaseFieldset"),C=V("BaseAlert"),Y=V("FormAction"),A=I("tooltip");return c(),f(Y,{"has-setup-wizard":!0,"pre-requisites":!0,onSetPreRequisites:W,"init-url":b,"init-form":g,form:m,"set-form":X,redirect:"EmployeePayrollSalaryTemplate"},{default:$(()=>[p("div",ae,[p("div",oe,[i(v,{type:"text",modelValue:m.name,"onUpdate:modelValue":o[0]||(o[0]=e=>m.name=e),name:"name",label:a.$trans("employee.payroll.salary_template.props.name"),error:r(s).name,"onUpdate:error":o[1]||(o[1]=e=>r(s).name=e),autofocus:""},null,8,["modelValue","label","error"])]),p("div",le,[i(v,{type:"text",modelValue:m.alias,"onUpdate:modelValue":o[2]||(o[2]=e=>m.alias=e),name:"alias",label:a.$trans("employee.payroll.salary_template.props.alias"),error:r(s).alias,"onUpdate:error":o[3]||(o[3]=e=>r(s).alias=e),autofocus:""},null,8,["modelValue","label","error"])]),p("div",re,[i(S,{modelValue:m.description,"onUpdate:modelValue":o[4]||(o[4]=e=>m.description=e),name:"description",label:a.$trans("employee.payroll.salary_template.props.description"),error:r(s).description,"onUpdate:error":o[5]||(o[5]=e=>r(s).description=e)},null,8,["modelValue","label","error"])]),p("div",se,[i(t,{vertical:"",modelValue:m.hasHourlyPayroll,"onUpdate:modelValue":o[6]||(o[6]=e=>m.hasHourlyPayroll=e),name:"hasHourlyPayroll",label:a.$trans("employee.payroll.salary_template.props.hourly_payroll"),error:r(s).hasHourlyPayroll,"onUpdate:error":o[7]||(o[7]=e=>r(s).hasHourlyPayroll=e)},null,8,["modelValue","label","error"])])]),m.hasHourlyPayroll?U("",!0):(c(),f(r(ee),{key:0,list:m.records,"item-key":"uuid",handle:".handle"},{item:$(({element:e,index:l})=>[i(P,{class:"mt-4"},{legend:$(()=>[p("div",te,[o[8]||(o[8]=p("i",{class:"fas fa-arrows mr-2 cursor-pointer handle"},null,-1)),i(O,{class:x({"text-success":e.payHead.category.value=="earning","text-danger":e.payHead.category.value=="deduction","text-info":e.payHead.category.value=="employee_contribution"})},{default:$(()=>[T(k(e.payHead.name)+" ("+k(e.payHead.code)+") ",1)]),_:2},1032,["class"])])]),default:$(()=>[p("div",ne,[p("div",pe,[i(F,{modelValue:e.type,"onUpdate:modelValue":n=>e.type=n,name:`records.${l}.type`,label:a.$trans("employee.payroll.salary_template.props.type"),options:h.payHeadTypes,error:r(s)[`records.${l}.type`],"onUpdate:error":n=>r(s)[`records.${l}.type`]=n},null,8,["modelValue","onUpdate:modelValue","name","label","options","error","onUpdate:error"])]),p("div",ie,[e.type=="computation"?(c(),f(v,{key:0,type:"text",modelValue:e.computation,"onUpdate:modelValue":n=>e.computation=n,name:`records.${l}.computation`,label:a.$trans("employee.payroll.salary_template.props.computation"),error:r(s)[`records.${l}.computation`],"onUpdate:error":n=>r(s)[`records.${l}.computation`]=n},{"additional-label":$(()=>[p("div",de,[p("span",{class:"cursor-pointer",onClick:n=>e.hasRange=!e.hasRange},[e.hasRange?D((c(),H("span",me,o[10]||(o[10]=[p("i",{class:"fas fa-times-circle text-gray-900 dark:text-gray-300"},null,-1)]))),[[A,a.$trans("employee.payroll.salary_template.props.doesnt_have_range")]]):D((c(),H("span",ue,o[9]||(o[9]=[p("i",{class:"fas fa-check-circle text-gray-900 dark:text-gray-300"},null,-1)]))),[[A,a.$trans("employee.payroll.salary_template.props.has_range")]])],8,ce)])]),_:2},1032,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"])):U("",!0),e.type=="production_based"?(c(),f(F,{key:1,modelValue:e.attendanceType,"onUpdate:modelValue":n=>e.attendanceType=n,name:`records.${l}.attendanceType`,label:a.$trans("employee.attendance.type.type"),options:h.attendanceTypes,"label-prop":"name","value-prop":"uuid","object-prop":!0,error:r(s)[`records.${l}.attendanceType`],"onUpdate:error":n=>r(s)[`records.${l}.attendanceType`]=n},null,8,["modelValue","onUpdate:modelValue","name","label","options","error","onUpdate:error"])):U("",!0)]),p("div",ye,[e.type=="computation"&&e.hasRange?(c(),f(v,{key:0,currency:"",modelValue:e.minValue,"onUpdate:modelValue":n=>e.minValue=n,name:`records.${l}.minValue`,label:a.$trans("employee.payroll.salary_template.props.min_value"),error:r(s)[`records.${l}.minValue`],"onUpdate:error":n=>r(s)[`records.${l}.minValue`]=n},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"])):U("",!0)]),p("div",_e,[e.type=="computation"&&e.hasRange?(c(),f(v,{key:0,currency:"",modelValue:e.maxValue,"onUpdate:modelValue":n=>e.maxValue=n,name:`records.${l}.maxValue`,label:a.$trans("employee.payroll.salary_template.props.max_value"),error:r(s)[`records.${l}.maxValue`],"onUpdate:error":n=>r(s)[`records.${l}.maxValue`]=n},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"])):U("",!0)])]),e.type=="computation"?(c(),H(R,{key:0},[p("div",$e,[i(t,{reverse:"",modelValue:e.hasCondition,"onUpdate:modelValue":n=>e.hasCondition=n,name:`records.${l}.hasCondition`},null,8,["modelValue","onUpdate:modelValue","name"]),i(E,null,{default:$(()=>[T(k(a.$trans("employee.payroll.salary_template.conditional_pay_head_info")),1)]),_:1})]),e.hasCondition?(c(),H("div",Ve,[(c(!0),H(R,null,N(e.conditionalFormulas,(n,d)=>(c(),f(P,{key:d},{legend:$(()=>[T(k(a.$trans("employee.payroll.pay_head.pay_head",{index:d+1}))+" ",1),p("i",{class:"ml-2 fas fa-times-circle text-danger cursor-pointer",onClick:_=>K(e,d)},null,8,ve)]),default:$(()=>[(c(!0),H(R,null,N(n.conditions,(_,y)=>(c(),H("div",{key:y,class:"grid grid-cols-4 gap-2 mb-2"},[p("div",he,[i(F,{modelValue:_.referencePayHead,"onUpdate:modelValue":u=>_.referencePayHead=u,name:`records.${l}.conditionalFormulas.${d}.conditions.${y}.referencePayHead`,placeholder:a.$trans("employee.payroll.pay_head.pay_head"),options:j(e.payHead),"label-prop":"label","value-prop":"value","object-prop":!1,error:r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.referencePayHead`],"onUpdate:error":u=>r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.referencePayHead`]=u},null,8,["modelValue","onUpdate:modelValue","name","placeholder","options","error","onUpdate:error"])]),p("div",ge,[i(F,{modelValue:_.operator,"onUpdate:modelValue":u=>_.operator=u,name:`records.${l}.conditionalFormulas.${d}.conditions.${y}.operator`,placeholder:a.$trans("employee.payroll.salary_template.props.operator"),options:h.comparisonOperators,error:r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.operator`],"onUpdate:error":u=>r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.operator`]=u},null,8,["modelValue","onUpdate:modelValue","name","placeholder","options","error","onUpdate:error"])]),p("div",be,[i(v,{type:"number",modelValue:_.value,"onUpdate:modelValue":u=>_.value=u,name:`records.${l}.conditionalFormulas.${d}.conditions.${y}.value`,placeholder:a.$trans("employee.payroll.salary_template.props.value"),error:r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.value`],"onUpdate:error":u=>r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.value`]=u},null,8,["modelValue","onUpdate:modelValue","name","placeholder","error","onUpdate:error"])]),p("div",fe,[p("div",Ue,[p("div",Fe,[y<n.conditions.length-1?(c(),f(F,{key:0,modelValue:_.logicalOperator,"onUpdate:modelValue":u=>_.logicalOperator=u,name:`records.${l}.conditionalFormulas.${d}.conditions.${y}.logicalOperator`,label:a.$trans("employee.payroll.salary_template.props.logical_operator"),options:h.logicalOperators,error:r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.logicalOperator`],"onUpdate:error":u=>r(s)[`records.${l}.conditionalFormulas.${d}.conditions.${y}.logicalOperator`]=u},null,8,["modelValue","onUpdate:modelValue","name","label","options","error","onUpdate:error"])):U("",!0)]),p("i",{class:"ml-4 fas fa-times-circle text-danger cursor-pointer",onClick:u=>Q(n,y)},null,8,He)])])]))),128)),i(v,{type:"text",modelValue:n.formula,"onUpdate:modelValue":_=>n.formula=_,name:`records.${l}.conditionalFormulas.${d}.formula`,placeholder:a.$trans("employee.payroll.salary_template.props.conditional_value"),error:r(s)[`records.${l}.conditionalFormulas.${d}.formula`],"onUpdate:error":_=>r(s)[`records.${l}.conditionalFormulas.${d}.formula`]=_},null,8,["modelValue","onUpdate:modelValue","name","placeholder","error","onUpdate:error"]),p("div",Pe,[i(B,{onClick:_=>M(n),size:"sm"},{default:$(()=>[T(k(a.$trans("global.add",{attribute:a.$trans("general.sub_condition")})),1)]),_:2},1032,["onClick"])])]),_:2},1024))),128))])):U("",!0),p("div",ke,[e.hasCondition?(c(),f(B,{key:0,onClick:n=>J(e),class:"mt-2",size:"sm"},{default:$(()=>[T(k(a.$trans("global.add",{attribute:a.$trans("general.condition")})),1)]),_:2},1032,["onClick"])):U("",!0)])],64)):U("",!0)]),_:2},1024)]),_:1},8,["list"])),p("div",Ce,[i(C,{design:"info"},{default:$(()=>[T(k(a.$trans("employee.payroll.salary_template.variable_info",{variable:h.variables.map(e=>e.value).join(", ")})),1)]),_:1})])]),_:1},8,["form"])}}}),Oe={name:"EmployeePayrollSalaryTemplateAction"},je=Object.assign(Oe,{setup(G){const g=L();return(b,h)=>{const s=V("PageHeaderAction"),m=V("PageHeader"),j=V("ParentTransition");return c(),H(R,null,[i(m,{title:b.$trans(r(g).meta.trans,{attribute:b.$trans(r(g).meta.label)}),navs:[{label:b.$trans("employee.employee"),path:"Employee"},{label:b.$trans("employee.payroll.payroll"),path:"EmployeePayroll"},{label:b.$trans("employee.payroll.salary_template.salary_template"),path:"EmployeePayrollSalaryTemplateList"}]},{default:$(()=>[i(s,{name:"EmployeePayrollSalaryTemplate",title:b.$trans("employee.payroll.salary_template.salary_template"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),i(j,{appear:"",visibility:!0},{default:$(()=>[i(Be)]),_:1})],64)}}});export{je as default};
