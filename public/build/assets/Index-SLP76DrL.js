import{f as j,m as F,n as O,r as l,o as u,q as m,w as e,d as V,e as t,y as g,l as U,u as o,s,t as i,b as D,a as E,v as R,F as q,h as x,j as z}from"./app-DCfJDSeM.js";import{_ as G}from"./ModuleDropdown-CAwsQhjt.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={__name:"Filter",emits:["hide"],setup(B,{emit:p}){j();const h=p,$={startDate:"",endDate:""},c=F({...$}),b=F({isLoaded:!0});return O(async()=>{b.isLoaded=!0}),(f,d)=>{const T=l("DatePicker"),r=l("FilterForm");return u(),m(r,{"init-form":$,form:c,multiple:[],onHide:d[2]||(d[2]=n=>h("hide"))},{default:e(()=>[V("div",J,[V("div",K,[t(T,{start:c.startDate,"onUpdate:start":d[0]||(d[0]=n=>c.startDate=n),end:c.endDate,"onUpdate:end":d[1]||(d[1]=n=>c.endDate=n),name:"dateBetween",as:"range",label:f.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},W={name:"TransportVehicleServiceRecordList"},Z=Object.assign(W,{setup(B){const p=x(),h=z("emitter");let $=["filter"];g("vehicle-service-record:create")&&$.unshift("create");let c=[];g("vehicle-service-record:export")&&(c=["print","pdf","excel"]);const b="transport/vehicle/serviceRecord/",f=U(!1),d=F({}),T=r=>{Object.assign(d,r)};return(r,n)=>{const I=l("PageHeaderAction"),P=l("PageHeader"),w=l("ParentTransition"),C=l("TextMuted"),_=l("DataCell"),k=l("FloatingMenuItem"),L=l("FloatingMenu"),M=l("DataRow"),A=l("BaseButton"),H=l("DataTable"),N=l("ListItem");return u(),m(N,{"init-url":b,onSetItems:T},{header:e(()=>[t(P,{title:r.$trans("transport.vehicle.service_record.service_record"),navs:[{label:r.$trans("transport.transport"),path:"Transport"},{label:r.$trans("transport.vehicle.vehicle"),path:"TransportVehicle"}]},{default:e(()=>[t(I,{url:"transport/vehicle/service-records/",name:"TransportVehicleServiceRecord",title:r.$trans("transport.vehicle.service_record.service_record"),actions:o($),"dropdown-actions":o(c),onToggleFilter:n[0]||(n[0]=a=>f.value=!f.value)},{moduleOption:e(()=>[t(G)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(w,{appear:"",visibility:f.value},{default:e(()=>[t(Q,{onRefresh:n[1]||(n[1]=a=>o(h).emit("listItems")),onHide:n[2]||(n[2]=a=>f.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(w,{appear:"",visibility:!0},{default:e(()=>[t(H,{header:d.headers,meta:d.meta,module:"transport.vehicle.service_record",onRefresh:n[4]||(n[4]=a=>o(h).emit("listItems"))},{actionButton:e(()=>[o(g)("vehicle-service-record:create")?(u(),m(A,{key:0,onClick:n[3]||(n[3]=a=>o(p).push({name:"TransportVehicleServiceRecordCreate"}))},{default:e(()=>[s(i(r.$trans("global.add",{attribute:r.$trans("transport.vehicle.service_record.service_record")})),1)]),_:1})):D("",!0)]),default:e(()=>[(u(!0),E(q,null,R(d.data,a=>(u(),m(M,{key:a.uuid},{default:e(()=>[t(_,{name:"vehicle"},{default:e(()=>{var v;return[s(i((v=a.vehicle)==null?void 0:v.name)+" ",1),t(C,{block:""},{default:e(()=>{var y;return[s(i((y=a.vehicle)==null?void 0:y.registrationNumber),1)]}),_:2},1024)]}),_:2},1024),t(_,{name:"date"},{default:e(()=>[s(i(a.date.formatted)+" ",1),t(C,{block:""},{default:e(()=>[s(i(a.nextDueDate.formatted),1)]),_:2},1024)]),_:2},1024),t(_,{name:"log"},{default:e(()=>[s(i(a.log)+" ",1),t(C,{block:""},{default:e(()=>[s(i(a.nextDueLog),1)]),_:2},1024)]),_:2},1024),t(_,{name:"amount"},{default:e(()=>[s(i(a.amount.formatted),1)]),_:2},1024),t(_,{name:"createdAt"},{default:e(()=>[s(i(a.createdAt.formatted),1)]),_:2},1024),t(_,{name:"action"},{default:e(()=>[t(L,null,{default:e(()=>[t(k,{icon:"fas fa-arrow-circle-right",onClick:v=>o(p).push({name:"TransportVehicleServiceRecordShow",params:{uuid:a.uuid}})},{default:e(()=>[s(i(r.$trans("general.show")),1)]),_:2},1032,["onClick"]),o(g)("vehicle-service-record:edit")?(u(),m(k,{key:0,icon:"fas fa-edit",onClick:v=>o(p).push({name:"TransportVehicleServiceRecordEdit",params:{uuid:a.uuid}})},{default:e(()=>[s(i(r.$trans("general.edit")),1)]),_:2},1032,["onClick"])):D("",!0),o(g)("vehicle-service-record:create")?(u(),m(k,{key:1,icon:"fas fa-copy",onClick:v=>o(p).push({name:"TransportVehicleServiceRecordDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[s(i(r.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):D("",!0),o(g)("vehicle-service-record:delete")?(u(),m(k,{key:2,icon:"fas fa-trash",onClick:v=>o(h).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[s(i(r.$trans("general.delete")),1)]),_:2},1032,["onClick"])):D("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Z as default};
