import{h as A,i as D,l as L,m as j,n as F,r as p,o as e,q as T,w as o,d as t,e as i,s as g,t as s,a as n,F as x,v as $,b as _,x as B,u as k,z as q,N as H,O as U,P as Y,Q as W,A as Q,R as J,C as N,j as K,k as X,g as P,B as Z,c as ee,S as te,f as se,y as R}from"./app-DCfJDSeM.js";import{C as ae,a as ne,L as le,B as re,p as oe,b as de,c as ie,d as V}from"./index-C67_s1E_.js";import{_ as ce}from"./EditRequestInfo-CFFOtg2a.js";import{F as ue}from"./v3-CeDQHzCG.js";const me={class:"bg-black px-4 pb-16 pt-6"},ge={class:"dark:bg-dark-header rounded-lg bg-white border-b border-gray-200 dark:border-gray-700"},_e={class:"flex items-center p-4"},he={class:"shrink-0"},pe={key:0,class:"text-xl font-semibold leading-none text-gray-900 dark:text-gray-400 sm:text-2xl"},be={key:0,class:"text-2xl sm:text-3xl"},fe={key:1,class:"text-2xl font-semibold leading-none text-gray-900 dark:text-gray-400 sm:text-3xl"},ye={class:"mt-2 text-base font-normal uppercase text-gray-500"},ve={key:0,class:"mt-1 flex items-center gap-2"},xe={class:"text-sm font-semibold leading-none text-gray-500 dark:text-gray-400"},ke={class:"ml-5 flex w-0 flex-1 items-center justify-end font-bold"},$e={class:"px-4 py-2 space-y-2"},we={class:"px-4 py-2 space-y-2"},Se={name:"DashboardStat"},Te=Object.assign(Se,{setup(w){ae.register(ne,le,re,oe,de,ie);const y=A(),h=D(),d=L(!1),f=j({stats:[],attendanceSummary:[],feeSummary:[],studentStrengthChartData:[],transactionChartData:[]});return F(async()=>{d.value=!0,await h.dispatch("dashboard/getStat").then(u=>{d.value=!1,Object.assign(f,u)}).catch(u=>{d.value=!1})}),(u,r)=>{const c=p("BaseFlexCard"),v=p("TextMuted"),l=p("BaseLabel"),a=p("ProgressBar"),m=p("BaseFlexContainer"),S=p("BaseLoader");return e(),T(S,{"is-loading":d.value},{default:o(()=>[t("div",me,[i(m,null,{default:o(()=>[i(c,{class:"md:w-1/3"},{title:o(()=>[g(s(u.$trans("dashboard.statistics")),1)]),default:o(()=>[(e(!0),n(x,null,$(f.stats,b=>(e(),n("div",ge,[t("div",_e,[t("div",he,[t("div",null,[b.subCount?(e(),n("span",pe,[g(s(b.count),1),b.subCount?(e(),n("span",be,"/"+s(b.subCount),1)):_("",!0)])):(e(),n("span",fe,s(b.count),1)),t("h3",ye,s(b.title),1)]),b.subTitle?(e(),n("div",ve,[t("i",{class:B(b.subTitleIcon)},null,2),t("span",xe,s(b.subTitleCount)+" "+s(b.subTitle),1)])):_("",!0)]),t("div",ke,[t("div",{class:B(["rounded-full",[b.color]])},[t("i",{class:B([b.icon,"flex h-12 w-12 items-center justify-center text-white"])},null,2)],2)])])]))),256))]),_:1}),i(c,{class:"md:w-1/3"},{title:o(()=>[g(s(u.$trans("global.summary",{attribute:u.$trans("student.attendance.attendance")})),1)]),action:o(()=>[t("i",{class:"cursor-pointer text-gray-800 dark:text-gray-400 fa-solid fa-up-right-from-square",onClick:r[0]||(r[0]=b=>k(y).push({name:"StudentReportDateWiseAttendance"}))})]),default:o(()=>[t("div",$e,[(e(!0),n(x,null,$(f.attendanceSummary,b=>(e(),n("div",null,[i(l,null,{default:o(()=>[g(s(b.label)+" ",1),i(v,null,{default:o(()=>[g(s(b.value)+" / "+s(b.max),1)]),_:2},1024)]),_:2},1024),i(a,{space:"",height:"h-2",percent:b.percent,max:b.max,color:b.color},null,8,["percent","max","color"])]))),256))])]),_:1}),i(c,{class:"md:w-1/3"},{title:o(()=>[g(s(u.$trans("global.summary",{attribute:u.$trans("student.fee.fee")})),1)]),default:o(()=>[t("div",we,[(e(!0),n(x,null,$(f.feeSummary,b=>(e(),n("div",null,[i(l,null,{default:o(()=>[g(s(b.label)+" ",1),i(v,null,{default:o(()=>[g(s(b.value)+" / "+s(b.max),1)]),_:2},1024)]),_:2},1024),i(a,{space:"",height:"h-2",percent:b.percent,max:b.max,color:b.color},null,8,["percent","max","color"])]))),256))])]),_:1})]),_:1})]),i(m,{class:"-mt-12 px-4"},{default:o(()=>[i(c,{class:"md:w-1/2","is-loading":d.value},{title:o(()=>[g(s(u.$trans("academic.student_strength")),1)]),default:o(()=>[f.studentStrengthChartData.labels?(e(),T(k(V),{key:0,data:f.studentStrengthChartData,options:{responsive:!0}},null,8,["data"])):_("",!0)]),_:1},8,["is-loading"]),i(c,{class:"md:w-1/2","is-loading":d.value},{title:o(()=>[g(s(u.$trans("finance.receipt_vs_payment")),1)]),default:o(()=>[f.transactionChartData.labels?(e(),T(k(V),{key:0,data:f.transactionChartData,options:{responsive:!0}},null,8,["data"])):_("",!0)]),_:1},8,["is-loading"])]),_:1})]),_:1},8,["is-loading"])}}}),Ce={class:"lg:flex lg:h-full lg:flex-col"},Be={class:"flex items-center justify-between border-b border-gray-200 dark:border-gray-700 px-6 py-4 lg:flex-none"},Me={class:"text-base font-semibold leading-6 text-gray-900 dark:text-gray-300"},Le={datetime:"2022-01"},De={class:"flex items-center"},je={class:"relative flex items-center rounded-md bg-white dark:bg-dark-header shadow-sm md:items-stretch"},Fe={class:"hidden md:ml-4 md:flex md:items-center"},Ne={class:"shadow ring-1 ring-black ring-opacity-5 lg:flex lg:flex-auto lg:flex-col"},Ae={class:"flex bg-gray-200 dark:bg-gray-700 text-xs leading-6 text-gray-700 dark:text-gray-400 lg:flex-auto"},ze=["datetime"],Oe={class:"flex"},Pe={key:0,class:"mt-2"},Re=["href"],Ve={class:"flex-auto truncate font-medium text-gray-900 dark:text-gray-400 group-hover:text-gray-300"},Ye=["datetime"],Ge={key:0,class:"text-gray-500"},Ie=["datetime"],Ee={class:"flex"},qe={class:"sr-only"},He={key:0,class:"-mx-0.5 mt-auto flex flex-wrap-reverse"},Ue={key:0,class:"px-4 py-10 sm:px-6 lg:hidden"},We={class:"divide-y divide-gray-100 overflow-hidden rounded-lg bg-white text-sm shadow ring-1 ring-black ring-opacity-5"},Qe={class:"flex-auto"},Je={class:"font-semibold text-gray-900"},Ke=["datetime"],Xe=["href"],Ze={class:"sr-only"},et={name:"DashboardScheduleCalendar"},tt=Object.assign(et,{props:{calendar:{type:Object,required:!0}},emits:["previousMonth","nextMonth"],setup(w,{emit:y}){const h=y,f=w.calendar.days.find(u=>u.isSelected);return(u,r)=>{var v;const c=q("tooltip");return e(),n("div",Ce,[t("header",Be,[t("h1",Me,[t("time",Le,s(w.calendar.month),1)]),t("div",De,[t("div",je,[t("span",{class:"cursor-pointer flex h-9 w-12 items-center justify-center rounded-l-md border-y border-l border-gray-300 dark:border-gray-500 pr-1 text-gray-400 dark:text-gray-500 hover:text-gray-500 focus:relative md:w-9 md:pr-0 md:hover:bg-gray-50 dark:md:hover:bg-black",onClick:r[0]||(r[0]=l=>h("previousMonth"))},[r[2]||(r[2]=t("span",{class:"sr-only"},"Previous month",-1)),i(k(H),{class:"h-5 w-5","aria-hidden":"true"})]),r[4]||(r[4]=t("span",{class:"relative -mx-px h-5 w-px bg-gray-300 md:hidden"},null,-1)),t("span",{class:"cursor-pointer flex h-9 w-12 items-center justify-center rounded-r-md border-y border-r border-gray-300 dark:border-gray-500 pl-1 text-gray-400 dark:text-gray-500 hover:text-gray-500 focus:relative md:w-9 md:pl-0 md:hover:bg-gray-50 dark:md:hover:bg-black",onClick:r[1]||(r[1]=l=>h("nextMonth"))},[r[3]||(r[3]=t("span",{class:"sr-only"},"Next month",-1)),i(k(U),{class:"h-5 w-5","aria-hidden":"true"})])]),t("div",Fe,[Y(u.$slots,"action")])])]),t("div",Ne,[r[5]||(r[5]=W('<div class="grid grid-cols-7 gap-px border-b border-gray-300 dark:border-gray-600 bg-gray-200 dark:bg-gray-700 text-center text-xs font-semibold leading-6 text-gray-700 dark:text-gray-400 lg:flex-none"><div class="bg-white dark:bg-dark-body py-2"> M<span class="sr-only sm:not-sr-only">on</span></div><div class="bg-white dark:bg-dark-body py-2"> T<span class="sr-only sm:not-sr-only">ue</span></div><div class="bg-white dark:bg-dark-body py-2"> W<span class="sr-only sm:not-sr-only">ed</span></div><div class="bg-white dark:bg-dark-body py-2"> T<span class="sr-only sm:not-sr-only">hu</span></div><div class="bg-white dark:bg-dark-body py-2"> F<span class="sr-only sm:not-sr-only">ri</span></div><div class="bg-white dark:bg-dark-body py-2"> S<span class="sr-only sm:not-sr-only">at</span></div><div class="bg-white dark:bg-dark-body py-2"> S<span class="sr-only sm:not-sr-only">un</span></div></div>',1)),t("div",Ae,[t("div",{class:B(["hidden w-full lg:grid lg:grid-cols-7 lg:gap-px",{"lg:grid-rows-4":w.calendar.days.length<=28,"lg:grid-rows-5":w.calendar.days.length>28&&w.calendar.days.length<=35,"lg:grid-rows-6":w.calendar.days.length>35}])},[(e(!0),n(x,null,$(w.calendar.days,l=>(e(),n("div",{key:l.date,class:B([l.isCurrentMonth?"bg-white dark:bg-dark-header":"bg-gray-50 dark:bg-dark-body text-gray-500","relative px-3 py-2"])},[t("time",{datetime:l.date,class:B(l.isToday?"flex h-6 w-6 items-center justify-center rounded-full bg-primary dark:bg-dark-primary font-semibold text-white":void 0)},s(l.date.split("-").pop().replace(/^0/,"")),11,ze),t("div",Oe,[(e(!0),n(x,null,$(l.attendances,a=>(e(),n("span",{key:a.studentName},[t("small",null,[a.code?(e(),n("span",{key:0,class:B(["rounded-full px-2 py-1 text-white",{"bg-primary":a.code==="H","bg-success":a.code==="P","bg-danger":a.code==="A","bg-info":a.code==="L","bg-warning":a.code==="HD"}])},s(l.attendances.length>1?a.idNumber:a.code),3)):_("",!0)])]))),128))]),l.events.length>0?(e(),n("ol",Pe,[(e(!0),n(x,null,$(l.events.slice(0,2),a=>(e(),n("li",{key:a.id},[t("a",{href:a.href,class:"group flex"},[Q((e(),n("p",Ve,[g(s(a.name),1)])),[[c,a.name]]),t("time",{datetime:a.datetime,class:"ml-3 hidden flex-none text-gray-500 group-hover:text-gray-300 xl:block"},s(a.time),9,Ye)],8,Re)]))),128)),l.events.length>2?(e(),n("li",Ge," + "+s(l.events.length-2)+" more ",1)):_("",!0)])):_("",!0)],2))),128))],2),t("div",{class:B(["isolate grid w-full grid-cols-7 gap-px lg:hidden",{"lg:grid-rows-4":w.calendar.days.length<=28,"lg:grid-rows-5":w.calendar.days.length>28&&w.calendar.days.length<=35,"lg:grid-rows-6":w.calendar.days.length>35}])},[(e(!0),n(x,null,$(w.calendar.days,l=>(e(),n("button",{key:l.date,type:"button",class:B([l.isCurrentMonth?"bg-white":"bg-gray-50",(l.isSelected||l.isToday)&&"font-semibold",l.isSelected&&"text-white",!l.isSelected&&l.isToday&&"text-primary",!l.isSelected&&l.isCurrentMonth&&!l.isToday&&"text-gray-900",!l.isSelected&&!l.isCurrentMonth&&!l.isToday&&"text-gray-500","flex h-14 flex-col px-3 py-2 hover:bg-gray-100 focus:z-10"])},[t("time",{datetime:l.date,class:B([l.isSelected&&"flex h-6 w-6 items-center justify-center rounded-full",l.isSelected&&l.isToday&&"bg-primary dark:bg-dark-primary",l.isSelected&&!l.isToday&&"bg-gray-900","ml-auto"])},s(l.date.split("-").pop().replace(/^0/,"")),11,Ie),t("div",Ee,[(e(!0),n(x,null,$(l.attendances,(a,m)=>(e(),n("span",{key:a.studentName},[t("small",null,[a.code?(e(),n("span",{key:0,class:B(["rounded-full px-2 py-1 text-white",{"bg-success":a.code==="P","bg-danger":a.code==="A","bg-info":a.code==="L","bg-warning":a.code==="HD"}])},s(m+1),3)):_("",!0)])]))),128))]),t("span",qe,s(l.events.length)+" events",1),l.events.length>0?(e(),n("span",He,[(e(!0),n(x,null,$(l.events,a=>(e(),n("span",{key:a.id,class:"mx-0.5 mb-1 h-1.5 w-1.5 rounded-full bg-gray-400"}))),128))])):_("",!0)],2))),128))],2)])]),((v=k(f))==null?void 0:v.events.length)>0?(e(),n("div",Ue,[t("ol",We,[(e(!0),n(x,null,$(k(f).events,l=>(e(),n("li",{key:l.id,class:"group flex p-4 pr-6 focus-within:bg-gray-50 hover:bg-gray-50"},[t("div",Qe,[t("p",Je,s(l.name),1),t("time",{datetime:l.datetime,class:"mt-2 flex items-center text-gray-700"},[i(k(J),{class:"mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),g(" "+s(l.time),1)],8,Ke)]),t("a",{href:l.href,class:"ml-6 flex-none self-center rounded-md bg-white px-3 py-2 font-semibold text-gray-900 opacity-0 shadow-sm ring-1 ring-inset ring-gray-300 hover:ring-gray-400 focus:opacity-100 group-hover:opacity-100"},[r[6]||(r[6]=g("Edit")),t("span",Ze,", "+s(l.name),1)],8,Xe)]))),128))])])):_("",!0)])}}}),st={class:"scroller-thin-y scroller-hidden max-h-96"},at=["onClick"],nt={class:"flex items-center"},lt={class:"shrink-0"},rt={class:"ml-5 flex w-0 flex-1 items-center"},ot={class:"dark:text-gray-400"},dt={key:0,class:"p-2"},it={__name:"FeedItem",props:{feedItems:{type:Array,default:()=>[]}},setup(w){const y=A(),h=d=>{d.hasDetail&&(d.type=="announcement"?y.push({name:"CommunicationAnnouncementShow",params:{uuid:d.uuid}}):d.type=="event"?y.push({name:"CalendarEventShow",params:{uuid:d.uuid}}):d.type=="exam"?y.push({name:"ExamSchedule"}):d.type=="diary"?y.push({name:"ResourceDiaryShow",params:{uuid:d.uuid}}):d.type=="assignment"?y.push({name:"ResourceAssignmentShow",params:{uuid:d.uuid}}):d.type=="learning_material"?y.push({name:"ResourceLearningMaterialShow",params:{uuid:d.uuid}}):d.type=="meal"&&y.push({name:"MessMealLogShow",params:{uuid:d.uuid}}))};return(d,f)=>{const u=p("TextMuted"),r=p("BaseAlert");return e(),n("div",st,[(e(!0),n(x,null,$(w.feedItems,c=>(e(),n("div",{class:"border-b border-gray-200 p-4 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-neutral-700 cursor-pointer",onClick:v=>h(c)},[t("div",nt,[t("div",lt,[t("div",{class:B(["rounded-full p-2",[c.color]])},[t("i",{class:B([c.icon,"flex h-6 w-6 items-center justify-center text-white"])},null,2)],2)]),t("div",rt,[t("div",null,[t("p",ot,s(c.title),1),c.subTitle?(e(),T(u,{key:0,block:""},{default:o(()=>[g(s(c.subTitle),1)]),_:2},1024)):_("",!0),i(u,{block:""},{default:o(()=>[g(s(c.duration),1)]),_:2},1024)])])])],8,at))),256)),w.feedItems.length==0?(e(),n("div",dt,[i(r,{size:"xs",design:"info"},{default:o(()=>[g(s(d.$trans("dashboard.nothing_to_show")),1)]),_:1})])):_("",!0)])}}},ct={class:"scroller-thin-y scroller-hidden max-h-96"},ut={class:"p-2"},mt={key:0,class:"text-center text-sm font-semibold text-gray-800 dark:text-gray-200"},gt={class:"mt-2"},_t={class:"mt-2 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-800"},ht={class:"flex justify-between items-center text-sm"},pt={class:"font-medium"},bt={class:"text-xs"},ft={key:0,class:"mt-1 flex justify-between items-center text-xs"},yt={key:0},vt={key:1,class:"mt-1 text-xs"},xt={key:0,class:"p-2"},kt={key:0,class:"mt-2 p-2"},$t={class:"flex justify-between items-center text-sm"},wt={class:"font-medium"},St={class:"text-xs"},Tt={class:"mt-1 flex justify-between items-center text-xs"},Ct={key:0},Bt={key:0,class:"mt-1 text-xs"},Mt={key:1,class:"p-2"},Lt={__name:"Timetable",setup(w){const y=D(),h=L(!1),d=j({students:[],sessions:[],employee:null}),f=async()=>{h.value=!0,await y.dispatch("dashboard/getTimetable").then(u=>{N(["student","guardian"],"any")?d.students=u:(d.sessions=u.sessions||[],d.employee=u.employee||{}),h.value=!1}).catch(u=>{h.value=!1})};return F(async()=>{await f()}),(u,r)=>{const c=p("BaseAlert"),v=p("BaseFieldset"),l=p("BaseCard");return e(),n("div",ct,[k(N)(["student","guardian"],"any")?(e(),T(l,{key:0,"no-content-padding":"","no-padding":"","is-loading":h.value},{default:o(()=>[(e(!0),n(x,null,$(d.students,(a,m)=>(e(),n("div",ut,[i(v,null,{legend:o(()=>[g(s(a.name)+" - "+s(a.batch),1)]),default:o(()=>[a.room?(e(),n("p",mt,s(a.room),1)):_("",!0),t("div",gt,[a.info?(e(),T(c,{key:0,size:"xs",design:"info"},{default:o(()=>[g(s(a.info),1)]),_:2},1024)):_("",!0),t("div",_t,[(e(!0),n(x,null,$(a.sessions,(S,b)=>{var M,z;return e(),n("div",{key:b,class:B(["",["p-3",b%2===0&&!S.isCurrent?"bg-white dark:bg-dark-body":"bg-gray-100 dark:bg-dark-header",S.isCurrent?"bg-success dark:bg-success text-white":"text-gray-800 dark:text-gray-200"]])},[t("div",ht,[t("span",pt,s(S.name),1),t("span",bt,[g(s(S.startTime.formatted)+" - "+s(S.endTime.formatted)+" ",1),r[0]||(r[0]=t("i",{class:"far fa-clock"},null,-1))])]),(M=S.subject)!=null&&M.name?(e(),n("div",ft,[t("span",null,s(S.subject.name)+" ("+s(S.subject.code)+")",1),(z=S.employee)!=null&&z.name?(e(),n("span",yt,s(S.employee.name)+" ("+s(S.employee.designation)+") ",1)):_("",!0)])):_("",!0),S.room?(e(),n("div",vt,s(S.room),1)):_("",!0)],2)}),128))])])]),_:2},1024)]))),256)),d.students.length==0?(e(),n("div",xt,[i(c,{size:"xs",design:"info"},{default:o(()=>[g(s(u.$trans("dashboard.nothing_to_show")),1)]),_:1})])):_("",!0)]),_:1},8,["is-loading"])):(e(),T(l,{key:1,"no-content-padding":"","no-padding":"","is-loading":h.value},{default:o(()=>{var a;return[(a=d.employee)!=null&&a.name?(e(),n("div",kt,[i(v,null,{legend:o(()=>[g(s(d.employee.name)+" ("+s(d.employee.designation)+") ",1)]),default:o(()=>[(e(!0),n(x,null,$(d.sessions,(m,S)=>(e(),n("div",{key:S,class:B(["",["p-3",S%2===0?"bg-white dark:bg-dark-body":"bg-gray-100 dark:bg-dark-header"]])},[t("div",$t,[t("span",wt,s(m.name),1),t("span",St,[g(s(m.startTime.formatted)+" - "+s(m.endTime.formatted)+" ",1),r[1]||(r[1]=t("i",{class:"far fa-clock"},null,-1))])]),t("div",Tt,[m.batch?(e(),n("span",Ct,s(m.batch),1)):_("",!0),t("span",null,s(m.subject.name)+" ("+s(m.subject.code)+")",1)]),m.room?(e(),n("div",Bt,s(m.room),1)):_("",!0)],2))),128))]),_:1})])):_("",!0),d.sessions.length==0?(e(),n("div",Mt,[i(c,{size:"xs",design:"info"},{default:o(()=>[g(s(u.$trans("dashboard.nothing_to_show")),1)]),_:1})])):_("",!0)]}),_:1},8,["is-loading"]))])}}},Dt={class:"scroller-thin-y scroller-hidden max-h-96"},jt={class:"border-b border-gray-200 p-4 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-neutral-700 text-gray-700 dark:text-gray-300"},Ft={class:"text-center text-sm"},Nt={key:0,class:"mt-4 border-2 border-primary dark:border-gray-200 rounded-lg px-4 py-2"},At={class:"flex text-sm"},zt={class:"flex-1"},Ot={class:"font-medium"},Pt={class:"flex-1"},Rt={class:"mt-4 flex justify-between"},Vt={class:"flex-1"},Yt={class:""},Gt={class:"mt-1 flex text-xs"},It={class:"flex-1"},Et={class:"flex-1"},qt={class:"flex-1"},Ht={class:"mt-1 flex text-xs"},Ut={class:"flex-1"},Wt={class:"flex-1"},Qt={key:0,class:"p-2"},Jt={__name:"TransportRoute",setup(w){const y=D(),h=L(!1),d=j({transportRoutes:[]}),f=async()=>{h.value=!0,await y.dispatch("dashboard/getTransportRoute").then(u=>{d.transportRoutes=u,h.value=!1}).catch(u=>{h.value=!1})};return F(async()=>{await f()}),(u,r)=>{const c=p("TextMuted"),v=p("BaseAlert"),l=p("BaseLoader");return e(),n("div",Dt,[i(l,{"is-loading":h.value},{default:o(()=>[(e(!0),n(x,null,$(d.transportRoutes,a=>(e(),n("div",jt,[t("div",Ft,[g(s(a.vehicle.name)+" ",1),i(c,null,{default:o(()=>[g("("+s(a.vehicle.registrationNumber)+")",1)]),_:2},1024)]),a.employees.length>0?(e(),n("div",Nt,[(e(!0),n(x,null,$(a.employees,m=>(e(),n("div",At,[t("div",zt,[t("div",Ot,s(m.name),1)]),t("div",Pt,[g(s(m.title)+" ",1),i(c,null,{default:o(()=>[g(s(m.contactNumber),1)]),_:2},1024)])]))),256))])):_("",!0),t("div",Rt,[t("div",Vt,[t("div",Yt,[r[0]||(r[0]=t("i",{class:"fas fa-arrow-up"},null,-1)),g(" "+s(u.$trans("transport.circle.directions.arrival")),1)]),(e(!0),n(x,null,$(a.arrivalStoppages,m=>(e(),n("div",Gt,[t("div",It,[t("div",null,s(m.name),1)]),t("div",Et,s(m.arrivalTime.formatted),1)]))),256))]),t("div",qt,[t("div",null,[r[1]||(r[1]=t("i",{class:"fas fa-arrow-down"},null,-1)),g(" "+s(u.$trans("transport.circle.directions.departure")),1)]),(e(!0),n(x,null,$(a.departureStoppages,m=>(e(),n("div",Ht,[t("div",Ut,[t("div",null,s(m.name),1)]),t("div",Wt,s(m.arrivalTime.formatted),1)]))),256))])])]))),256)),d.transportRoutes.length==0?(e(),n("div",Qt,[i(v,{size:"xs",design:"info"},{default:o(()=>[g(s(u.$trans("dashboard.nothing_to_show")),1)]),_:1})])):_("",!0)]),_:1},8,["is-loading"])])}}},Kt={class:"scroller-thin-y scroller-hidden max-h-96"},Xt={class:"border-b border-gray-200 p-4 hover:bg-gray-100 dark:border-gray-700 dark:hover:bg-neutral-700 text-gray-700 dark:text-gray-300"},Zt={class:"text-sm"},es={class:"mt-2"},ts={class:"text-sm font-semibold"},ss={class:"mt-1"},as={key:0,class:"p-2"},ns={__name:"MessSchedule",setup(w){const y=D(),h=L(!1),d=j({messSchedules:[]}),f=async()=>{h.value=!0,await y.dispatch("dashboard/getMessSchedule").then(u=>{d.messSchedules=u,h.value=!1}).catch(u=>{h.value=!1})};return F(async()=>{await f()}),(u,r)=>{const c=p("TextMuted"),v=p("BaseAlert"),l=p("BaseLoader");return e(),n("div",Kt,[i(l,{"is-loading":h.value},{default:o(()=>[(e(!0),n(x,null,$(d.messSchedules,a=>(e(),n("div",Xt,[t("div",Zt,[r[0]||(r[0]=t("i",{class:"fas fa-calendar-days mr-2"},null,-1)),t("span",null,s(u.moment(a.date.value).format("dddd Do, MMMM YYYY")),1)]),(e(!0),n(x,null,$(a.meals,m=>(e(),n("div",es,[t("div",ts,s(m.name),1),t("div",ss,[i(c,{block:""},{default:o(()=>[g(s(m.items),1)]),_:2},1024)])]))),256))]))),256)),d.messSchedules.length==0?(e(),n("div",as,[i(v,{size:"xs",design:"info"},{default:o(()=>[g(s(u.$trans("dashboard.nothing_to_show")),1)]),_:1})])):_("",!0)]),_:1},8,["is-loading"])])}}},ls={class:"scroller-thin-y scroller-hidden max-h-96"},rs={__name:"InstituteInfo",setup(w){const y=D(),h=L(!1),d=j({info:[],incharges:[]}),f=async()=>{h.value=!0,await y.dispatch("dashboard/getInstituteInfo").then(u=>{d.info=u.info,d.incharges=u.incharges,h.value=!1}).catch(u=>{h.value=!1})};return F(async()=>{await f()}),(u,r)=>{const c=p("ListItemView"),v=p("ListContainerVertical"),l=p("TextMuted"),a=p("BaseLoader");return e(),n("div",ls,[i(a,{"is-loading":h.value},{default:o(()=>[i(v,null,{default:o(()=>[(e(!0),n(x,null,$(d.info,m=>(e(),T(c,{truncate:!1,label:m.label||" "},{default:o(()=>[g(s(m.value),1)]),_:2},1032,["label"]))),256))]),_:1}),i(v,null,{default:o(()=>[(e(!0),n(x,null,$(d.incharges,m=>(e(),T(c,{truncate:!1,label:m.title},{default:o(()=>[g(s(m.name)+" ",1),m.email?(e(),T(l,{key:0,block:""},{default:o(()=>[g(s(m.email),1)]),_:2},1024)):_("",!0),m.contactNumber?(e(),T(l,{key:1,block:""},{default:o(()=>[g(s(m.contactNumber),1)]),_:2},1024)):_("",!0)]),_:2},1032,["label"]))),256))]),_:1})]),_:1},8,["is-loading"])])}}},os={class:"text-2xl font-semibold"},ds={name:"DashboardFeed"},is=Object.assign(ds,{setup(w){A();const y=D(),h=K("moment"),d=X("profile.name"),f=P("mess.showMessScheduleInDashboard"),u=P("transport.showTransportRouteInDashboard"),r=L(!1),c=j({activeTab:"feed",feedItems:[],calendar:{days:[],lastMonthDate:"",nextMonthDate:""}}),v=async(l="")=>{r.value=!0,await y.dispatch("dashboard/getSchedule",{type:l,lastMonthDate:c.calendar.lastMonthDate,nextMonthDate:c.calendar.nextMonthDate}).then(a=>{r.value=!1,c.feedItems=a.feedItems,c.calendar=a.calendar}).catch(a=>{r.value=!1})};return F(async()=>{await v()}),(l,a)=>{const m=p("TabItem"),S=p("TabGroup"),b=p("BaseFlexCard");return e(),n(x,null,[i(b,{class:"md:w-1/3","is-loading":r.value},{title:o(()=>[g(s(l.$trans("general.greeting_message",{name:k(d)}))+" ",1),t("h3",os,s(k(h)().format("dddd Do, MMMM YYYY")),1)]),default:o(()=>[i(S,null,{default:o(()=>[i(m,{first:"",label:l.$trans("dashboard.feed"),onClick:a[0]||(a[0]=M=>c.activeTab="feed"),"is-active":c.activeTab=="feed"},null,8,["label","is-active"]),i(m,{label:l.$trans("academic.timetable.timetable"),onClick:a[1]||(a[1]=M=>c.activeTab="timetable"),"is-active":c.activeTab=="timetable"},null,8,["label","is-active"]),k(u)&&k(N)(["student","guardian"],"any")?(e(),T(m,{key:0,label:l.$trans("transport.transport"),onClick:a[2]||(a[2]=M=>c.activeTab="transport"),"is-active":c.activeTab=="transport"},null,8,["label","is-active"])):_("",!0),k(f)?(e(),T(m,{key:1,label:l.$trans("mess.mess"),onClick:a[3]||(a[3]=M=>c.activeTab="mess"),"is-active":c.activeTab=="mess"},null,8,["label","is-active"])):_("",!0),i(m,{last:"",label:l.$trans("general.institute_info"),onClick:a[4]||(a[4]=M=>c.activeTab="instituteInfo"),"is-active":c.activeTab=="instituteInfo"},null,8,["label","is-active"])]),_:1}),c.activeTab=="feed"?(e(),T(it,{key:0,"feed-items":c.feedItems},null,8,["feed-items"])):_("",!0),c.activeTab=="timetable"?(e(),T(Lt,{key:1})):_("",!0),c.activeTab=="instituteInfo"?(e(),T(rs,{key:2})):_("",!0),c.activeTab=="transport"&&k(N)(["student","guardian"],"any")?(e(),T(Jt,{key:3})):_("",!0),c.activeTab=="mess"?(e(),T(ns,{key:4})):_("",!0)]),_:1},8,["is-loading"]),i(b,{class:"md:w-2/3","is-loading":r.value},{default:o(()=>[c.calendar.days.length>0?(e(),T(tt,{key:0,calendar:c.calendar,onPreviousMonth:a[5]||(a[5]=M=>v("previous")),onNextMonth:a[6]||(a[6]=M=>v("next"))},null,8,["calendar"])):_("",!0)]),_:1},8,["is-loading"])],64)}}}),cs={class:"relative bg-black sm:rounded-lg"},us={key:0,class:"absolute right-0 top-0 mt-2 mr-2"},ms={class:"flex"},gs={class:"text-xs"},_s={class:"-mt-12 flex w-full justify-center sm:-mt-16"},hs=["src"],ps={class:"mt-4 text-center text-white"},bs={class:"px-4 py-2 space-y-2"},fs={name:"DashboardStudentList"},ys=Object.assign(fs,{setup(w){const y=A(),h=D(),{screenSize:d}=Z(),f=ee(()=>r.fees.filter(l=>{var a;return l.studentUuid===((a=r.selectedStudent)==null?void 0:a.uuid)})),u=L(!1),r=j({selectedStudent:{},students:[],fees:[]}),c=l=>{r.selectedStudent=l},v=async(l="")=>{u.value=!0,await h.dispatch("dashboard/getStudentList").then(a=>{u.value=!1,r.fees=a.fees,r.students=a.students.map((m,S)=>(m.idNumber=S+1,m)),r.selectedStudent=r.students[0]||{}}).catch(a=>{u.value=!1})};return F(async()=>{await v()}),(l,a)=>{const m=p("BaseButton"),S=p("DropdownItem"),b=p("DropdownMenu"),M=p("TextMuted"),z=p("BaseFlexCard"),G=p("BaseLabel"),I=p("ProgressBar"),E=p("BaseFlexContainer");return e(),n(x,null,[i(ce,{student:r.selectedStudent},null,8,["student"]),i(E,null,{default:o(()=>[i(z,{class:"md:w-1/3 bg-black","is-loading":u.value},{default:o(()=>[t("div",cs,[r.students.length>1?(e(),n("div",us,[i(b,{"double-top-margin":"","right-margin":!1,"no-width":""},{clickable:o(()=>[i(m,{size:"xs",design:"white"},{default:o(()=>[t("span",ms,[Y(l.$slots,"moduleOptionLabel",{},()=>[g(s(r.selectedStudent.name),1)]),i(k(te),{class:B(["ml-1 h-4 w-4"]),"aria-hidden":"true"})])]),_:3})]),default:o(()=>[(e(!0),n(x,null,$(r.students,(C,O)=>(e(),n(x,null,[C.uuid!==r.selectedStudent.uuid?(e(),T(S,{key:0,onClick:Os=>c(C)},{default:o(()=>[t("span",gs,s(C.name)+" ("+s(C.idNumber)+")",1)]),_:2},1032,["onClick"])):_("",!0)],64))),256))]),_:3})])):_("",!0),a[4]||(a[4]=t("img",{class:"h-16 w-full object-cover sm:rounded-tl-lg sm:rounded-tr-lg lg:h-24",src:"/images/user-cover.jpeg",alt:""},null,-1)),t("div",_s,[t("img",{onClick:a[0]||(a[0]=C=>k(y).push({name:"StudentShow",params:{uuid:r.selectedStudent.uuid}})),class:"h-24 w-24 rounded-full ring-4 ring-white sm:h-32 sm:w-32 cursor-pointer",src:r.selectedStudent.photo,alt:""},null,8,hs)]),t("div",ps,[t("h1",{class:"font-bold cursor-pointer",onClick:a[1]||(a[1]=C=>k(y).push({name:"StudentShow",params:{uuid:r.selectedStudent.uuid}}))},s(r.selectedStudent.name)+" ("+s(r.selectedStudent.idNumber)+") ",1),t("p",null,[g(s(r.selectedStudent.courseName)+" "+s(r.selectedStudent.batchName)+" ",1),i(M,{black:"",block:""},{default:o(()=>[g(s(r.selectedStudent.codeNumber),1)]),_:1})]),t("p",null,[a[3]||(a[3]=t("i",{class:"fas fa-mobile-alt"},null,-1)),g(" "+s(r.selectedStudent.contactNumber),1)])])])]),_:3},8,["is-loading"]),i(z,{class:"md:w-2/3","is-loading":u.value},{title:o(()=>[g(s(l.$trans("dashboard.fee_summary")),1)]),action:o(()=>[i(m,{size:"xs",design:"primary",onClick:a[2]||(a[2]=C=>k(y).push({name:"StudentShowFee",params:{uuid:r.selectedStudent.uuid}}))},{default:o(()=>[g(s(l.$trans("global.view",{attribute:l.$trans("student.fee.fee")})),1)]),_:1})]),default:o(()=>[t("div",bs,[(e(!0),n(x,null,$(f.value,C=>(e(),n("div",null,[i(G,null,{default:o(()=>{var O;return[t("span",null,[g(s(C.installmentTitle)+" ",1),i(M,{block:!!k(d).small},{default:o(()=>[g("("+s(C.feeGroupName)+") ",1)]),_:2},1032,["block"]),(O=C.dueDate)!=null&&O.value?(e(),n("span",{key:0,class:B(["text-xs italic block sm:inline",{"text-danger":C.overdueDays>0,"text-success":C.overdueDays<=0}])},[g(s(C.dueOn)+" ",1),C.overdueDays>0?(e(),n("span",{key:0,class:B({block:!!k(d).small})}," ("+s(C.overdueBy)+")",3)):_("",!0)],2)):_("",!0)]),i(M,null,{default:o(()=>[g(s(C.paid.formatted)+" / "+s(C.total.formatted),1)]),_:2},1024)]}),_:2},1024),i(I,{space:"",height:"h-2",percent:C.percent,max:C.total.value,color:C.color},null,8,["percent","max","color"])]))),256))])]),_:1},8,["is-loading"])]),_:3})],64)}}}),vs={key:0},xs={name:"DashboardFormList"},ks=Object.assign(xs,{setup(w){se();const y=A(),h=D(),d=L(!1),f=j({forms:[]}),u=async()=>{d.value=!0,await h.dispatch("dashboard/getFormList").then(r=>{f.forms=r,d.value=!1}).catch(r=>{d.value=!1})};return F(async()=>{await u()}),(r,c)=>{const v=p("TextMuted"),l=p("BaseAlert");return f.forms.length>0?(e(),n("div",vs,[(e(!0),n(x,null,$(f.forms,a=>(e(),T(l,{design:"info",size:"xs",key:a.uuid,class:"cursor-pointer",onClick:m=>k(y).push({name:"FormSubmit",params:{uuid:a.uuid}})},{default:o(()=>[g(s(a.name)+" ",1),i(v,{block:"",class:"text-white"},{default:o(()=>[g(s(a.summary),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))])):_("",!0)}}}),$s={key:0},ws={class:"mt-4 px-4"},Ss={class:"mt-4 grid grid-cols-3 gap-4"},Ts=["onClick"],Cs={class:"relative h-72 flex border border-gray-200 dark:border-gray-700 shadow-lg"},Bs={class:"relative overflow-hidden w-full h-full"},Ms=["src"],Ls={class:"absolute py-1 bottom-0 w-full bg-black opacity-70 flex items-center justify-center rounded-b-lg"},Ds={class:"px-4 text-center truncate text-gray-50"},js={class:"mt-1 block text-gray-50 text-xs"},Fs={name:"DashboardGallery"},Ns=Object.assign(Fs,{setup(w){A();const y=D(),h=L(!1),d=L(!1),f=j({images:[],galleries:[]}),u=async(c="")=>{h.value=!0,await y.dispatch("dashboard/fetchGallery").then(v=>{h.value=!1,f.galleries=v}).catch(v=>{h.value=!1})},r=c=>{f.images=c.images.map(v=>v.url),d.value=!d.value};return F(async()=>{await u()}),(c,v)=>{const l=p("ParentTransition");return f.galleries?(e(),n("div",$s,[t("div",ws,[i(l,{appear:"",visibility:!0},{default:o(()=>[t("div",Ss,[(e(!0),n(x,null,$(f.galleries,a=>(e(),n("div",{class:"col-span-3 sm:col-span-1 cursor-pointer",onClick:m=>r(a)},[t("div",Cs,[t("div",Bs,[t("img",{src:a.thumbnailUrl,class:"w-full h-full object-cover rounded-lg"},null,8,Ms),t("div",Ls,[t("div",Ds,[g(s(a.title)+" ",1),t("span",js,s(a.date.formatted),1)])])])])],8,Ts))),256))])]),_:1})]),i(k(ue),{toggler:d.value,sources:f.images},null,8,["toggler","sources"])])):_("",!0)}}}),As={key:1,class:"mt-4 px-4"},zs={key:2,class:"mt-4 px-4"},Gs={__name:"Index",setup(w){return(y,h)=>{const d=p("BaseFlexContainer");return e(),n("div",null,[k(R)("dashboard:stat")?(e(),T(Te,{key:0})):_("",!0),k(R)("form:submit")?(e(),n("div",As,[i(ks)])):_("",!0),k(N)(["student","guardian"],"any")?(e(),n("div",zs,[i(ys)])):_("",!0),i(d,{class:"mt-4 px-4"},{default:o(()=>[i(is)]),_:1}),k(N)(["student","guardian"],"any")?(e(),T(Ns,{key:3})):_("",!0)])}}};export{Gs as default};
