import{f as A,m as F,n as H,r as n,o as d,q as y,w as e,d as $,e as t,b as I,y as D,l as R,u as c,s as _,t as p,a as B,v as N,F as P,h as M,j as U}from"./app-DCfJDSeM.js";const O={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",emits:["hide"],setup(E,{emit:b}){const f=A(),C=b,g={codeNumber:"",types:[],startDate:"",endDate:""},i=F({...g}),m=F({types:[],isLoaded:!f.query.types});return H(async()=>{m.types=f.query.types?f.query.types.split(","):[],m.isLoaded=!0}),(u,a)=>{const l=n("BaseInput"),o=n("BaseSelectSearch"),w=n("DatePicker"),h=n("FilterForm");return d(),y(h,{"init-form":g,form:i,multiple:["types","batches"],onHide:a[4]||(a[4]=r=>C("hide"))},{default:e(()=>[$("div",O,[$("div",z,[t(l,{type:"text",modelValue:i.codeNumber,"onUpdate:modelValue":a[0]||(a[0]=r=>i.codeNumber=r),name:"codeNumber",label:u.$trans("communication.email.props.code_number")},null,8,["modelValue","label"])]),$("div",G,[m.isLoaded?(d(),y(o,{key:0,multiple:"",name:"types",label:u.$trans("global.select",{attribute:u.$trans("communication.email.type.type")}),modelValue:i.types,"onUpdate:modelValue":a[1]||(a[1]=r=>i.types=r),"value-prop":"uuid","init-search":m.types,"search-action":"option/list","additional-search-query":{type:"email_type"}},null,8,["label","modelValue","init-search"])):I("",!0)]),$("div",J,[t(w,{start:i.startDate,"onUpdate:start":a[2]||(a[2]=r=>i.startDate=r),end:i.endDate,"onUpdate:end":a[3]||(a[3]=r=>i.endDate=r),name:"dateBetween",as:"range",label:u.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Q={name:"CommunicationEmailList"},X=Object.assign(Q,{setup(E){const b=M(),f=U("emitter");let C=["filter"];D("email:send")&&C.unshift("new");let g=[];D("email:read")&&(g=["print","pdf","excel"]);const i="communication/email/",m=R(!1),u=F({}),a=l=>{Object.assign(u,l)};return(l,o)=>{const w=n("PageHeaderAction"),h=n("PageHeader"),r=n("ParentTransition"),v=n("DataCell"),V=n("FloatingMenuItem"),L=n("FloatingMenu"),S=n("DataRow"),T=n("BaseButton"),j=n("DataTable"),q=n("ListItem");return d(),y(q,{"init-url":i,"additional-query":{},onSetItems:a},{header:e(()=>[t(h,{title:l.$trans("communication.email.email"),navs:[{label:l.$trans("communication.communication"),path:"Communication"}]},{default:e(()=>[t(w,{url:"communication/emails/",name:"CommunicationEmail",title:l.$trans("communication.email.email"),actions:c(C),"dropdown-actions":c(g),"config-path":"CommunicationConfig",onToggleFilter:o[0]||(o[0]=s=>m.value=!m.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(r,{appear:"",visibility:m.value},{default:e(()=>[t(K,{onRefresh:o[1]||(o[1]=s=>c(f).emit("listItems")),onHide:o[2]||(o[2]=s=>m.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(r,{appear:"",visibility:!0},{default:e(()=>[t(j,{header:u.headers,meta:u.meta,module:"communication.email",onRefresh:o[4]||(o[4]=s=>c(f).emit("listItems"))},{actionButton:e(()=>[c(D)("email:send")?(d(),y(T,{key:0,onClick:o[3]||(o[3]=s=>c(b).push({name:"CommunicationEmailNew"}))},{default:e(()=>[_(p(l.$trans("global.new",{attribute:l.$trans("communication.email.email")})),1)]),_:1})):I("",!0)]),default:e(()=>[(d(!0),B(P,null,N(u.data,s=>(d(),y(S,{key:s.uuid},{default:e(()=>[t(v,{name:"subject"},{default:e(()=>[_(p(s.subjectExcerpt),1)]),_:2},1024),t(v,{name:"audience"},{default:e(()=>[(d(!0),B(P,null,N(s.audienceTypes,k=>(d(),B("div",null,p(k),1))),256))]),_:2},1024),t(v,{name:"recipientCount"},{default:e(()=>[_(p(s.recipientCount),1)]),_:2},1024),t(v,{name:"createdAt"},{default:e(()=>[_(p(s.createdAt.formatted),1)]),_:2},1024),t(v,{name:"action"},{default:e(()=>[t(L,null,{default:e(()=>[t(V,{icon:"fas fa-arrow-circle-right",onClick:k=>c(b).push({name:"CommunicationEmailShow",params:{uuid:s.uuid}})},{default:e(()=>[_(p(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),c(D)("email:send")?(d(),y(V,{key:0,icon:"fas fa-copy",onClick:k=>c(b).push({name:"CommunicationEmailDuplicate",params:{uuid:s.uuid}})},{default:e(()=>[_(p(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):I("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{X as default};
