import{f as A,m as D,n as H,r,o as b,q as g,w as e,d as w,s,t as a,b as C,e as n,l as P,u as _,a as j,v as E,F as O,h as U,j as q}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",emits:["hide"],setup(L,{emit:v}){const f=A(),h=v,k={students:[],startDate:"",endDate:""},l=D({...k});D({});const m=D({students:[],isLoaded:!f.query.students});return H(async()=>{m.students=f.query.students?f.query.students.split(","):[],m.isLoaded=!0}),(c,i)=>{const d=r("BaseSelectSearch"),u=r("DatePicker"),y=r("FilterForm");return b(),g(y,{"init-form":k,form:l,multiple:["students"],onHide:i[3]||(i[3]=o=>h("hide"))},{default:e(()=>[w("div",z,[w("div",G,[m.isLoaded?(b(),g(d,{key:0,multiple:"",name:"students",label:c.$trans("global.select",{attribute:c.$trans("student.student")}),modelValue:l.students,"onUpdate:modelValue":i[0]||(i[0]=o=>l.students=o),"value-prop":"uuid","init-search":m.students,"search-key":"name","search-action":"student/summary"},{selectedOption:e(o=>[s(a(o.value.name)+" ("+a(o.value.codeNumber)+") ",1)]),listOption:e(o=>[s(a(o.option.name)+" ("+a(o.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):C("",!0)]),w("div",J,[n(u,{start:l.startDate,"onUpdate:start":i[1]||(i[1]=o=>l.startDate=o),end:l.endDate,"onUpdate:end":i[2]||(i[2]=o=>l.endDate=o),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Q={name:"StudentLeaveRequestList"},X=Object.assign(Q,{setup(L){const v=U(),f=q("emitter");let h=["create","filter"],k=["print","pdf","excel"];const l="student/leaveRequest/",m=P(!1),c=D({}),i=d=>{Object.assign(c,d)};return(d,u)=>{const y=r("PageHeaderAction"),o=r("PageHeader"),S=r("ParentTransition"),$=r("TextMuted"),p=r("DataCell"),F=r("FloatingMenuItem"),N=r("FloatingMenu"),I=r("DataRow"),T=r("BaseButton"),M=r("DataTable"),V=r("ListItem");return b(),g(V,{"init-url":l,onSetItems:i},{header:e(()=>[n(o,{title:d.$trans("student.leave_request.leave_request"),navs:[{label:d.$trans("student.student"),path:"Student"}]},{default:e(()=>[n(y,{url:"student/leave-requests/",name:"StudentLeaveRequest",title:d.$trans("student.leave_request.leave_request"),actions:_(h),"dropdown-actions":_(k),onToggleFilter:u[0]||(u[0]=t=>m.value=!m.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(S,{appear:"",visibility:m.value},{default:e(()=>[n(K,{onRefresh:u[1]||(u[1]=t=>_(f).emit("listItems")),onHide:u[2]||(u[2]=t=>m.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(S,{appear:"",visibility:!0},{default:e(()=>[n(M,{header:c.headers,meta:c.meta,module:"student.leave_request",onRefresh:u[4]||(u[4]=t=>_(f).emit("listItems"))},{actionButton:e(()=>[n(T,{onClick:u[3]||(u[3]=t=>_(v).push({name:"StudentLeaveRequestCreate"}))},{default:e(()=>[s(a(d.$trans("global.add",{attribute:d.$trans("student.leave_request.leave_request")})),1)]),_:1})]),default:e(()=>[(b(!0),j(O,null,E(c.data,t=>(b(),g(I,{key:t.uuid},{default:e(()=>[n(p,{name:"name"},{default:e(()=>[s(a(t.student.name)+" ",1),n($,{block:""},{default:e(()=>[s(a(t.student.contactNumber),1)]),_:2},1024)]),_:2},1024),n(p,{name:"parent"},{default:e(()=>[s(a(t.student.fatherName)+" ",1),n($,{block:""},{default:e(()=>[s(a(t.student.motherName),1)]),_:2},1024)]),_:2},1024),n(p,{name:"admissionDate"},{default:e(()=>[s(a(t.student.joiningDate.formatted)+" ",1),n($,{block:""},{default:e(()=>[s(a(t.student.codeNumber),1)]),_:2},1024)]),_:2},1024),n(p,{name:"course"},{default:e(()=>[s(a(t.student.courseName)+" ",1),n($,{block:""},{default:e(()=>[s(a(t.student.batchName),1)]),_:2},1024)]),_:2},1024),n(p,{name:"period"},{default:e(()=>[s(a(t.period),1)]),_:2},1024),n(p,{name:"category"},{default:e(()=>[s(a(t.category.name),1)]),_:2},1024),n(p,{name:"createdAt"},{default:e(()=>[s(a(t.createdAt.formatted),1)]),_:2},1024),n(p,{name:"action"},{default:e(()=>[n(N,null,{default:e(()=>[n(F,{icon:"fas fa-arrow-circle-right",onClick:B=>_(v).push({name:"StudentLeaveRequestShow",params:{uuid:t.uuid}})},{default:e(()=>[s(a(d.$trans("general.show")),1)]),_:2},1032,["onClick"]),t.isEditable?(b(),g(F,{key:0,icon:"fas fa-edit",onClick:B=>_(v).push({name:"StudentLeaveRequestEdit",params:{uuid:t.uuid}})},{default:e(()=>[s(a(d.$trans("general.edit")),1)]),_:2},1032,["onClick"])):C("",!0),t.isEditable?(b(),g(F,{key:1,icon:"fas fa-trash",onClick:B=>_(f).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[s(a(d.$trans("general.delete")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{X as default};
