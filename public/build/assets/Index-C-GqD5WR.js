import{m as V,r as d,o as r,q as v,w as e,d as w,e as a,G as O,l as j,n as z,s as n,t as s,a as B,u as l,b as h,f as G,i as x,y as k,F as L,A as J,v as P,h as K,j as Q,z as W}from"./app-DCfJDSeM.js";import{d as X}from"./vuedraggable.umd-DO5pvILy.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ae={__name:"Filter",emits:["hide"],setup(M,{emit:_}){const g=_,$={name:"",code:"",shortcode:""},p=V({...$});return(A,o)=>{const c=d("BaseInput"),y=d("FilterForm");return r(),v(y,{"init-form":$,form:p,onHide:o[3]||(o[3]=f=>g("hide"))},{default:e(()=>[w("div",Y,[w("div",Z,[a(c,{type:"text",modelValue:p.name,"onUpdate:modelValue":o[0]||(o[0]=f=>p.name=f),name:"name",label:A.$trans("academic.division.props.name")},null,8,["modelValue","label"])]),w("div",ee,[a(c,{type:"text",modelValue:p.code,"onUpdate:modelValue":o[1]||(o[1]=f=>p.code=f),name:"code",label:A.$trans("academic.division.props.code")},null,8,["modelValue","label"])]),w("div",te,[a(c,{type:"text",modelValue:p.shortcode,"onUpdate:modelValue":o[2]||(o[2]=f=>p.shortcode=f),name:"shortcode",label:A.$trans("academic.division.props.shortcode")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},ie={key:0},oe={class:"flex border rounded-xl px-4 py-2"},ne={key:1},se={key:2,class:"mt-4 flex justify-end"},le={name:"AcademicDivisionReorder"},re=Object.assign(le,{props:{visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(M,{emit:_}){G();const g=x(),$=_,p={divisions:[]};O("academic/division/");const o=j(!1),c=V({divisions:[]});V({...p});const y=async()=>{o.value=!0,await g.dispatch("academic/division/list",{params:{all:!0}}).then(t=>{o.value=!1,c.divisions=t}).catch(t=>{o.value=!1})},f=async()=>{o.value=!0,await g.dispatch("academic/division/reorder",{data:{divisions:c.divisions}}).then(t=>{o.value=!1,$("refresh"),$("close")}).catch(t=>{o.value=!1})},u=()=>{$("close")};return z(()=>{y()}),(t,C)=>{const R=d("BaseLabel"),T=d("BaseAlert"),I=d("BaseButton"),D=d("BaseModal");return r(),v(D,{show:M.visibility,onClose:u},{title:e(()=>[n(s(t.$trans("global.reorder",{attribute:t.$trans("academic.division.division")})),1)]),default:e(()=>[c.divisions.length?(r(),B("div",ie,[a(l(X),{class:"space-y-2",list:c.divisions,"item-key":"uuid"},{item:e(({element:b,index:F})=>[w("div",oe,[C[0]||(C[0]=w("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),a(R,null,{default:e(()=>[n(s(b.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(r(),B("div",ne,[a(T,{design:"info",size:"xs"},{default:e(()=>[n(s(t.$trans("general.errors.record_not_found")),1)]),_:1})])),c.divisions.length?(r(),B("div",se,[a(I,{onClick:f},{default:e(()=>[n(s(t.$trans("general.reorder")),1)]),_:1})])):h("",!0)]),_:1},8,["show"])}}}),de={name:"AcademicDivisionList"},me=Object.assign(de,{setup(M){const _=K(),g=Q("emitter");let $=["filter"];k("division:create")&&$.unshift("create");let p=[];k("division:export")&&(p=["print","pdf","excel"]);const A="academic/division/",o=j(!1),c=j(!1),y=V({}),f=u=>{Object.assign(y,u)};return(u,t)=>{const C=d("BaseButton"),R=d("PageHeaderAction"),T=d("PageHeader"),I=d("ParentTransition"),D=d("TextMuted"),b=d("DataCell"),F=d("FloatingMenuItem"),U=d("FloatingMenu"),N=d("DataRow"),S=d("DataTable"),q=d("ListItem"),E=W("tooltip");return r(),B(L,null,[a(q,{"init-url":A,"additional-query":{details:!0},onSetItems:f},{header:e(()=>[a(T,{title:u.$trans("academic.division.division"),navs:[{label:u.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[a(R,{url:"academic/divisions/",name:"AcademicDivision",title:u.$trans("academic.division.division"),actions:l($),"dropdown-actions":l(p),"additional-dropdown-actions-query":{details:!0},onToggleFilter:t[2]||(t[2]=i=>o.value=!o.value)},{default:e(()=>[J((r(),v(C,{design:"white",onClick:t[0]||(t[0]=i=>c.value=!c.value)},{default:e(()=>t[9]||(t[9]=[w("i",{class:"fas fa-arrows-up-down-left-right"},null,-1)])),_:1})),[[E,u.$trans("global.reorder",{attribute:u.$trans("academic.division.division")})]]),l(k)("division-incharge:read")?(r(),v(C,{key:0,design:"white",onClick:t[1]||(t[1]=i=>l(_).push({name:"AcademicDivisionIncharge"}))},{default:e(()=>[n(s(u.$trans("employee.incharge.incharge")),1)]),_:1})):h("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[a(I,{appear:"",visibility:o.value},{default:e(()=>[a(ae,{onRefresh:t[3]||(t[3]=i=>l(g).emit("listItems")),onHide:t[4]||(t[4]=i=>o.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(I,{appear:"",visibility:!0},{default:e(()=>[a(S,{header:y.headers,meta:y.meta,module:"academic.division",onRefresh:t[6]||(t[6]=i=>l(g).emit("listItems"))},{actionButton:e(()=>[l(k)("division:create")?(r(),v(C,{key:0,onClick:t[5]||(t[5]=i=>l(_).push({name:"AcademicDivisionCreate"}))},{default:e(()=>[n(s(u.$trans("global.add",{attribute:u.$trans("academic.division.division")})),1)]),_:1})):h("",!0)]),default:e(()=>[(r(!0),B(L,null,P(y.data,i=>(r(),v(N,{key:i.uuid},{default:e(()=>[a(b,{name:"name"},{default:e(()=>[n(s(i.name)+" ",1),i.pgAccount?(r(),v(D,{key:0,block:""},{default:e(()=>[n(s(i.pgAccount),1)]),_:2},1024)):h("",!0)]),_:2},1024),a(b,{name:"code"},{default:e(()=>[n(s(i.code)+" ",1),a(D,{block:""},{default:e(()=>[n(s(i.shortcode),1)]),_:2},1024)]),_:2},1024),a(b,{name:"program"},{default:e(()=>{var m;return[n(s(((m=i.program)==null?void 0:m.name)||"-"),1)]}),_:2},1024),a(b,{name:"incharge"},{default:e(()=>[(r(!0),B(L,null,P(i.incharges,m=>{var H;return r(),B("div",null,[n(s(((H=m==null?void 0:m.employee)==null?void 0:H.name)||"-")+" ",1),a(D,null,{default:e(()=>[n(s(m==null?void 0:m.period),1)]),_:2},1024)])}),256))]),_:2},1024),a(b,{name:"createdAt"},{default:e(()=>[n(s(i.createdAt.formatted),1)]),_:2},1024),a(b,{name:"action"},{default:e(()=>[a(U,null,{default:e(()=>[a(F,{icon:"fas fa-arrow-circle-right",onClick:m=>l(_).push({name:"AcademicDivisionShow",params:{uuid:i.uuid}})},{default:e(()=>[n(s(u.$trans("general.show")),1)]),_:2},1032,["onClick"]),l(k)("division:edit")?(r(),v(F,{key:0,icon:"fas fa-edit",onClick:m=>l(_).push({name:"AcademicDivisionEdit",params:{uuid:i.uuid}})},{default:e(()=>[n(s(u.$trans("general.edit")),1)]),_:2},1032,["onClick"])):h("",!0),l(k)("division:create")?(r(),v(F,{key:1,icon:"fas fa-copy",onClick:m=>l(_).push({name:"AcademicDivisionDuplicate",params:{uuid:i.uuid}})},{default:e(()=>[n(s(u.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):h("",!0),l(k)("division:delete")?(r(),v(F,{key:2,icon:"fas fa-trash",onClick:m=>l(g).emit("deleteItem",{uuid:i.uuid})},{default:e(()=>[n(s(u.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1}),a(re,{visibility:c.value,onClose:t[7]||(t[7]=i=>c.value=!1),onRefresh:t[8]||(t[8]=i=>l(g).emit("listItems"))},null,8,["visibility"])],64)}}});export{me as default};
