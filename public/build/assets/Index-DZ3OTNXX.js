import{y as w,l as F,c as j,m as x,n as W,a as y,e as o,w as e,u as c,F as g,f as z,r as s,o as a,q as l,s as u,t as i,b as v,v as B,d as L,x as U,h as G,i as I,a4 as J}from"./app-DCfJDSeM.js";import{_ as K}from"./Filter-DrTBU8va.js";import{_ as Q}from"./ModuleDropdown-YFxdZ7an.js";const X={name:"EmployeeAttendanceList"},te=Object.assign(X,{setup(Y){const m=z(),T=G(),P=I();let D=[];w("attendance:config")&&D.unshift("config");let $=[];w("attendance:export")&&($=["print","pdf","excel"]);const A="employee/attendance/",p=F(!1),V=j(()=>J(m.query.dayWise)),_=x({headers:[],data:[],meta:{total:0}}),h=async()=>{p.value=!0,await P.dispatch(A+"listAttendance",{params:m.query}).then(t=>{p.value=!1,Object.assign(_,t)}).catch(t=>{p.value=!1})};return W(async()=>{m.query.date&&await h()}),(t,C)=>{const N=s("BaseButton"),O=s("PageHeaderAction"),R=s("PageHeader"),E=s("ParentTransition"),S=s("BaseDataView"),k=s("DataCell"),b=s("TextMuted"),q=s("DataRow"),H=s("DataTable"),M=s("BaseCard");return a(),y(g,null,[o(R,{title:t.$trans(c(m).meta.label),navs:[{label:t.$trans("employee.employee"),path:"Employee"}]},{default:e(()=>[o(O,{url:"employee/attendance/",name:"EmployeeAttendance",title:t.$trans("employee.attendance.attendance"),actions:c(D),"dropdown-actions":c($)},{moduleOption:e(()=>[o(Q)]),default:e(()=>[c(w)("attendance:mark")?(a(),l(N,{key:0,design:"white",onClick:C[0]||(C[0]=n=>c(T).push({name:"EmployeeAttendanceMark"}))},{default:e(()=>[u(i(t.$trans("employee.attendance.mark")),1)]),_:1})):v("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"]),o(E,{appear:"",visibility:!0},{default:e(()=>[o(K,{onAfterFilter:h,"init-url":A,"date-as":"month","day-wise-filter":""})]),_:1}),o(E,{appear:"",visibility:!0},{default:e(()=>[o(M,{"no-padding":"","no-content-padding":"","is-loading":p.value},{default:e(()=>[o(H,{header:_.headers,meta:_.meta,module:"employee.attendance",onRefresh:h},{default:e(()=>[(a(!0),y(g,null,B(_.data,n=>(a(),l(q,{key:n.uuid},{default:e(()=>[o(k,{name:"employee"},{default:e(()=>[o(S,{label:n.name+" ("+n.codeNumber+")",revert:""},{default:e(()=>[u(i(n.designation),1)]),_:2},1032,["label"])]),_:2},1024),V.value?(a(!0),y(g,{key:0},B(n.attendances,(f,d)=>(a(),l(k,{name:`day${d}`},{default:e(()=>[L("span",{class:U(["font-semibold","text-xs","text-"+f.color])},i(f.code),3)]),_:2},1032,["name"]))),256)):(a(!0),y(g,{key:1},B(n.summary,(f,d)=>(a(),l(k,{align:"center",name:`type_${d}`},{default:e(()=>[L("span",null,i(f),1),d=="Late"?(a(),l(b,{key:0,class:"ml-1"},{default:e(()=>{var r;return[u(" ("+i(((r=n.additionalSummary)==null?void 0:r.totalLateDuration)+t.$trans("list.durations.m_short"))+") ",1)]}),_:2},1024)):v("",!0),d=="EarlyLeaving"?(a(),l(b,{key:1,class:"ml-1"},{default:e(()=>{var r;return[u(" ("+i(((r=n.additionalSummary)==null?void 0:r.totalEarlyLeavingDuration)+t.$trans("list.durations.m_short"))+") ",1)]}),_:2},1024)):v("",!0),d=="Overtime"?(a(),l(b,{key:2,class:"ml-1"},{default:e(()=>{var r;return[u(" ("+i(((r=n.additionalSummary)==null?void 0:r.totalOvertimeDuration)+t.$trans("list.durations.m_short"))+") ",1)]}),_:2},1024)):v("",!0)]),_:2},1032,["name"]))),256))]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1},8,["is-loading"])]),_:1})],64)}}});export{te as default};
