import{f as B,h as I,i as L,G as N,l as T,m as f,r as l,o as v,q as V,w as d,d as m,u as r,s as _,t as n,b as S,e as c,I as w,a as C,F as H}from"./app-DCfJDSeM.js";const P={class:"grid grid-cols-3 gap-6"},E={class:"col-span-3 sm:col-span-1"},R={class:"col-span-3 sm:col-span-1"},q={class:"col-span-2 sm:col-span-1"},G={class:"col-span-2 sm:col-span-1"},W={class:"col-span-2 sm:col-span-1"},z={class:"col-span-3"},J={name:"AcademicSubjectInchargeForm"},K=Object.assign(J,{setup($){const g=B();I();const i=L(),b={batch:"",subject:"",employee:"",startDate:"",endDate:"",remarks:""},y="academic/subjectIncharge/",o=N(y),h=T(!1),u=f({selectedBatch:null,subjects:[]}),s=f({...b}),p=f({batch:"",subject:"",employee:"",isLoaded:!g.params.uuid}),D=async a=>{if(!(a!=null&&a.uuid)){s.batch="",s.subject="",u.subjects=[];return}s.batch=(a==null?void 0:a.uuid)||"",u.subjects=[],s.subject="",h.value=!0,await i.dispatch("academic/batch/listSubjects",{uuid:(a==null?void 0:a.uuid)||""}).then(t=>{u.subjects=t,h.value=!1}).catch(t=>{h.value=!1})},U=async a=>{var t,j;await D(a.batch),Object.assign(b,{...a,startDate:a.startDate.value,endDate:a.endDate.value,batch:((t=a.batch)==null?void 0:t.uuid)||"",subject:((j=a.subject)==null?void 0:j.uuid)||"",employee:a.employee.uuid}),Object.assign(s,w(b)),p.employee=a.employee.uuid,u.selectedBatch=a.batch,p.isLoaded=!0};return(a,t)=>{const j=l("BaseSelectSearch"),A=l("BaseSelect"),k=l("DatePicker"),F=l("BaseTextarea"),O=l("FormAction");return v(),V(O,{"init-url":y,"init-form":b,form:s,setForm:U,redirect:"AcademicSubjectIncharge"},{default:d(()=>[m("div",P,[m("div",E,[p.isLoaded?(v(),V(j,{key:0,name:"batch",label:a.$trans("academic.batch.batch"),modelValue:u.selectedBatch,"onUpdate:modelValue":t[0]||(t[0]=e=>u.selectedBatch=e),error:r(o).batch,"onUpdate:error":t[1]||(t[1]=e=>r(o).batch=e),"value-prop":"uuid","object-prop":!0,"init-search":p.batch,"search-key":"course_batch","search-action":"academic/batch/list",onChange:D},{selectedOption:d(e=>[_(n(e.value.course.name)+" - "+n(e.value.name),1)]),listOption:d(e=>[_(n(e.option.course.nameWithTerm)+" - "+n(e.option.name),1)]),_:1},8,["label","modelValue","error","init-search"])):S("",!0)]),m("div",R,[c(A,{modelValue:s.subject,"onUpdate:modelValue":t[2]||(t[2]=e=>s.subject=e),name:"subject",label:a.$trans("academic.subject.subject"),"label-prop":"name","value-prop":"uuid",options:u.subjects,error:r(o).subject,"onUpdate:error":t[3]||(t[3]=e=>r(o).subject=e)},null,8,["modelValue","label","options","error"])]),m("div",q,[p.isLoaded?(v(),V(j,{key:0,name:"employee",label:a.$trans("global.select",{attribute:a.$trans("employee.employee")}),modelValue:s.employee,"onUpdate:modelValue":t[4]||(t[4]=e=>s.employee=e),error:r(o).employee,"onUpdate:error":t[5]||(t[5]=e=>r(o).employee=e),"value-prop":"uuid","init-search":p.employee,"search-key":"name","search-action":"employee/list"},{selectedOption:d(e=>[_(n(e.value.name)+" ("+n(e.value.codeNumber)+") ",1)]),listOption:d(e=>[_(n(e.option.name)+" ("+n(e.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","error","init-search"])):S("",!0)]),m("div",G,[c(k,{modelValue:s.startDate,"onUpdate:modelValue":t[6]||(t[6]=e=>s.startDate=e),name:"startDate",label:a.$trans("employee.incharge.props.start_date"),"no-clear":"",error:r(o).startDate,"onUpdate:error":t[7]||(t[7]=e=>r(o).startDate=e)},null,8,["modelValue","label","error"])]),m("div",W,[c(k,{modelValue:s.endDate,"onUpdate:modelValue":t[8]||(t[8]=e=>s.endDate=e),name:"endDate",label:a.$trans("employee.incharge.props.end_date"),"no-clear":"",error:r(o).endDate,"onUpdate:error":t[9]||(t[9]=e=>r(o).endDate=e)},null,8,["modelValue","label","error"])]),m("div",z,[c(F,{modelValue:s.remarks,"onUpdate:modelValue":t[10]||(t[10]=e=>s.remarks=e),name:"remarks",label:a.$trans("employee.incharge.props.remarks"),error:r(o).remarks,"onUpdate:error":t[11]||(t[11]=e=>r(o).remarks=e)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}}),M={name:"AcademicSubjectInchargeAction"},X=Object.assign(M,{setup($){const g=B();return(i,b)=>{const y=l("PageHeaderAction"),o=l("PageHeader"),h=l("ParentTransition");return v(),C(H,null,[c(o,{title:i.$trans(r(g).meta.trans,{attribute:i.$trans(r(g).meta.label)}),navs:[{label:i.$trans("academic.academic"),path:"Academic"},{label:i.$trans("academic.subject_incharge.subject_incharge"),path:"AcademicSubjectInchargeList"}]},{default:d(()=>[c(y,{name:"AcademicSubjectIncharge",title:i.$trans("academic.subject_incharge.subject_incharge"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),c(h,{appear:"",visibility:!0},{default:d(()=>[c(K)]),_:1})],64)}}});export{X as default};
