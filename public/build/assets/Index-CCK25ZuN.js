import{f as R,m as h,n as S,r,o as s,q as i,w as e,d as B,e as m,y as d,l as j,u as a,s as l,t as o,b as c,a as N,v as O,F as U,h as q,j as x}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={__name:"Filter",emits:["hide"],setup(I,{emit:p}){R();const $=p,v={name:""},_=h({...v}),y=h({isLoaded:!0});return S(async()=>{y.isLoaded=!0}),(g,f)=>{const C=r("BaseInput"),n=r("FilterForm");return s(),i(n,{"init-form":v,form:_,multiple:[],onHide:f[1]||(f[1]=u=>$("hide"))},{default:e(()=>[B("div",z,[B("div",G,[m(C,{type:"text",modelValue:_.name,"onUpdate:modelValue":f[0]||(f[0]=u=>_.name=u),name:"name",label:g.$trans("form.props.name")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},K={class:"text-danger"},Q={name:"FormList"},X=Object.assign(Q,{setup(I){const p=q(),$=x("emitter");let v=["filter"];d("form:create")&&v.unshift("create");let _=[];d("form:export")&&(_=["print","pdf","excel"]);const y="form/",g=j(!1),f=h({}),C=n=>{Object.assign(f,n)};return(n,u)=>{const T=r("PageHeaderAction"),M=r("PageHeader"),w=r("ParentTransition"),D=r("TextMuted"),b=r("DataCell"),V=r("BaseBadge"),k=r("FloatingMenuItem"),A=r("FloatingMenu"),E=r("DataRow"),H=r("BaseButton"),L=r("DataTable"),P=r("ListItem");return s(),i(P,{"init-url":y,onSetItems:C},{header:e(()=>[m(M,{title:n.$trans("form.form"),navs:[]},{default:e(()=>[m(T,{url:"forms/",name:"Form",title:n.$trans("form.form"),actions:a(v),"dropdown-actions":a(_),onToggleFilter:u[0]||(u[0]=t=>g.value=!g.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title"])]),filter:e(()=>[m(w,{appear:"",visibility:g.value},{default:e(()=>[m(J,{onRefresh:u[1]||(u[1]=t=>a($).emit("listItems")),onHide:u[2]||(u[2]=t=>g.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[m(w,{appear:"",visibility:!0},{default:e(()=>[m(L,{header:f.headers,meta:f.meta,module:"form",onRefresh:u[4]||(u[4]=t=>a($).emit("listItems"))},{actionButton:e(()=>[a(d)("form:create")?(s(),i(H,{key:0,onClick:u[3]||(u[3]=t=>a(p).push({name:"FormCreate"}))},{default:e(()=>[l(o(n.$trans("global.add",{attribute:n.$trans("form.form")})),1)]),_:1})):c("",!0)]),default:e(()=>[(s(!0),N(U,null,O(f.data,t=>(s(),i(E,{key:t.uuid},{default:e(()=>[m(b,{name:"name"},{default:e(()=>[l(o(t.name)+" ",1),m(D,{block:""},{default:e(()=>[l(o(t.excerpt),1)]),_:2},1024)]),_:2},1024),m(b,{name:"dueDate"},{default:e(()=>[l(o(t.dueDate.formatted)+" ",1),t.isExpired?(s(),i(D,{key:0,block:""},{default:e(()=>[B("span",K,o(n.$trans("form.statuses.expired")),1)]),_:1})):c("",!0)]),_:2},1024),a(d)("form-submission:manage")?(s(),i(b,{key:0,name:"status"},{default:e(()=>[m(V,{design:t.status.color},{default:e(()=>[l(o(t.status.label),1)]),_:2},1032,["design"])]),_:2},1024)):c("",!0),a(d)("form-submission:manage")?(s(),i(b,{key:1,name:"submission"},{default:e(()=>[l(o(t.submissionsCount),1)]),_:2},1024)):c("",!0),a(d)("form-submission:manage")?(s(),i(b,{key:2,name:"createdAt"},{default:e(()=>[l(o(t.createdAt.formatted),1)]),_:2},1024)):c("",!0),m(b,{name:"action"},{default:e(()=>[m(A,null,{default:e(()=>[t.isExpired?c("",!0):(s(),i(k,{key:0,icon:"fas fa-arrow-circle-right",onClick:F=>a(p).push({name:"FormSubmit",params:{uuid:t.uuid}})},{default:e(()=>[l(o(n.$trans("global.submit",{attribute:n.$trans("form.form")})),1)]),_:2},1032,["onClick"])),a(d)("form-submission:manage")?(s(),i(k,{key:1,icon:"far fa-file-lines",onClick:F=>a(p).push({name:"FormSubmission",params:{uuid:t.uuid}})},{default:e(()=>[l(o(n.$trans("global.view",{attribute:n.$trans("form.submission.submission")})),1)]),_:2},1032,["onClick"])):c("",!0),a(d)("form-submission:manage")?(s(),i(k,{key:2,icon:"fas fa-arrow-circle-right",onClick:F=>a(p).push({name:"FormShow",params:{uuid:t.uuid}})},{default:e(()=>[l(o(n.$trans("general.show")),1)]),_:2},1032,["onClick"])):c("",!0),a(d)("form:edit")&&t.isEditable?(s(),i(k,{key:3,icon:"fas fa-edit",onClick:F=>a(p).push({name:"FormEdit",params:{uuid:t.uuid}})},{default:e(()=>[l(o(n.$trans("general.edit")),1)]),_:2},1032,["onClick"])):c("",!0),a(d)("form:create")?(s(),i(k,{key:4,icon:"fas fa-copy",onClick:F=>a(p).push({name:"FormDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[l(o(n.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):c("",!0),a(d)("form:delete")&&t.isEditable?(s(),i(k,{key:5,icon:"fas fa-trash",onClick:F=>a($).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[l(o(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])):c("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{X as default};
