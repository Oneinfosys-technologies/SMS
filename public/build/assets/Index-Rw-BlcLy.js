import{f as R,m as L,n as j,r as n,o as p,q as g,w as e,d as h,e as t,b,y as v,l as q,u as s,s as c,t as m,a as N,v as U,F as E,h as O,j as z}from"./app-DCfJDSeM.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},W={__name:"Filter",emits:["hide"],setup(w,{emit:y}){const _=R(),T=y,$={name:"",alias:"",ledgerTypes:[]},i=L({...$}),d=L({ledgerTypes:[],isLoaded:!_.query.ledgerTypes});return j(async()=>{d.ledgerTypes=_.query.ledgerTypes?_.query.ledgerTypes.split(","):[],d.isLoaded=!0}),(u,r)=>{const l=n("BaseInput"),o=n("BaseSelectSearch"),B=n("FilterForm");return p(),g(B,{"init-form":$,form:i,multiple:["ledgerTypes"],onHide:r[3]||(r[3]=f=>T("hide"))},{default:e(()=>[h("div",G,[h("div",J,[t(l,{type:"text",modelValue:i.name,"onUpdate:modelValue":r[0]||(r[0]=f=>i.name=f),name:"name",label:u.$trans("finance.ledger.props.name")},null,8,["modelValue","label"])]),h("div",K,[t(l,{type:"text",modelValue:i.alias,"onUpdate:modelValue":r[1]||(r[1]=f=>i.alias=f),name:"alias",label:u.$trans("finance.ledger.props.alias")},null,8,["modelValue","label"])]),h("div",Q,[d.isLoaded?(p(),g(o,{key:0,multiple:"",name:"ledgerTypes",label:u.$trans("global.select",{attribute:u.$trans("finance.ledger_type.ledger_type")}),modelValue:i.ledgerTypes,"onUpdate:modelValue":r[2]||(r[2]=f=>i.ledgerTypes=f),"value-prop":"uuid","init-search":d.ledgerTypes,"search-action":"finance/ledgerType/list"},null,8,["label","modelValue","init-search"])):b("",!0)])])]),_:1},8,["form"])}}},X={name:"FinanceLedgerList"},Z=Object.assign(X,{setup(w){const y=O(),_=z("emitter");let T=["filter"];v("ledger:create")&&T.unshift("create");let $=[];v("ledger:export")&&($=["print","pdf","excel"]);const i="finance/ledger/",d=q(!1),u=L({}),r=l=>{Object.assign(u,l)};return(l,o)=>{const B=n("PageHeaderAction"),f=n("PageHeader"),V=n("ParentTransition"),I=n("TextMuted"),F=n("DataCell"),D=n("LedgerBalance"),k=n("FloatingMenuItem"),M=n("FloatingMenu"),S=n("DataRow"),A=n("BaseButton"),H=n("DataTable"),P=n("ListItem");return p(),g(P,{"init-url":i,onSetItems:r},{header:e(()=>[t(f,{title:l.$trans("finance.ledger.ledger"),navs:[{label:l.$trans("finance.finance"),path:"Finance"}]},{default:e(()=>[t(B,{url:"finance/ledgers/",name:"FinanceLedger",title:l.$trans("finance.ledger.ledger"),actions:s(T),"dropdown-actions":s($),onToggleFilter:o[0]||(o[0]=a=>d.value=!d.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(V,{appear:"",visibility:d.value},{default:e(()=>[t(W,{onRefresh:o[1]||(o[1]=a=>s(_).emit("listItems")),onHide:o[2]||(o[2]=a=>d.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(V,{appear:"",visibility:!0},{default:e(()=>[t(H,{header:u.headers,meta:u.meta,module:"finance.ledger",onRefresh:o[4]||(o[4]=a=>s(_).emit("listItems"))},{actionButton:e(()=>[s(v)("ledger:create")?(p(),g(A,{key:0,onClick:o[3]||(o[3]=a=>s(y).push({name:"FinanceLedgerCreate"}))},{default:e(()=>[c(m(l.$trans("global.add",{attribute:l.$trans("finance.ledger.ledger")})),1)]),_:1})):b("",!0)]),default:e(()=>[(p(!0),N(E,null,U(u.data,a=>(p(),g(S,{key:a.uuid},{default:e(()=>[t(F,{name:"name"},{default:e(()=>[c(m(a.name)+" ",1),t(I,{block:""},{default:e(()=>[c(m(a.alias),1)]),_:2},1024)]),_:2},1024),t(F,{name:"type"},{default:e(()=>[c(m(a.type.name),1)]),_:2},1024),t(F,{name:"netBalance"},{default:e(()=>[t(D,{highlight:"",ledger:a},null,8,["ledger"])]),_:2},1024),t(F,{name:"createdAt"},{default:e(()=>[c(m(a.createdAt.formatted),1)]),_:2},1024),t(F,{name:"action"},{default:e(()=>[t(M,null,{default:e(()=>[t(k,{icon:"fas fa-arrow-circle-right",onClick:C=>s(y).push({name:"FinanceLedgerShow",params:{uuid:a.uuid}})},{default:e(()=>[c(m(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),s(v)("ledger:edit")?(p(),g(k,{key:0,icon:"fas fa-edit",onClick:C=>s(y).push({name:"FinanceLedgerEdit",params:{uuid:a.uuid}})},{default:e(()=>[c(m(l.$trans("general.edit")),1)]),_:2},1032,["onClick"])):b("",!0),s(v)("ledger:create")?(p(),g(k,{key:1,icon:"fas fa-copy",onClick:C=>s(y).push({name:"FinanceLedgerDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[c(m(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):b("",!0),s(v)("ledger:delete")?(p(),g(k,{key:2,icon:"fas fa-trash",onClick:C=>s(_).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[c(m(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])):b("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Z as default};
