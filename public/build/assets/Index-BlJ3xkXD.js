import{m as V,r as i,o as p,q as _,w as e,d as $,e as t,G as O,l as T,n as z,s as r,t as c,a as B,u as l,b as k,f as q,i as G,y as j,F as L,A as x,v as J,h as K,j as Q,z as W}from"./app-DCfJDSeM.js";import{d as X}from"./vuedraggable.umd-DO5pvILy.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ae={class:"col-span-3 sm:col-span-1"},se={__name:"Filter",emits:["hide"],setup(S,{emit:C}){const b=C,f={name:""},d=V({...f});return(v,o)=>{const u=i("BaseInput"),g=i("FilterForm");return p(),_(g,{"init-form":f,form:d,onHide:o[4]||(o[4]=m=>b("hide"))},{default:e(()=>[$("div",Y,[$("div",Z,[t(u,{type:"text",modelValue:d.name,"onUpdate:modelValue":o[0]||(o[0]=m=>d.name=m),name:"name",label:v.$trans("academic.subject.props.name")},null,8,["modelValue","label"])]),$("div",ee,[t(u,{type:"text",modelValue:d.alias,"onUpdate:modelValue":o[1]||(o[1]=m=>d.alias=m),name:"alias",label:v.$trans("academic.subject.props.alias")},null,8,["modelValue","label"])]),$("div",te,[t(u,{type:"text",modelValue:d.code,"onUpdate:modelValue":o[2]||(o[2]=m=>d.code=m),name:"code",label:v.$trans("academic.subject.props.code")},null,8,["modelValue","label"])]),$("div",ae,[t(u,{type:"text",modelValue:d.shortcode,"onUpdate:modelValue":o[3]||(o[3]=m=>d.shortcode=m),name:"shortcode",label:v.$trans("academic.subject.props.shortcode")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},ne={key:0},oe={class:"flex border rounded-xl px-4 py-2"},le={key:1},ie={key:2,class:"mt-4 flex justify-end"},re={name:"AcademicSubjectReorder"},ce=Object.assign(re,{props:{visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(S,{emit:C}){q();const b=G(),f=C,d={subjects:[]};O("academic/subject/");const o=T(!1),u=V({subjects:[]});V({...d});const g=async()=>{o.value=!0,await b.dispatch("academic/subject/list",{params:{all:!0}}).then(a=>{o.value=!1,u.subjects=a}).catch(a=>{o.value=!1})},m=async()=>{o.value=!0,await b.dispatch("academic/subject/reorder",{data:{subjects:u.subjects}}).then(a=>{o.value=!1,f("refresh"),f("close")}).catch(a=>{o.value=!1})},I=()=>{f("close")};return z(()=>{g()}),(a,s)=>{const w=i("BaseLabel"),M=i("BaseAlert"),D=i("BaseButton"),A=i("BaseModal");return p(),_(A,{show:S.visibility,onClose:I},{title:e(()=>[r(c(a.$trans("global.reorder",{attribute:a.$trans("academic.subject.subject")})),1)]),default:e(()=>[u.subjects.length?(p(),B("div",ne,[t(l(X),{class:"space-y-2",list:u.subjects,"item-key":"uuid"},{item:e(({element:R,index:h})=>[$("div",oe,[s[0]||(s[0]=$("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),t(w,null,{default:e(()=>[r(c(R.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(p(),B("div",le,[t(M,{design:"info",size:"xs"},{default:e(()=>[r(c(a.$trans("general.errors.record_not_found")),1)]),_:1})])),u.subjects.length?(p(),B("div",ie,[t(D,{onClick:m},{default:e(()=>[r(c(a.$trans("general.reorder")),1)]),_:1})])):k("",!0)]),_:1},8,["show"])}}}),de={name:"AcademicSubjectList"},pe=Object.assign(de,{emits:["refresh"],setup(S,{emit:C}){const b=K(),f=Q("emitter");let d=["filter"];j("academic:config")&&d.push("config"),j("subject:create")&&d.unshift("create");let v=[];j("subject:export")&&(v=["print","pdf","excel"]);const o="academic/subject/",u=T(!1),g=T(!1),m=V({}),I=a=>{Object.assign(m,a)};return(a,s)=>{const w=i("BaseButton"),M=i("PageHeaderAction"),D=i("PageHeader"),A=i("ParentTransition"),R=i("TextMuted"),h=i("DataCell"),F=i("FloatingMenuItem"),U=i("FloatingMenu"),H=i("DataRow"),P=i("DataTable"),N=i("ListItem"),E=W("tooltip");return p(),B(L,null,[t(N,{"init-url":o,onSetItems:I},{header:e(()=>[t(D,{title:a.$trans("academic.subject.subject"),navs:[{label:a.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[t(M,{url:"academic/subjects/",name:"AcademicSubject",title:a.$trans("academic.subject.subject"),actions:l(d),"dropdown-actions":l(v),"config-path":"AcademicConfigSubjectType",onToggleFilter:s[2]||(s[2]=n=>u.value=!u.value)},{default:e(()=>[x((p(),_(w,{design:"white",onClick:s[0]||(s[0]=n=>g.value=!g.value)},{default:e(()=>s[9]||(s[9]=[$("i",{class:"fas fa-arrows-up-down-left-right"},null,-1)])),_:1})),[[E,a.$trans("global.reorder",{attribute:a.$trans("academic.subject.subject")})]]),l(j)("subject-incharge:read")?(p(),_(w,{key:0,design:"white",onClick:s[1]||(s[1]=n=>l(b).push({name:"AcademicSubjectIncharge"}))},{default:e(()=>[r(c(a.$trans("employee.incharge.incharge")),1)]),_:1})):k("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(A,{appear:"",visibility:u.value},{default:e(()=>[t(se,{onRefresh:s[3]||(s[3]=n=>l(f).emit("listItems")),onHide:s[4]||(s[4]=n=>u.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(A,{appear:"",visibility:!0},{default:e(()=>[t(P,{header:m.headers,meta:m.meta,module:"academic.subject",onRefresh:s[6]||(s[6]=n=>l(f).emit("listItems"))},{actionButton:e(()=>[l(j)("subject:create")?(p(),_(w,{key:0,onClick:s[5]||(s[5]=n=>l(b).push({name:"AcademicSubjectCreate"}))},{default:e(()=>[r(c(a.$trans("global.add",{attribute:a.$trans("academic.subject.subject")})),1)]),_:1})):k("",!0)]),default:e(()=>[(p(!0),B(L,null,J(m.data,n=>(p(),_(H,{key:n.uuid},{default:e(()=>[t(h,{name:"name"},{default:e(()=>[r(c(n.name)+" ",1),t(R,{block:""},{default:e(()=>{var y;return[r(c((y=n.type)==null?void 0:y.name),1)]}),_:2},1024)]),_:2},1024),t(h,{name:"alias"},{default:e(()=>[r(c(n.alias),1)]),_:2},1024),t(h,{name:"code"},{default:e(()=>[r(c(n.code),1)]),_:2},1024),t(h,{name:"shortcode"},{default:e(()=>[r(c(n.shortcode),1)]),_:2},1024),t(h,{name:"createdAt"},{default:e(()=>[r(c(n.createdAt.formatted),1)]),_:2},1024),t(h,{name:"action"},{default:e(()=>[t(U,null,{default:e(()=>[t(F,{icon:"fas fa-arrow-circle-right",onClick:y=>l(b).push({name:"AcademicSubjectShow",params:{uuid:n.uuid}})},{default:e(()=>[r(c(a.$trans("general.show")),1)]),_:2},1032,["onClick"]),l(j)("subject:edit")?(p(),_(F,{key:0,icon:"fas fa-edit",onClick:y=>l(b).push({name:"AcademicSubjectEdit",params:{uuid:n.uuid}})},{default:e(()=>[r(c(a.$trans("general.edit")),1)]),_:2},1032,["onClick"])):k("",!0),l(j)("subject:create")?(p(),_(F,{key:1,icon:"fas fa-copy",onClick:y=>l(b).push({name:"AcademicSubjectDuplicate",params:{uuid:n.uuid}})},{default:e(()=>[r(c(a.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):k("",!0),l(j)("subject:delete")?(p(),_(F,{key:2,icon:"fas fa-trash",onClick:y=>l(f).emit("deleteItem",{uuid:n.uuid})},{default:e(()=>[r(c(a.$trans("general.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1}),t(ce,{visibility:g.value,onClose:s[7]||(s[7]=n=>g.value=!1),onRefresh:s[8]||(s[8]=n=>l(f).emit("listItems"))},null,8,["visibility"])],64)}}});export{pe as default};
