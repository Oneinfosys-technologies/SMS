import{f as j,j as C,G as U,m as L,n as H,I as M,r as l,o as d,q as h,w as t,d as c,e as o,u as a,a as V,b as _,l as E,F as N,s as p,t as r,h as q}from"./app-DCfJDSeM.js";import{_ as G,a as K}from"./Og-DEsPtDt5.js";const z={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},Q={key:0,class:"col-span-3 sm:col-span-2"},W={name:"SitePageBlockForm"},X=Object.assign(W,{props:{page:{type:Object,default:()=>({})}},emits:["completed"],setup(w,{emit:v}){const $=j(),n=v,I=C("emitter"),k=w,y={hasBlock:!1,blocks:[]},b="site/page/",e=U(b),m=L({...y}),B=L({blocks:[],isLoaded:!$.params.uuid}),s=()=>{n("completed"),I.emit("listItems")};return H(()=>{k.page.uuid&&(Object.assign(y,{hasBlock:k.page.hasBlock,blocks:k.page.blocks.map(g=>g.uuid)}),Object.assign(m,M(y)),B.blocks=k.page.blocks,B.isLoaded=!0)}),(g,u)=>{const P=l("BaseSwitch"),f=l("BaseSelectSearch"),x=l("FormAction");return w.page.uuid?(d(),h(x,{key:0,"init-url":b,uuid:a($).params.uuid,"no-data-fetch":"",action:"updateBlocks","init-form":y,form:m,"keep-adding":!1,"stay-on":!0,"after-submit":s},{default:t(()=>[c("div",z,[c("div",J,[o(P,{vertical:"",modelValue:m.hasBlock,"onUpdate:modelValue":u[0]||(u[0]=i=>m.hasBlock=i),name:"hasBlock",label:g.$trans("global.show",{attribute:g.$trans("site.block.block")}),error:a(e).hasBlock,"onUpdate:error":u[1]||(u[1]=i=>a(e).hasBlock=i)},null,8,["modelValue","label","error"])]),m.hasBlock?(d(),V("div",Q,[o(f,{multiple:"",name:"blocks",label:g.$trans("global.select",{attribute:g.$trans("site.block.block")}),modelValue:m.blocks,"onUpdate:modelValue":u[2]||(u[2]=i=>m.blocks=i),error:a(e).blocks,"onUpdate:error":u[3]||(u[3]=i=>a(e).blocks=i),"label-prop":"name","value-prop":"uuid","init-search":B.blocks,"init-search-key":"name","search-action":"site/block/list"},null,8,["label","modelValue","error","init-search"])])):_("",!0)])]),_:1},8,["uuid","form"])):_("",!0)}}}),Y={class:"space-y-2"},Z={key:0},ee={key:1},te={class:"grid grid-cols-1 gap-x-4 gap-y-8"},ae={class:"space-y-4"},se={class:"px-4 py-2"},oe={class:"text-2xl font-bold text-gray-900 dark:text-gray-400"},ne={key:0,class:"mt-2 font-semibold text-gray-800 dark:text-gray-500"},le={name:"SitePageShow"},de=Object.assign(le,{setup(w){const v=j(),$=q(),n=C("$trans"),I=C("emitter"),k={uuid:""},y="site/page/",b=E(!1),e=L({...k}),m=B=>{Object.assign(e,B)};return(B,s)=>{const g=l("BaseButton"),u=l("PageHeaderAction"),P=l("PageHeader"),f=l("ListItemView"),x=l("ListContainerVertical"),i=l("BaseCard"),D=l("ListMedia"),F=l("BaseDataView"),O=l("MarkdownContent"),T=l("DetailLayoutVertical"),A=l("ShowItem"),R=l("ParentTransition");return d(),V(N,null,[e.uuid?(d(),h(P,{key:0,title:a(n)(a(v).meta.trans,{attribute:a(n)(a(v).meta.label)}),navs:[{label:a(n)("site.site"),path:"Site"},{label:a(n)("site.page.page"),path:"SitePageList"}]},{default:t(()=>[o(u,{name:"SitePage",title:a(n)("site.page.page"),actions:["list"]},{default:t(()=>[o(g,{design:"white",onClick:s[0]||(s[0]=S=>a($).push({name:"SitePageEdit",params:{uuid:e.uuid}}))},{default:t(()=>s[6]||(s[6]=[c("i",{class:"fas fa-pen-to-square"},null,-1)])),_:1})]),_:1},8,["title"])]),_:1},8,["title","navs"])):_("",!0),o(R,{appear:"",visibility:!0},{default:t(()=>[o(A,{"init-url":y,uuid:a(v).params.uuid,onSetItem:m,onRedirectTo:s[4]||(s[4]=S=>a($).push({name:"SitePage"})),refresh:b.value,onRefreshed:s[5]||(s[5]=S=>b.value=!1)},{default:t(()=>[e.uuid?(d(),h(T,{key:0},{detail:t(()=>[c("div",Y,[o(i,{"no-padding":"","no-content-padding":""},{title:t(()=>[p(r(e.title),1)]),action:t(()=>s[7]||(s[7]=[])),default:t(()=>[o(x,null,{default:t(()=>[o(f,{label:a(n)("general.created_at")},{default:t(()=>[p(r(e.createdAt.formatted),1)]),_:1},8,["label"]),o(f,{label:a(n)("general.updated_at")},{default:t(()=>[p(r(e.updatedAt.formatted),1)]),_:1},8,["label"]),o(f,{label:a(n)("site.seo.robots")},{default:t(()=>[e.seo.robots?(d(),V("span",Z,s[8]||(s[8]=[c("i",{class:"far fa-check-circle fa-lg text-success"},null,-1)]))):(d(),V("span",ee,s[9]||(s[9]=[c("i",{class:"far fa-times-circle fa-lg text-danger"},null,-1)])))]),_:1},8,["label"]),o(f,{label:a(n)("site.seo.meta_title")},{default:t(()=>[p(r(e.seo.metaTitle),1)]),_:1},8,["label"]),o(f,{label:a(n)("site.seo.meta_description")},{default:t(()=>[p(r(e.seo.metaDescription),1)]),_:1},8,["label"]),o(f,{label:a(n)("site.seo.meta_keywords")},{default:t(()=>[p(r(e.seo.metaKeywords),1)]),_:1},8,["label"])]),_:1})]),_:1}),o(i,null,{title:t(()=>[p(r(a(n)("general.media")),1)]),default:t(()=>[c("dl",te,[o(F,{class:"col-span-1 sm:col-span-2"},{default:t(()=>[o(D,{grid:1,media:e.media,url:`/app/site/pages/${e.uuid}/`},null,8,["media","url"])]),_:1})])]),_:1}),e.assets.defaultOg?_("",!0):(d(),h(i,{key:0,"no-padding":"","no-content-padding":""},{title:t(()=>[p(r(a(n)("site.assets.og")),1)]),default:t(()=>[e.uuid?(d(),h(G,{key:0,disabled:"",page:e,onRefreshItem:s[1]||(s[1]=S=>b.value=!0)},null,8,["page"])):_("",!0)]),_:1}))])]),default:t(()=>[c("div",ae,[o(i,{"no-padding":"","no-content-padding":"","bottom-content-padding":""},{default:t(()=>[e.uuid?(d(),h(K,{key:0,disabled:"",page:e,onRefreshItem:s[2]||(s[2]=S=>b.value=!0)},null,8,["page"])):_("",!0),c("div",se,[c("h1",oe,r(e.title),1),e.subTitle?(d(),V("h2",ne,r(e.subTitle),1)):_("",!0),o(O,{class:"mt-2",content:e.contentHtml},null,8,["content"])])]),_:1}),o(i,{"no-padding":"","no-content-padding":""},{title:t(()=>[p(r(a(n)("site.block.block")),1)]),default:t(()=>[o(X,{page:e,onCompleted:s[3]||(s[3]=S=>a(I).emit("refreshItem"))},null,8,["page"])]),_:1})])]),_:1})):_("",!0)]),_:1},8,["uuid","refresh"])]),_:1})],64)}}});export{de as default};
