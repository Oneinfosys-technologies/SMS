import{f as j,m as I,n as E,r as i,o as u,q as f,w as e,d as D,e as n,b as y,y as v,l as O,u as l,s as a,t as s,a as R,v as Q,F as x,h as z,j as G,aI as J}from"./app-DCfJDSeM.js";const K={class:"grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={__name:"Filter",emits:["hide"],setup(N,{emit:$}){const k=j(),C=$,h={codeNumber:"",purposes:[],startDate:"",endDate:""},c=I({...h}),_=I({purposes:[],isLoaded:!k.query.purposes});return E(async()=>{_.purposes=k.query.purposes?k.query.purposes.split(","):[],_.isLoaded=!0}),(g,p)=>{const V=i("BaseInput"),w=i("BaseSelectSearch"),o=i("DatePicker"),r=i("FilterForm");return u(),f(r,{"init-form":h,form:c,multiple:["purposes"],onHide:p[4]||(p[4]=d=>C("hide"))},{default:e(()=>[D("div",K,[D("div",W,[n(V,{type:"text",modelValue:c.codeNumber,"onUpdate:modelValue":p[0]||(p[0]=d=>c.codeNumber=d),name:"codeNumber",label:g.$trans("reception.visitor_log.props.code_number")},null,8,["modelValue","label"])]),D("div",X,[_.isLoaded?(u(),f(w,{key:0,multiple:"",name:"purposes",label:g.$trans("global.select",{attribute:g.$trans("reception.visitor_log.purpose.purpose")}),modelValue:c.purposes,"onUpdate:modelValue":p[1]||(p[1]=d=>c.purposes=d),"value-prop":"uuid","init-search":_.purposes,"search-action":"option/list","additional-search-query":{type:"visiting_purpose"}},null,8,["label","modelValue","init-search"])):y("",!0)]),D("div",Y,[n(o,{start:c.startDate,"onUpdate:start":p[2]||(p[2]=d=>c.startDate=d),end:c.endDate,"onUpdate:end":p[3]||(p[3]=d=>c.endDate=d),name:"dateBetween",as:"range",label:g.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},L={key:0},ee={key:1},te={name:"ReceptionVisitorLogList"},oe=Object.assign(te,{setup(N){const $=z(),k=G("emitter");let C=["filter"];v("reception:config")&&C.push("config"),v("visitor-log:create")&&C.unshift("create");let h=[];v("visitor-log:export")&&(h=["print","pdf","excel"]);const c="reception/visitorLog/",_=O(!1),g=I({}),p=o=>{Object.assign(g,o)},V=o=>{k.emit("actionItem",{uuid:o.uuid,action:"markExit",confirmation:!0})},w=o=>{let r="/app/reception/visitor-logs/"+o.uuid+"/export",d={};window.open(J(r,d),"_blank").focus()};return(o,r)=>{const d=i("PageHeaderAction"),P=i("PageHeader"),A=i("ParentTransition"),b=i("DataCell"),F=i("TextMuted"),S=i("BaseBadge"),B=i("FloatingMenuItem"),T=i("FloatingMenu"),q=i("DataRow"),M=i("BaseButton"),H=i("DataTable"),U=i("ListItem");return u(),f(U,{"init-url":c,"additional-query":{},onSetItems:p},{header:e(()=>[n(P,{title:o.$trans("reception.visitor_log.visitor_log"),navs:[{label:o.$trans("reception.reception"),path:"Reception"}]},{default:e(()=>[n(d,{url:"reception/visitor-logs/",name:"ReceptionVisitorLog",title:o.$trans("reception.visitor_log.visitor_log"),actions:l(C),"dropdown-actions":l(h),"config-path":"ReceptionConfig",onToggleFilter:r[0]||(r[0]=t=>_.value=!_.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(A,{appear:"",visibility:_.value},{default:e(()=>[n(Z,{onRefresh:r[1]||(r[1]=t=>l(k).emit("listItems")),onHide:r[2]||(r[2]=t=>_.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(A,{appear:"",visibility:!0},{default:e(()=>[n(H,{header:g.headers,meta:g.meta,module:"reception.visitor_log",onRefresh:r[4]||(r[4]=t=>l(k).emit("listItems"))},{actionButton:e(()=>[l(v)("visitor-log:create")?(u(),f(M,{key:0,onClick:r[3]||(r[3]=t=>l($).push({name:"ReceptionVisitorLogCreate"}))},{default:e(()=>[a(s(o.$trans("global.add",{attribute:o.$trans("reception.visitor_log.visitor_log")})),1)]),_:1})):y("",!0)]),default:e(()=>[(u(!0),R(x,null,Q(g.data,t=>(u(),f(q,{key:t.uuid},{default:e(()=>[n(b,{name:"codeNumber"},{default:e(()=>[a(s(t.codeNumber),1)]),_:2},1024),n(b,{name:"entryAt"},{default:e(()=>[a(s(t.entryAt.formatted)+" ",1),t.exitAt.value?(u(),f(F,{key:0,block:""},{default:e(()=>[a(s(t.exitAt.formatted),1)]),_:2},1024)):y("",!0),D("div",null,[t.exitAt.value?y("",!0):(u(),f(S,{key:0,class:"cursor-pointer",design:"info",onClick:m=>V(t)},{default:e(()=>[a(s(o.$trans("global.mark",{attribute:o.$trans("reception.visitor_log.props.exit")})),1)]),_:2},1032,["onClick"]))])]),_:2},1024),n(b,{name:"type"},{default:e(()=>{var m;return[a(s((m=t.type)==null?void 0:m.label),1)]}),_:2},1024),n(b,{name:"name"},{default:e(()=>[a(s(t.name)+" ",1),n(F,{block:""},{default:e(()=>[a(s(t.contactNumber),1)]),_:2},1024)]),_:2},1024),n(b,{name:"purpose"},{default:e(()=>{var m;return[a(s(((m=t.purpose)==null?void 0:m.name)||"-"),1)]}),_:2},1024),n(b,{name:"employee"},{default:e(()=>[t.employee?(u(),R("span",L,[a(s(t.employee.name)+" ",1),n(F,{block:""},{default:e(()=>[a(s(t.employee.designation),1)]),_:2},1024)])):(u(),R("span",ee,"-"))]),_:2},1024),n(b,{name:"count"},{default:e(()=>[a(s(t.count),1)]),_:2},1024),n(b,{name:"createdAt"},{default:e(()=>[a(s(t.createdAt.formatted),1)]),_:2},1024),n(b,{name:"action"},{default:e(()=>[n(T,null,{default:e(()=>[n(B,{icon:"fas fa-arrow-circle-right",onClick:m=>l($).push({name:"ReceptionVisitorLogShow",params:{uuid:t.uuid}})},{default:e(()=>[a(s(o.$trans("general.show")),1)]),_:2},1032,["onClick"]),n(B,{icon:"fas fa-arrow-circle-right",onClick:m=>w(t)},{default:e(()=>[a(s(o.$trans("global.print",{attribute:o.$trans("reception.visitor_log.pass")})),1)]),_:2},1032,["onClick"]),l(v)("visitor-log:edit")?(u(),f(B,{key:0,icon:"fas fa-edit",onClick:m=>l($).push({name:"ReceptionVisitorLogEdit",params:{uuid:t.uuid}})},{default:e(()=>[a(s(o.$trans("general.edit")),1)]),_:2},1032,["onClick"])):y("",!0),l(v)("visitor-log:create")?(u(),f(B,{key:1,icon:"fas fa-copy",onClick:m=>l($).push({name:"ReceptionVisitorLogDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[a(s(o.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):y("",!0),l(v)("visitor-log:delete")?(u(),f(B,{key:2,icon:"fas fa-trash",onClick:m=>l(k).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[a(s(o.$trans("general.delete")),1)]),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{oe as default};
