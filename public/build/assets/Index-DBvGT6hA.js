import{f as z,m as w,n as G,r as i,o,q as y,w as e,d as f,s as m,t as a,b as v,e as n,y as k,l as J,u as c,C as K,a as j,v as S,F as I,h as Q,j as X}from"./app-DCfJDSeM.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},M={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},se={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(T,{emit:$}){const p=z(),C=$,q=T,D={employees:[],batches:[],subjects:[],startDate:"",endDate:""},u=w({...D}),L=w({subjects:q.preRequisites.subjects}),l=w({employees:[],batches:[],subjects:[],isLoaded:!(p.query.employees||p.query.batches||p.query.subjects)});return G(async()=>{l.employees=p.query.employees?p.query.employees.split(","):[],l.batches=p.query.batches?p.query.batches.split(","):[],l.subjects=p.query.subjects?p.query.subjects.split(","):[],l.isLoaded=!0}),(h,_)=>{const r=i("BaseSelectSearch"),b=i("BaseSelect"),B=i("DatePicker"),F=i("FilterForm");return o(),y(F,{"init-form":D,form:u,multiple:["employees","batches","subjects"],onHide:_[5]||(_[5]=t=>C("hide"))},{default:e(()=>[f("div",Y,[f("div",Z,[l.isLoaded?(o(),y(r,{key:0,multiple:"",name:"employees",label:h.$trans("global.select",{attribute:h.$trans("employee.employee")}),modelValue:u.employees,"onUpdate:modelValue":_[0]||(_[0]=t=>u.employees=t),"value-prop":"uuid","init-search":l.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(t=>[m(a(t.value.name)+" ("+a(t.value.codeNumber)+") ",1)]),listOption:e(t=>[m(a(t.option.name)+" ("+a(t.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):v("",!0)]),f("div",M,[l.isLoaded?(o(),y(r,{key:0,multiple:"",name:"batches",label:h.$trans("global.select",{attribute:h.$trans("academic.batch.batch")}),modelValue:u.batches,"onUpdate:modelValue":_[1]||(_[1]=t=>u.batches=t),"value-prop":"uuid","init-search":l.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:e(t=>[m(a(t.value.course.name)+" "+a(t.value.name),1)]),listOption:e(t=>[m(a(t.option.course.nameWithTerm)+" "+a(t.option.name),1)]),_:1},8,["label","modelValue","init-search"])):v("",!0)]),f("div",ee,[n(b,{multiple:"",modelValue:u.subjects,"onUpdate:modelValue":_[2]||(_[2]=t=>u.subjects=t),name:"subjects",label:h.$trans("academic.subject.subject"),"label-prop":"name","value-prop":"uuid",options:L.subjects},null,8,["modelValue","label","options"])]),f("div",te,[n(B,{start:u.startDate,"onUpdate:start":_[3]||(_[3]=t=>u.startDate=t),end:u.endDate,"onUpdate:end":_[4]||(_[4]=t=>u.endDate=t),name:"dateBetween",as:"range",label:h.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},ae={class:"grid grid-cols-1 gap-4 px-4 pt-4 md:grid-cols-2 lg:grid-cols-3"},ne=["onClick"],oe={class:"px-2 py-2 text-gray-800 dark:text-gray-400"},ie={class:"flex items-center justify-between"},le={class:"font-medium"},re={class:"mt-2 flex justify-between"},ue={class:"text-sm"},ce={key:0,class:"text-xs"},de={class:"mt-2 text-xs"},me={class:"text-xl font-semibold"},pe={name:"ResourceLearningMaterialList"},be=Object.assign(pe,{setup(T){const $=Q(),p=X("emitter");let C=["filter"];k("resource:config")&&C.push("config"),k("learning-material:create")&&C.unshift("create");let q=[];k("learning-material:export")&&(q=["print","pdf","excel"]);const D="resource/learningMaterial/",u=J(!1),L=w({subjects:[]}),l=w({}),h=r=>{Object.assign(L,r)},_=r=>{Object.assign(l,r)};return(r,b)=>{const B=i("PageHeaderAction"),F=i("PageHeader"),t=i("ParentTransition"),O=i("CardView"),P=i("Pagination"),x=i("CardList"),R=i("DataCell"),A=i("TextMuted"),V=i("FloatingMenuItem"),N=i("FloatingMenu"),H=i("DataRow"),U=i("BaseButton"),E=i("DataTable"),W=i("ListItem");return o(),y(W,{"init-url":D,"pre-requisites":!0,onSetPreRequisites:h,"additional-query":{},onSetItems:_},{header:e(()=>[n(F,{title:r.$trans("resource.learning_material.learning_material"),navs:[{label:r.$trans("resource.resource"),path:"Resource"}]},{default:e(()=>[n(B,{url:"resource/learning-materials/",name:"ResourceLearningMaterial",title:r.$trans("resource.learning_material.learning_material"),actions:c(C),"dropdown-actions":c(q),"config-path":"ResourceConfig",onToggleFilter:b[0]||(b[0]=s=>u.value=!u.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(t,{appear:"",visibility:u.value},{default:e(()=>[n(se,{onRefresh:b[1]||(b[1]=s=>c(p).emit("listItems")),"pre-requisites":L,onHide:b[2]||(b[2]=s=>u.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[c(K)(["student","guardian"],"any")?(o(),y(t,{key:0,appear:"",visibility:!0},{default:e(()=>[n(x,{header:l.headers,meta:l.meta},{content:e(()=>[f("div",me,a(r.$trans("dashboard.nothing_to_show")),1)]),default:e(()=>[f("div",ae,[(o(!0),j(I,null,S(l.data,s=>(o(),j("div",{key:s.uuid,class:"cursor-pointer",onClick:d=>c($).push({name:"ResourceLearningMaterialShow",params:{uuid:s.uuid}})},[n(O,{"no-padding":""},{default:e(()=>{var d,g;return[f("div",oe,[f("div",ie,[f("span",le,a(s.title),1)]),f("div",re,[f("span",ue,a(((d=s.employee)==null?void 0:d.name)||"-"),1),s.employee?(o(),j("span",ce,a((g=s.employee)==null?void 0:g.designation),1)):v("",!0)]),f("p",de,a(s.publishedAt.formatted),1)])]}),_:2},1024)],8,ne))),128))]),f("div",null,[n(P,{"card-view":"",meta:l.meta,onRefresh:b[3]||(b[3]=s=>c(p).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):(o(),y(t,{key:1,appear:"",visibility:!0},{default:e(()=>[n(E,{header:l.headers,meta:l.meta,module:"resource.learning_material",onRefresh:b[5]||(b[5]=s=>c(p).emit("listItems"))},{actionButton:e(()=>[c(k)("learning-material:create")?(o(),y(U,{key:0,onClick:b[4]||(b[4]=s=>c($).push({name:"ResourceLearningMaterialCreate"}))},{default:e(()=>[m(a(r.$trans("global.add",{attribute:r.$trans("resource.learning_material.learning_material")})),1)]),_:1})):v("",!0)]),default:e(()=>[(o(!0),j(I,null,S(l.data,s=>(o(),y(H,{key:s.uuid},{default:e(()=>[n(R,{name:"title"},{default:e(()=>[m(a(s.titleExcerpt),1)]),_:2},1024),n(R,{name:"records"},{default:e(()=>[(o(!0),j(I,null,S(s.records,d=>{var g;return o(),j("div",null,[m(a(((g=d.batch.course)==null?void 0:g.name)+" "+d.batch.name)+" ",1),d.subject?(o(),y(A,{key:0},{default:e(()=>[m(a(d.subject.name),1)]),_:2},1024)):v("",!0)])}),256))]),_:2},1024),n(R,{name:"employee"},{default:e(()=>{var d;return[m(a(((d=s.employee)==null?void 0:d.name)||"-")+" ",1),n(A,{block:""},{default:e(()=>{var g;return[m(a((g=s.employee)==null?void 0:g.codeNumber),1)]}),_:2},1024)]}),_:2},1024),n(R,{name:"publishedAt"},{default:e(()=>[m(a(s.publishedAt.formatted),1)]),_:2},1024),n(R,{name:"action"},{default:e(()=>[n(N,null,{default:e(()=>[n(V,{icon:"fas fa-arrow-circle-right",onClick:d=>c($).push({name:"ResourceLearningMaterialShow",params:{uuid:s.uuid}})},{default:e(()=>[m(a(r.$trans("general.show")),1)]),_:2},1032,["onClick"]),c(k)("learning-material:edit")&&s.isEditable?(o(),y(V,{key:0,icon:"fas fa-edit",onClick:d=>c($).push({name:"ResourceLearningMaterialEdit",params:{uuid:s.uuid}})},{default:e(()=>[m(a(r.$trans("general.edit")),1)]),_:2},1032,["onClick"])):v("",!0),c(k)("learning-material:create")?(o(),y(V,{key:1,icon:"fas fa-copy",onClick:d=>c($).push({name:"ResourceLearningMaterialDuplicate",params:{uuid:s.uuid}})},{default:e(()=>[m(a(r.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):v("",!0),c(k)("learning-material:delete")&&s.isDeletable?(o(),y(V,{key:2,icon:"fas fa-trash",onClick:d=>c(p).emit("deleteItem",{uuid:s.uuid})},{default:e(()=>[m(a(r.$trans("general.delete")),1)]),_:2},1032,["onClick"])):v("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1}))]),_:1})}}});export{be as default};
