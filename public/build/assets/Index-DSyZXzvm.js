import{f as A,m as h,n as H,r as a,o as D,q as k,w as e,d as B,e as t,b as R,y as q,l as N,u as m,s as l,t as r,a as U,v as j,F as E,h as O,j as z}from"./app-DCfJDSeM.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},W={__name:"Filter",emits:["hide"],setup(F,{emit:g}){const f=A(),$=g,b={title:"",categories:[],startDate:"",endDate:""},d=h({...b}),u=h({categories:[],isLoaded:!f.query.categories});return H(async()=>{u.categories=f.query.categories?f.query.categories.split(","):[],u.isLoaded=!0}),(p,s)=>{const i=a("BaseInput"),o=a("BaseSelectSearch"),I=a("DatePicker"),C=a("FilterForm");return D(),k(C,{"init-form":b,form:d,multiple:["categories"],onHide:s[4]||(s[4]=c=>$("hide"))},{default:e(()=>[B("div",G,[B("div",J,[t(i,{type:"text",modelValue:d.title,"onUpdate:modelValue":s[0]||(s[0]=c=>d.title=c),name:"title",label:p.$trans("discipline.incident.props.title")},null,8,["modelValue","label"])]),B("div",K,[u.isLoaded?(D(),k(o,{key:0,multiple:"",name:"categories",label:p.$trans("global.select",{attribute:p.$trans("discipline.incident.category.category")}),modelValue:d.categories,"onUpdate:modelValue":s[1]||(s[1]=c=>d.categories=c),"value-prop":"uuid","init-search":u.categories,"search-action":"option/list","additional-search-query":{type:"incident_category"}},null,8,["label","modelValue","init-search"])):R("",!0)]),B("div",Q,[t(I,{start:d.startDate,"onUpdate:start":s[2]||(s[2]=c=>d.startDate=c),end:d.endDate,"onUpdate:end":s[3]||(s[3]=c=>d.endDate=c),name:"dateBetween",as:"range",label:p.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},X={name:"DisciplineIncidentList"},Z=Object.assign(X,{setup(F){const g=O(),f=z("emitter");let $=["create","filter"];q("discipline:config")&&$.push("config");let b=["print","pdf","excel"];const d="discipline/incident/",u=N(!1),p=h({}),s=i=>{Object.assign(p,i)};return(i,o)=>{const I=a("PageHeaderAction"),C=a("PageHeader"),c=a("ParentTransition"),_=a("DataCell"),w=a("BaseBadge"),V=a("TextMuted"),y=a("FloatingMenuItem"),P=a("FloatingMenu"),T=a("DataRow"),L=a("BaseButton"),M=a("DataTable"),S=a("ListItem");return D(),k(S,{"init-url":d,onSetItems:s},{header:e(()=>[t(C,{title:i.$trans("discipline.incident.incident"),navs:[{label:i.$trans("discipline.discipline"),path:"Discipline"}]},{default:e(()=>[t(I,{url:"discipline/incidents/",name:"DisciplineIncident",title:i.$trans("discipline.incident.incident"),actions:m($),"dropdown-actions":m(b),"config-path":"DisciplineConfig",onToggleFilter:o[0]||(o[0]=n=>u.value=!u.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(c,{appear:"",visibility:u.value},{default:e(()=>[t(W,{onRefresh:o[1]||(o[1]=n=>m(f).emit("listItems")),onHide:o[2]||(o[2]=n=>u.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(c,{appear:"",visibility:!0},{default:e(()=>[t(M,{header:p.headers,meta:p.meta,module:"discipline.incident",onRefresh:o[4]||(o[4]=n=>m(f).emit("listItems"))},{actionButton:e(()=>[t(L,{onClick:o[3]||(o[3]=n=>m(g).push({name:"DisciplineIncidentCreate"}))},{default:e(()=>[l(r(i.$trans("global.add",{attribute:i.$trans("discipline.incident.incident")})),1)]),_:1})]),default:e(()=>[(D(!0),U(E,null,j(p.data,n=>(D(),k(T,{key:n.uuid},{default:e(()=>[t(_,{name:"category"},{default:e(()=>[l(r(n.category.name),1)]),_:2},1024),t(_,{name:"title"},{default:e(()=>[l(r(n.title)+" ",1),t(w,{design:n.nature.color},{default:e(()=>[l(r(n.nature.label),1)]),_:2},1032,["design"])]),_:2},1024),t(_,{name:"name"},{default:e(()=>[l(r(n.name)+" ",1),t(V,{block:""},{default:e(()=>[l(r(n.contactNumber),1)]),_:2},1024)]),_:2},1024),t(_,{name:"date"},{default:e(()=>{var v;return[l(r(((v=n.date)==null?void 0:v.formatted)||"-"),1)]}),_:2},1024),t(_,{name:"createdAt"},{default:e(()=>[l(r(n.createdAt.formatted),1)]),_:2},1024),t(_,{name:"action"},{default:e(()=>[t(P,null,{default:e(()=>[t(y,{icon:"fas fa-arrow-circle-right",onClick:v=>m(g).push({name:"DisciplineIncidentShow",params:{uuid:n.uuid}})},{default:e(()=>[l(r(i.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(y,{icon:"fas fa-edit",onClick:v=>m(g).push({name:"DisciplineIncidentEdit",params:{uuid:n.uuid}})},{default:e(()=>[l(r(i.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t(y,{icon:"fas fa-copy",onClick:v=>m(g).push({name:"DisciplineIncidentDuplicate",params:{uuid:n.uuid}})},{default:e(()=>[l(r(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),t(y,{icon:"fas fa-trash",onClick:v=>m(f).emit("deleteItem",{uuid:n.uuid})},{default:e(()=>[l(r(i.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Z as default};
