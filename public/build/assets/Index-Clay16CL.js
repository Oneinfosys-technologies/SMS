import{f as S,m as w,n as H,r as a,o as c,q as f,w as e,d as C,e as n,b as $,y,l as U,u as p,s,t as r,a as q,v as j,F as E,h as O,j as L}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},W={__name:"Filter",emits:["hide"],setup(V,{emit:v}){const b=S(),N=v,k={incomingNumber:"",outgointNumber:"",purposes:[],startDate:"",endDate:""},i=w({...k}),_=w({purposes:[],isLoaded:!b.query.purposes});return H(async()=>{_.purposes=b.query.purposes?b.query.purposes.split(","):[],_.isLoaded=!0}),(m,o)=>{const l=a("BaseInput"),d=a("BaseSelectSearch"),B=a("DatePicker"),F=a("FilterForm");return c(),f(F,{"init-form":k,form:i,multiple:["purposes"],onHide:o[5]||(o[5]=u=>N("hide"))},{default:e(()=>[C("div",z,[C("div",G,[n(l,{type:"text",modelValue:i.incomingNumber,"onUpdate:modelValue":o[0]||(o[0]=u=>i.incomingNumber=u),name:"incomingNumber",label:m.$trans("reception.call_log.props.incoming_number")},null,8,["modelValue","label"])]),C("div",J,[n(l,{type:"text",modelValue:i.outgoingNumber,"onUpdate:modelValue":o[1]||(o[1]=u=>i.outgoingNumber=u),name:"outgoingNumber",label:m.$trans("reception.call_log.props.outgoing_number")},null,8,["modelValue","label"])]),C("div",K,[_.isLoaded?(c(),f(d,{key:0,multiple:"",name:"purposes",label:m.$trans("global.select",{attribute:m.$trans("reception.call_log.purpose.purpose")}),modelValue:i.purposes,"onUpdate:modelValue":o[2]||(o[2]=u=>i.purposes=u),"value-prop":"uuid","init-search":_.purposes,"search-action":"option/list","additional-search-query":{type:"calling_purpose"}},null,8,["label","modelValue","init-search"])):$("",!0)]),C("div",Q,[n(B,{start:i.startDate,"onUpdate:start":o[3]||(o[3]=u=>i.startDate=u),end:i.endDate,"onUpdate:end":o[4]||(o[4]=u=>i.endDate=u),name:"dateBetween",as:"range",label:m.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},X={name:"ReceptionCallLogList"},Z=Object.assign(X,{setup(V){const v=O(),b=L("emitter");let N=["filter"];y("call-log:create")&&N.unshift("create");let k=[];y("call-log:export")&&(k=["print","pdf","excel"]);const i="reception/callLog/",_=U(!1),m=w({}),o=l=>{Object.assign(m,l)};return(l,d)=>{const B=a("PageHeaderAction"),F=a("PageHeader"),u=a("ParentTransition"),g=a("DataCell"),R=a("TextMuted"),D=a("FloatingMenuItem"),I=a("FloatingMenu"),A=a("DataRow"),P=a("BaseButton"),T=a("DataTable"),M=a("ListItem");return c(),f(M,{"init-url":i,onSetItems:o},{header:e(()=>[n(F,{title:l.$trans("reception.call_log.call_log"),navs:[{label:l.$trans("reception.reception"),path:"Reception"}]},{default:e(()=>[n(B,{url:"reception/call-logs/",name:"ReceptionCallLog",title:l.$trans("reception.call_log.call_log"),actions:p(N),"dropdown-actions":p(k),onToggleFilter:d[0]||(d[0]=t=>_.value=!_.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(u,{appear:"",visibility:_.value},{default:e(()=>[n(W,{onRefresh:d[1]||(d[1]=t=>p(b).emit("listItems")),onHide:d[2]||(d[2]=t=>_.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(u,{appear:"",visibility:!0},{default:e(()=>[n(T,{header:m.headers,meta:m.meta,module:"reception.call_log",onRefresh:d[4]||(d[4]=t=>p(b).emit("listItems"))},{actionButton:e(()=>[p(y)("call-log:create")?(c(),f(P,{key:0,onClick:d[3]||(d[3]=t=>p(v).push({name:"ReceptionCallLogCreate"}))},{default:e(()=>[s(r(l.$trans("global.add",{attribute:l.$trans("reception.call_log.call_log")})),1)]),_:1})):$("",!0)]),default:e(()=>[(c(!0),q(E,null,j(m.data,t=>(c(),f(A,{key:t.uuid},{default:e(()=>[n(g,{name:"type"},{default:e(()=>[s(r(t.type.label),1)]),_:2},1024),n(g,{name:"purpose"},{default:e(()=>[s(r(t.purpose.name),1)]),_:2},1024),n(g,{name:"name"},{default:e(()=>[s(r(t.name)+" ",1),t.companyName?(c(),f(R,{key:0,block:""},{default:e(()=>[s(r(t.companyName),1)]),_:2},1024)):$("",!0)]),_:2},1024),n(g,{name:"incomingNumber"},{default:e(()=>[s(r(t.incomingNumber),1)]),_:2},1024),n(g,{name:"outgoingNumber"},{default:e(()=>[s(r(t.outgoingNumber),1)]),_:2},1024),n(g,{name:"callAt"},{default:e(()=>[s(r(t.callAt.formatted)+" ",1),n(R,{block:""},{default:e(()=>[s(r(t.duration.label),1)]),_:2},1024)]),_:2},1024),n(g,{name:"createdAt"},{default:e(()=>[s(r(t.createdAt.formatted),1)]),_:2},1024),n(g,{name:"action"},{default:e(()=>[n(I,null,{default:e(()=>[n(D,{icon:"fas fa-arrow-circle-right",onClick:h=>p(v).push({name:"ReceptionCallLogShow",params:{uuid:t.uuid}})},{default:e(()=>[s(r(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),p(y)("call-log:edit")?(c(),f(D,{key:0,icon:"fas fa-edit",onClick:h=>p(v).push({name:"ReceptionCallLogEdit",params:{uuid:t.uuid}})},{default:e(()=>[s(r(l.$trans("general.edit")),1)]),_:2},1032,["onClick"])):$("",!0),p(y)("call-log:create")?(c(),f(D,{key:1,icon:"fas fa-copy",onClick:h=>p(v).push({name:"ReceptionCallLogDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[s(r(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):$("",!0),p(y)("call-log:delete")?(c(),f(D,{key:2,icon:"fas fa-trash",onClick:h=>p(b).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[s(r(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])):$("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Z as default};
