import{f as P,m as I,n as U,r as s,o as d,q as g,w as e,d as B,e as t,b as w,y as $,l as j,u as r,s as i,t as l,a as R,v as V,F as T,h as E,j as O,aI as Q}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={__name:"Filter",emits:["hide"],setup(q,{emit:k}){const b=P(),y=k,C={codeNumber:"",purposes:[],startDate:"",endDate:""},p=I({...C}),f=I({purposes:[],isLoaded:!b.query.purposes});return U(async()=>{f.purposes=b.query.purposes?b.query.purposes.split(","):[],f.isLoaded=!0}),(_,u)=>{const F=s("BaseInput"),a=s("BaseSelectSearch"),o=s("DatePicker"),h=s("FilterForm");return d(),g(h,{"init-form":C,form:p,multiple:["purposes"],onHide:u[4]||(u[4]=c=>y("hide"))},{default:e(()=>[B("div",z,[B("div",J,[t(F,{type:"text",modelValue:p.codeNumber,"onUpdate:modelValue":u[0]||(u[0]=c=>p.codeNumber=c),name:"codeNumber",label:_.$trans("reception.gate_pass.props.code_number")},null,8,["modelValue","label"])]),B("div",K,[f.isLoaded?(d(),g(a,{key:0,multiple:"",name:"purposes",label:_.$trans("global.select",{attribute:_.$trans("reception.gate_pass.purpose.purpose")}),modelValue:p.purposes,"onUpdate:modelValue":u[1]||(u[1]=c=>p.purposes=c),"value-prop":"uuid","init-search":f.purposes,"search-action":"option/list","additional-search-query":{type:"gate_pass_purpose"}},null,8,["label","modelValue","init-search"])):w("",!0)]),B("div",W,[t(o,{start:p.startDate,"onUpdate:start":u[2]||(u[2]=c=>p.startDate=c),end:p.endDate,"onUpdate:end":u[3]||(u[3]=c=>p.endDate=c),name:"dateBetween",as:"range",label:_.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Y={name:"ReceptionGatePassList"},x=Object.assign(Y,{setup(q){const k=E(),b=O("emitter");let y=["filter"];$("reception:config")&&y.push("config"),$("gate-pass:create")&&y.unshift("create");let C=[];$("gate-pass:export")&&(C=["print","pdf","excel"]);const p="reception/gatePass/",f=j(!1),_=I({}),u=a=>{Object.assign(_,a)},F=a=>{let o="/app/reception/gate-passes/"+a.uuid+"/export",h={};window.open(Q(o,h),"_blank").focus()};return(a,o)=>{const h=s("PageHeaderAction"),c=s("PageHeader"),N=s("ParentTransition"),v=s("DataCell"),A=s("TextMuted"),D=s("FloatingMenuItem"),S=s("FloatingMenu"),G=s("DataRow"),L=s("BaseButton"),M=s("DataTable"),H=s("ListItem");return d(),g(H,{"init-url":p,"additional-query":{},onSetItems:u},{header:e(()=>[t(c,{title:a.$trans("reception.gate_pass.gate_pass"),navs:[{label:a.$trans("reception.reception"),path:"Reception"}]},{default:e(()=>[t(h,{url:"reception/gate-passes/",name:"ReceptionGatePass",title:a.$trans("reception.gate_pass.gate_pass"),actions:r(y),"dropdown-actions":r(C),"config-path":"ReceptionConfig",onToggleFilter:o[0]||(o[0]=n=>f.value=!f.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(N,{appear:"",visibility:f.value},{default:e(()=>[t(X,{onRefresh:o[1]||(o[1]=n=>r(b).emit("listItems")),onHide:o[2]||(o[2]=n=>f.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(N,{appear:"",visibility:!0},{default:e(()=>[t(M,{header:_.headers,meta:_.meta,module:"reception.gate_pass",onRefresh:o[4]||(o[4]=n=>r(b).emit("listItems"))},{actionButton:e(()=>[r($)("gate-pass:create")?(d(),g(L,{key:0,onClick:o[3]||(o[3]=n=>r(k).push({name:"ReceptionGatePassCreate"}))},{default:e(()=>[i(l(a.$trans("global.add",{attribute:a.$trans("reception.gate_pass.gate_pass")})),1)]),_:1})):w("",!0)]),default:e(()=>[(d(!0),R(T,null,V(_.data,n=>(d(),g(G,{key:n.uuid},{default:e(()=>[t(v,{name:"codeNumber"},{default:e(()=>[i(l(n.codeNumber),1)]),_:2},1024),t(v,{name:"startAt"},{default:e(()=>[i(l(n.startAt.formatted),1)]),_:2},1024),t(v,{name:"to"},{default:e(()=>[i(l(n.requesterType.label),1)]),_:2},1024),t(v,{name:"name"},{default:e(()=>[(d(!0),R(T,null,V(n.audiences,m=>(d(),R("div",null,[i(l(m.name)+" ",1),t(A,null,{default:e(()=>[i(l(m.detail),1)]),_:2},1024)]))),256))]),_:2},1024),t(v,{name:"purpose"},{default:e(()=>{var m;return[i(l(((m=n.purpose)==null?void 0:m.name)||"-"),1)]}),_:2},1024),t(v,{name:"createdAt"},{default:e(()=>[i(l(n.createdAt.formatted),1)]),_:2},1024),t(v,{name:"action"},{default:e(()=>[t(S,null,{default:e(()=>[t(D,{icon:"fas fa-arrow-circle-right",onClick:m=>r(k).push({name:"ReceptionGatePassShow",params:{uuid:n.uuid}})},{default:e(()=>[i(l(a.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(D,{icon:"fas fa-arrow-circle-right",onClick:m=>F(n)},{default:e(()=>[i(l(a.$trans("global.print",{attribute:a.$trans("reception.gate_pass.gate_pass")})),1)]),_:2},1032,["onClick"]),r($)("gate-pass:edit")?(d(),g(D,{key:0,icon:"fas fa-edit",onClick:m=>r(k).push({name:"ReceptionGatePassEdit",params:{uuid:n.uuid}})},{default:e(()=>[i(l(a.$trans("general.edit")),1)]),_:2},1032,["onClick"])):w("",!0),r($)("gate-pass:create")?(d(),g(D,{key:1,icon:"fas fa-copy",onClick:m=>r(k).push({name:"ReceptionGatePassDuplicate",params:{uuid:n.uuid}})},{default:e(()=>[i(l(a.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):w("",!0),r($)("gate-pass:delete")?(d(),g(D,{key:2,icon:"fas fa-trash",onClick:m=>r(b).emit("deleteItem",{uuid:n.uuid})},{default:e(()=>[i(l(a.$trans("general.delete")),1)]),_:2},1032,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{x as default};
