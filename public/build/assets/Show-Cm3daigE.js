import{m as N,a as p,e as l,w as e,u as d,F as f,r as i,o,y as $,q as c,s as r,t as n,b as _,d as g,v,i as z,f as R,h as E,j as O}from"./app-DCfJDSeM.js";const q={class:"flex items-center"},U={class:"mr-2"},G={class:"grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},J={class:"space-y-4"},K=["innerHTML"],Q={class:"mt-4 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},W={name:"FormShow"},Z=Object.assign(W,{setup(X){z();const b=R(),k=E(),F=O("emitter"),S={},T="form/",t=N({...S}),A=a=>{Object.assign(t,a)},B=a=>t.audiences.filter(u=>u.type===a),h=async a=>{F.emit("showActionItem",{uuid:b.params.uuid,action:"updateStatus",data:{status:a},confirmation:!0})};return(a,u)=>{const y=i("BaseButton"),C=i("PageHeaderAction"),H=i("PageHeader"),L=i("BaseBadge"),m=i("BaseDataView"),w=i("TextMuted"),M=i("BaseFieldset"),P=i("ListMedia"),V=i("ShowButton"),I=i("BaseCard"),j=i("ShowItem"),D=i("ParentTransition");return o(),p(f,null,[l(H,{title:a.$trans(d(b).meta.trans,{attribute:a.$trans(d(b).meta.label)}),navs:[{label:a.$trans("form.form"),path:"Form"}]},{default:e(()=>[l(C,{name:"Form",title:a.$trans("form.form"),actions:["list"]},{after:e(()=>[d($)("form-submission:manage")?(o(),c(y,{key:0,design:"success",size:"sm",onClick:u[0]||(u[0]=s=>d(k).push({name:"FormSubmission",params:{uuid:t.uuid}}))},{default:e(()=>[r(n(a.$trans("form.submission.submission")),1)]),_:1})):_("",!0)]),_:1},8,["title"])]),_:1},8,["title","navs"]),l(D,{appear:"",visibility:!0},{default:e(()=>[l(j,{"init-url":T,uuid:d(b).params.uuid,"module-uuid":d(b).params.muuid,onSetItem:A,onRedirectTo:u[4]||(u[4]=s=>d(k).push({name:"Form",params:{uuid:t.uuid}}))},{default:e(()=>[t.uuid?(o(),c(I,{key:0},{title:e(()=>[g("div",q,[g("span",U,n(t.name),1),l(L,{design:t.status.color},{default:e(()=>[r(n(t.status.label),1)]),_:1},8,["design"])])]),action:e(()=>[t.status.value=="draft"&&d($)("form:edit")?(o(),c(y,{key:0,design:"primary",size:"sm",onClick:u[1]||(u[1]=s=>h("publish"))},{default:e(()=>[r(n(a.$trans("form.action.publish")),1)]),_:1})):_("",!0),t.status.value=="published"?(o(),c(y,{key:1,design:"danger",size:"sm",onClick:u[2]||(u[2]=s=>h("draft")&&d($)("form:edit"))},{default:e(()=>[r(n(a.$trans("form.action.unpublish")),1)]),_:1})):_("",!0)]),footer:e(()=>[l(V,null,{default:e(()=>[d($)("form:edit")?(o(),c(y,{key:0,design:"primary",onClick:u[3]||(u[3]=s=>d(k).push({name:"FormEdit",params:{uuid:t.uuid}}))},{default:e(()=>[r(n(a.$trans("general.edit")),1)]),_:1})):_("",!0)]),_:1})]),default:e(()=>[g("dl",G,[l(m,{label:a.$trans("form.props.due_date")},{default:e(()=>[r(n(t.dueDate.formatted),1)]),_:1},8,["label"]),l(m,{label:a.$trans("form.props.summary")},{default:e(()=>[r(n(t.summary),1)]),_:1},8,["label"]),l(m,{label:a.$trans("form.props.audience")},{default:e(()=>[r(n(t.studentAudienceType.label)+" ",1),(o(!0),p(f,null,v(B("student"),s=>(o(),c(w,{block:""},{default:e(()=>[r(n(s.name),1)]),_:2},1024))),256))]),_:1},8,["label"]),l(m,{label:a.$trans("form.props.audience")},{default:e(()=>[t.employeeAudienceType.value?(o(),p(f,{key:0},[r(n(t.employeeAudienceType.label)+" ",1),(o(!0),p(f,null,v(B("employee"),s=>(o(),c(w,{block:""},{default:e(()=>[r(n(s.name),1)]),_:2},1024))),256))],64)):(o(),p(f,{key:1},[r("-")],64))]),_:1},8,["label"])]),l(M,{class:"mt-4"},{legend:e(()=>[r(n(a.$trans("form.props.fields")),1)]),default:e(()=>[g("div",J,[(o(!0),p(f,null,v(t.fields,s=>(o(),c(m,{key:s.uuid,label:s.showLabel?s.label:"",class:"col-span-1 sm:col-span-2"},{default:e(()=>[s.type.value=="paragraph"?(o(),p("div",{key:0,innerHTML:s.content},null,8,K)):s.type.value=="camera_image"||s.type.value=="file_upload"?(o(),p(f,{key:1},[r(n(s.name)+" ("+n(s.type.label)+") ",1)],64)):(o(),p(f,{key:2},[r(n(s.type.label),1)],64))]),_:2},1032,["label"]))),128))])]),_:1}),g("dl",Q,[l(m,{label:a.$trans("form.props.description"),class:"col-span-1 sm:col-span-2"},{default:e(()=>[r(n(t.description),1)]),_:1},8,["label"]),t.media.length>0?(o(),c(m,{key:0,class:"col-span-1 sm:col-span-2"},{default:e(()=>[l(P,{media:t.media,url:`/app/forms/${t.uuid}/`},null,8,["media","url"])]),_:1})):_("",!0),l(m,{label:a.$trans("general.created_at")},{default:e(()=>[r(n(t.createdAt.formatted),1)]),_:1},8,["label"]),l(m,{label:a.$trans("general.updated_at")},{default:e(()=>[r(n(t.updatedAt.formatted),1)]),_:1},8,["label"])])]),_:1})):_("",!0)]),_:1},8,["uuid","module-uuid"])]),_:1})],64)}}});export{Z as default};
