import{m as B,r as o,o as d,q as $,w as e,d as T,e as n,c as w,l as N,u as i,s as r,t as l,b as F,a as y,v as E,F as O,h as U,i as q,j as z}from"./app-DCfJDSeM.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",emits:["hide"],setup(D,{emit:f}){const p=f,_={name:""},u=B({..._});return(k,m)=>{const C=o("BaseInput"),g=o("FilterForm");return d(),$(g,{"init-form":_,form:u,onHide:m[1]||(m[1]=c=>p("hide"))},{default:e(()=>[T("div",G,[T("div",J,[n(C,{type:"text",modelValue:u.name,"onUpdate:modelValue":m[0]||(m[0]=c=>u.name=c),name:"name",label:k.$trans("team.props.name")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},Q={key:0},W={name:"TodoList"},Y=Object.assign(W,{setup(D){const f=U(),p=q(),_=z("emitter"),u=w(()=>p.getters["auth/user/currentTeamId"]),k=w(()=>p.getters["auth/user/isSuperAdmin"]);let m=["filter"];k.value&&m.unshift("create");const C="team/",g=N(!1),c=B({}),V=t=>{Object.assign(c,t)},A=async t=>{t.id!=u.value&&await p.dispatch("team/select",{uuid:t.uuid}).then(async s=>{await p.dispatch("auth/user/fetch"),location.reload()}).catch(s=>{})};return(t,s)=>{const H=o("PageHeaderAction"),P=o("PageHeader"),I=o("ParentTransition"),b=o("DataCell"),v=o("FloatingMenuItem"),S=o("FloatingMenu"),R=o("DataRow"),j=o("BaseButton"),L=o("DataTable"),M=o("ListItem");return d(),$(M,{"init-url":C,onSetItems:V},{header:e(()=>[n(P,{title:t.$trans("team.team")},{default:e(()=>[n(H,{url:"teams/",name:"Team",title:t.$trans("team.team"),actions:i(m),"dropdown-actions":["print","pdf","excel"],onToggleFilter:s[0]||(s[0]=a=>g.value=!g.value)},null,8,["title","actions"])]),_:1},8,["title"])]),filter:e(()=>[n(I,{appear:"",visibility:g.value},{default:e(()=>[n(K,{onRefresh:s[1]||(s[1]=a=>i(_).emit("listItems")),onHide:s[2]||(s[2]=a=>g.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[n(I,{appear:"",visibility:!0},{default:e(()=>[n(L,{header:c.headers,meta:c.meta,module:"team",onRefresh:s[4]||(s[4]=a=>i(_).emit("listItems"))},{actionButton:e(()=>[k.value?(d(),$(j,{key:0,onClick:s[3]||(s[3]=a=>i(f).push({name:"TeamCreate"}))},{default:e(()=>[r(l(t.$trans("global.add",{attribute:t.$trans("team.team")})),1)]),_:1})):F("",!0)]),default:e(()=>[(d(!0),y(O,null,E(c.data,a=>(d(),$(R,{key:a.uuid},{default:e(()=>[n(b,{name:"name"},{default:e(()=>[r(l(a.name)+" ",1),a.id==u.value?(d(),y("span",Q,s[5]||(s[5]=[T("i",{class:"fas fa-check-circle fa-lg text-success cursor-pointer"},null,-1)]))):F("",!0)]),_:2},1024),n(b,{name:"createdAt"},{default:e(()=>[r(l(a.createdAt.formatted),1)]),_:2},1024),n(b,{name:"action"},{default:e(()=>[n(S,null,{default:e(()=>[a.id!=u.value?(d(),$(v,{key:0,icon:"fas fa-check-circle",onClick:h=>A(a)},{default:e(()=>[r(l(t.$trans("global.select",{attribute:t.$trans("team.team")})),1)]),_:2},1032,["onClick"])):F("",!0),n(v,{icon:"fas fa-cog",onClick:h=>i(f).push({name:"TeamConfig",params:{uuid:a.uuid}})},{default:e(()=>[r(l(t.$trans("team.config.config")),1)]),_:2},1032,["onClick"]),n(v,{icon:"fas fa-arrow-circle-right",onClick:h=>i(f).push({name:"TeamShow",params:{uuid:a.uuid}})},{default:e(()=>[r(l(t.$trans("general.show")),1)]),_:2},1032,["onClick"]),n(v,{icon:"fas fa-edit",onClick:h=>i(f).push({name:"TeamEdit",params:{uuid:a.uuid}})},{default:e(()=>[r(l(t.$trans("general.edit")),1)]),_:2},1032,["onClick"]),n(v,{icon:"fas fa-trash",onClick:h=>i(_).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[r(l(t.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Y as default};
