import{G as x,m as h,a as S,q as j,w as l,u as t,b as H,e as n,F as N,j as P,r,o as V,d as u,s as g,t as m,f as A,h as E,i as G}from"./app-DCfJDSeM.js";const L={class:"space-x-4"},$={class:"grid grid-cols-2 gap-6"},q={class:"col-span-2"},z={class:"col-span-2 sm:col-span-1"},D={class:"col-span-2 sm:col-span-1"},W={name:"TeamConfigUserPermission"},J=Object.assign(W,{props:{team:{type:Object,default(){return{name:""}}}},setup(f){const c=A(),B=E(),_=G(),o=P("$trans"),p="team/permission/",i=x(p),v={action:"",users:[],permissions:[]};h({});const a=h({...v}),C=[{label:o("general.assign"),value:"assign"},{label:o("general.revoke"),value:"revoke"}],y=async d=>await _.dispatch(p+"search",{query:d,uuid:c.params.uuid}).then(s=>s).catch(s=>{}),U=async d=>await _.dispatch(p+"searchUser",{query:d,uuid:c.params.uuid}).then(s=>s).catch(s=>{});return(d,s)=>{const k=r("BaseButton"),T=r("PageHeader"),w=r("CardHeader"),O=r("BaseRadioGroup"),b=r("BaseSelect"),F=r("FormAction"),R=r("ParentTransition");return V(),S(N,null,[f.team.uuid?(V(),j(T,{key:0,title:t(o)(t(c).meta.label),navs:[{label:t(o)("team.team"),path:"TeamList"},{label:f.team.name,path:{name:"TeamShow",params:{uuid:f.team.uuid}}},{label:t(o)("team.config.config"),path:"TeamConfig"}]},{default:l(()=>[u("div",L,[n(k,{onClick:s[0]||(s[0]=e=>t(B).push({name:"TeamConfigPermission"}))},{default:l(()=>[g(m(t(o)("team.config.permission.role_permission")),1)]),_:1})])]),_:1},8,["title","navs"])):H("",!0),n(R,{appear:"",visibility:!0},{default:l(()=>[n(F,{"no-data-fetch":"","init-url":p,uuid:t(c).params.uuid,action:"userWiseAssign","init-form":v,form:a,"reset-form":"","keep-adding":!1},{default:l(()=>[n(w,{first:"",title:t(o)("team.config.permission.user_permission_config"),description:t(o)("team.config.permission.user_permission_info")},null,8,["title","description"]),u("div",$,[u("div",q,[n(O,{options:C,name:"action",modelValue:a.action,"onUpdate:modelValue":s[1]||(s[1]=e=>a.action=e),error:t(i).action,"onUpdate:error":s[2]||(s[2]=e=>t(i).action=e),horizontal:""},null,8,["modelValue","error"])]),u("div",z,[n(b,{modelValue:a.users,"onUpdate:modelValue":s[3]||(s[3]=e=>a.users=e),filterResults:!1,minChars:1,resolveOnLoad:!1,delay:500,multiple:"",name:"users","value-prop":"uuid",options:async function(e){return await U(e)},label:t(o)("global.select",{attribute:t(o)("user.user")}),error:t(i).users,"onUpdate:error":s[4]||(s[4]=e=>t(i).users=e)},{selectedOption:l(e=>[g(m(e.value.profile.name)+" ("+m(e.value.email)+") ",1)]),listOption:l(e=>[g(m(e.option.profile.name)+" ("+m(e.option.email)+") ",1)]),_:1},8,["modelValue","options","label","error"])]),u("div",D,[n(b,{modelValue:a.permissions,"onUpdate:modelValue":s[5]||(s[5]=e=>a.permissions=e),filterResults:!1,minChars:1,resolveOnLoad:!1,delay:500,multiple:"",name:"permissions",options:async function(e){return await y(e)},label:t(o)("global.select",{attribute:t(o)("team.config.permission.permission")}),error:t(i).permissions,"onUpdate:error":s[6]||(s[6]=e=>t(i).permissions=e)},null,8,["modelValue","options","label","error"])])])]),_:1},8,["uuid","form"])]),_:1})],64)}}});export{J as default};
