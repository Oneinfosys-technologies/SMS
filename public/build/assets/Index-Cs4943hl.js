import{f as A,m as h,n as X,r as o,o as r,q as f,w as e,d as u,e as n,y as k,c as Y,l as L,a as I,u as s,F as G,b as y,s as m,t as d,v as V,h as Z,j as ee}from"./app-DCfJDSeM.js";import{F as te}from"./v3-CeDQHzCG.js";const ae={class:"grid grid-cols-3 gap-6"},se={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},le={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(H,{emit:P}){A();const _=P,b={title:"",startDate:"",endDate:""},c=h({...b});h({});const q=h({isLoaded:!0});return X(async()=>{q.isLoaded=!0}),(D,i)=>{const $=o("BaseInput"),C=o("DatePicker"),F=o("FilterForm");return r(),f(F,{"init-form":b,form:c,multiple:[],onHide:i[3]||(i[3]=p=>_("hide"))},{default:e(()=>[u("div",ae,[u("div",se,[n($,{type:"text",modelValue:c.title,"onUpdate:modelValue":i[0]||(i[0]=p=>c.title=p),name:"title",label:D.$trans("gallery.props.title")},null,8,["modelValue","label"])]),u("div",ne,[n(C,{start:c.startDate,"onUpdate:start":i[1]||(i[1]=p=>c.startDate=p),end:c.endDate,"onUpdate:end":i[2]||(i[2]=p=>c.endDate=p),name:"dateBetween",as:"range",label:D.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},oe={class:"mt-4 grid grid-cols-3 gap-4"},re=["onClick"],ie={class:"relative h-72 flex border border-gray-200 dark:border-gray-700 shadow-lg"},ue={class:"relative overflow-hidden w-full h-full"},de=["src"],me={class:"absolute py-1 bottom-0 w-full bg-black opacity-70 flex items-center justify-center rounded-b-lg"},ce={class:"px-4 text-center truncate text-gray-50"},pe={class:"mt-1 block text-gray-50 text-xs"},fe={name:"GalleryList"},ye=Object.assign(fe,{setup(H){const P=A(),_=Z(),b=ee("emitter");let c=["filter"];k("gallery:create")&&c.unshift("create");let q=[];const D="gallery/",i=Y(()=>P.query.view||"card"),$=L(!1),C=L(!1),F=h({}),p=h({images:[]}),v=h({}),T=l=>{p.images=l.images.map(t=>t.url),C.value=!C.value},x=()=>{p.images=[]},E=()=>{},M=l=>{Object.assign(v,l)},O=l=>{Object.assign(F,l)};return(l,t)=>{const R=o("BaseButton"),S=o("PageHeaderAction"),U=o("PageHeader"),j=o("ParentTransition"),w=o("DataCell"),B=o("FloatingMenuItem"),N=o("FloatingMenu"),z=o("DataRow"),J=o("DataTable"),K=o("EmptyCard"),Q=o("Pagination"),W=o("ListItem");return r(),I(G,null,[n(W,{"pre-requisites":!0,onSetPreRequisites:O,"init-url":D,onSetItems:M},{header:e(()=>[n(U,{title:l.$trans("gallery.gallery"),navs:[{label:l.$trans("gallery.gallery"),path:"Gallery"}]},{default:e(()=>[n(S,{url:"galleries/",name:"Gallery",title:l.$trans("gallery.gallery"),actions:s(c),"dropdown-actions":s(q),headers:v.headers,onToggleFilter:t[2]||(t[2]=a=>$.value=!$.value)},{after:e(()=>[s(k)("gallery:edit")&&i.value!="list"?(r(),f(R,{key:0,design:"white",onClick:t[0]||(t[0]=a=>s(_).push({query:{view:"list"}}))},{default:e(()=>t[8]||(t[8]=[u("i",{class:"fas fa-list"},null,-1)])),_:1})):y("",!0),s(k)("gallery:edit")&&i.value!="card"?(r(),f(R,{key:1,design:"white",onClick:t[1]||(t[1]=a=>s(_).push({query:{view:"card"}}))},{default:e(()=>t[9]||(t[9]=[u("i",{class:"fas fa-image"},null,-1)])),_:1})):y("",!0)]),_:1},8,["title","actions","dropdown-actions","headers"])]),_:1},8,["title","navs"])]),filter:e(()=>[n(j,{appear:"",visibility:$.value},{default:e(()=>[n(le,{"pre-requisites":F,onRefresh:t[3]||(t[3]=a=>s(b).emit("listItems")),onHide:t[4]||(t[4]=a=>$.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[i.value=="list"?(r(),f(j,{key:0,appear:"",visibility:!0},{default:e(()=>[n(J,{header:v.headers,meta:v.meta,module:"gallery",onRefresh:t[6]||(t[6]=a=>s(b).emit("listItems"))},{actionButton:e(()=>[s(k)("gallery:create")?(r(),f(R,{key:0,onClick:t[5]||(t[5]=a=>s(_).push({name:"GalleryCreate"}))},{default:e(()=>[m(d(l.$trans("global.add",{attribute:l.$trans("gallery.gallery")})),1)]),_:1})):y("",!0)]),default:e(()=>[(r(!0),I(G,null,V(v.data,a=>(r(),f(z,{key:a.uuid},{default:e(()=>[n(w,{name:"title"},{default:e(()=>[m(d(a.titleExcerpt),1)]),_:2},1024),n(w,{name:"type"},{default:e(()=>[m(d(a.type.label),1)]),_:2},1024),n(w,{name:"date"},{default:e(()=>[m(d(a.date.formatted),1)]),_:2},1024),n(w,{name:"imagesCount"},{default:e(()=>[m(d(a.imagesCount),1)]),_:2},1024),n(w,{name:"createdAt"},{default:e(()=>[m(d(a.createdAt.formatted),1)]),_:2},1024),n(w,{name:"action"},{default:e(()=>[n(N,null,{default:e(()=>[n(B,{icon:"fas fa-arrow-circle-right",onClick:g=>s(_).push({name:"GalleryShow",params:{uuid:a.uuid}})},{default:e(()=>[m(d(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),s(k)("gallery:edit")?(r(),f(B,{key:0,icon:"fas fa-edit",onClick:g=>s(_).push({name:"GalleryEdit",params:{uuid:a.uuid}})},{default:e(()=>[m(d(l.$trans("general.edit")),1)]),_:2},1032,["onClick"])):y("",!0),s(k)("gallery:create")?(r(),f(B,{key:1,icon:"fas fa-copy",onClick:g=>s(_).push({name:"GalleryDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[m(d(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):y("",!0),s(k)("gallery:delete")?(r(),f(B,{key:2,icon:"fas fa-trash",onClick:g=>s(b).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[m(d(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})):y("",!0),i.value=="card"?(r(),f(j,{key:1,appear:"",visibility:!0},{default:e(()=>{var a;return[u("div",oe,[(r(!0),I(G,null,V(v.data,g=>(r(),I("div",{class:"col-span-3 sm:col-span-1 cursor-pointer",onClick:ge=>T(g)},[u("div",ie,[u("div",ue,[u("img",{src:g.thumbnailUrl,class:"w-full h-full object-cover rounded-lg"},null,8,de),u("div",me,[u("div",ce,[m(d(g.title)+" ",1),u("span",pe,d(g.date.formatted),1)])])])])],8,re))),256))]),n(K,{total:(a=v.meta)==null?void 0:a.total},null,8,["total"]),u("div",null,[n(Q,{"card-view":"",transparent:"",meta:v.meta,onRefresh:t[7]||(t[7]=g=>s(b).emit("listItems"))},null,8,["meta"])])]}),_:1})):y("",!0)]),_:1}),n(s(te),{toggler:C.value,slide:1,sources:p.images,"on-close":x,onOpen:E},null,8,["toggler","sources"])],64)}}});export{ye as default};
