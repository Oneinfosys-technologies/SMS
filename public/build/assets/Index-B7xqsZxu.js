import{m as V,r as n,o as r,q as d,w as e,d as I,e as a,y as F,l as M,u,b as _,s as i,t as s,a as w,v as N,F as S,f as U,h as O,j as q}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={__name:"Filter",emits:["hide"],setup(o,{emit:B}){const p=B,c={title:""},$=V({...c});return(k,f)=>{const y=n("BaseInput"),g=n("FilterForm");return r(),d(g,{"init-form":c,form:$,onHide:f[1]||(f[1]=D=>p("hide"))},{default:e(()=>[I("div",z,[I("div",G,[a(y,{type:"text",modelValue:$.title,"onUpdate:modelValue":f[0]||(f[0]=D=>$.title=D),name:"title",label:k.$trans("employee.document.props.title")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},K={name:"EmployeeDocumentList"},W=Object.assign(K,{props:{employee:{type:Object,default(){return{}}}},setup(o){const B=U(),p=O(),c=q("emitter"),$=o;let k=["filter"];(F("employee:edit")||$.employee.selfService)&&k.unshift("create");const f="employee/document/",y=M(!1),g=V({}),D=l=>{Object.assign(g,l)};return(l,m)=>{const H=n("PageHeaderAction"),P=n("PageHeader"),h=n("ParentTransition"),E=n("BaseBadge"),v=n("DataCell"),b=n("FloatingMenuItem"),R=n("FloatingMenu"),T=n("DataRow"),j=n("BaseButton"),A=n("DataTable"),L=n("ListItem");return r(),d(L,{"init-url":f,uuid:u(B).params.uuid,onSetItems:D},{header:e(()=>[o.employee.uuid?(r(),d(P,{key:0,title:l.$trans("employee.document.document"),navs:[{label:l.$trans("employee.employee"),path:"Employee"},{label:o.employee.contact.name,path:{name:"EmployeeShow",params:{uuid:o.employee.uuid}}}]},{default:e(()=>[a(H,{url:`employees/${o.employee.uuid}/documents/`,name:"EmployeeDocument",title:l.$trans("employee.document.document"),actions:u(k),"dropdown-actions":["print","pdf","excel"],onToggleFilter:m[0]||(m[0]=t=>y.value=!y.value)},null,8,["url","title","actions"])]),_:1},8,["title","navs"])):_("",!0)]),filter:e(()=>[a(h,{appear:"",visibility:y.value},{default:e(()=>[a(J,{onRefresh:m[1]||(m[1]=t=>u(c).emit("listItems")),onHide:m[2]||(m[2]=t=>y.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(h,{appear:"",visibility:!0},{default:e(()=>[a(A,{header:g.headers,meta:g.meta,module:"employee.document",onRefresh:m[4]||(m[4]=t=>u(c).emit("listItems"))},{actionButton:e(()=>[u(F)("employee:edit")||o.employee.selfService?(r(),d(j,{key:0,onClick:m[3]||(m[3]=t=>u(p).push({name:"EmployeeDocumentCreate"}))},{default:e(()=>[i(s(l.$trans("global.add",{attribute:l.$trans("employee.document.document")})),1)]),_:1})):_("",!0)]),default:e(()=>[(r(!0),w(S,null,N(g.data,t=>(r(),d(T,{key:t.uuid},{default:e(()=>[a(v,{name:"title"},{default:e(()=>[i(s(t.title)+" ",1),t.selfUpload?(r(),d(E,{key:0,design:t.verificationStatus.color},{default:e(()=>[i(s(t.verificationStatus.label),1)]),_:2},1032,["design"])):_("",!0)]),_:2},1024),a(v,{name:"type"},{default:e(()=>[i(s(t.type.name),1)]),_:2},1024),a(v,{name:"startDate"},{default:e(()=>[i(s(t.startDate.formatted),1)]),_:2},1024),a(v,{name:"endDate"},{default:e(()=>[i(s(t.endDate.formatted)+" ",1),t.isExpired?(r(),d(E,{key:0,design:"danger"},{default:e(()=>[i(s(l.$trans("employee.document.expired")),1)]),_:1})):_("",!0)]),_:2},1024),a(v,{name:"createdAt"},{default:e(()=>[i(s(t.createdAt.formatted),1)]),_:2},1024),a(v,{name:"action"},{default:e(()=>[a(R,null,{default:e(()=>[a(b,{icon:"fas fa-arrow-circle-right",onClick:C=>u(p).push({name:"EmployeeDocumentShow",params:{uuid:o.employee.uuid,muuid:t.uuid}})},{default:e(()=>[i(s(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),u(F)("employee:edit")||o.employee.selfService?(r(),w(S,{key:0},[a(b,{icon:"fas fa-edit",onClick:C=>u(p).push({name:"EmployeeDocumentEdit",params:{uuid:o.employee.uuid,muuid:t.uuid}})},{default:e(()=>[i(s(l.$trans("general.edit")),1)]),_:2},1032,["onClick"]),a(b,{icon:"fas fa-copy",onClick:C=>u(p).push({name:"EmployeeDocumentDuplicate",params:{uuid:o.employee.uuid,muuid:t.uuid}})},{default:e(()=>[i(s(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),a(b,{icon:"fas fa-trash",onClick:C=>u(c).emit("deleteItem",{uuid:o.employee.uuid,moduleUuid:t.uuid})},{default:e(()=>[i(s(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])],64)):_("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1},8,["uuid"])}}});export{W as default};
