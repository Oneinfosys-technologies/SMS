import{f as E,m as k,n as U,r as n,o as i,q as f,w as e,d as w,s as c,t as o,b as v,e as a,y,l as W,u as l,a as D,v as L,F as M,h as z,j as G}from"./app-DCfJDSeM.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},X={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(V,{emit:h}){const m=E(),g=h,R=V,q={batches:[],subjects:[]},p=k({...q}),C=k({subjects:R.preRequisites.subjects}),b=k({batches:[],subjects:[],isLoaded:!(m.query.batches||m.query.subjects)});return U(async()=>{b.batches=m.query.batches?m.query.batches.split(","):[],b.subjects=m.query.subjects?m.query.subjects.split(","):[],b.isLoaded=!0}),(j,_)=>{const s=n("BaseSelectSearch"),u=n("BaseSelect"),B=n("FilterForm");return i(),f(B,{"init-form":q,form:p,multiple:["batches","subjects"],onHide:_[2]||(_[2]=r=>g("hide"))},{default:e(()=>[w("div",J,[w("div",K,[b.isLoaded?(i(),f(s,{key:0,multiple:"",name:"batches",label:j.$trans("global.select",{attribute:j.$trans("academic.batch.batch")}),modelValue:p.batches,"onUpdate:modelValue":_[0]||(_[0]=r=>p.batches=r),"value-prop":"uuid","init-search":b.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:e(r=>[c(o(r.value.course.name)+" "+o(r.value.name),1)]),listOption:e(r=>[c(o(r.option.course.nameWithTerm)+" "+o(r.option.name),1)]),_:1},8,["label","modelValue","init-search"])):v("",!0)]),w("div",Q,[a(u,{multiple:"",modelValue:p.subjects,"onUpdate:modelValue":_[1]||(_[1]=r=>p.subjects=r),name:"subjects",label:j.$trans("academic.subject.subject"),"label-prop":"name","value-prop":"uuid",options:C.subjects},null,8,["modelValue","label","options"])])])]),_:1},8,["form"])}}},Y={name:"ResourceSyllabusList"},x=Object.assign(Y,{setup(V){const h=z(),m=G("emitter");let g=["filter"];y("resource:config")&&g.push("config"),y("syllabus:create")&&g.unshift("create");let R=[];y("syllabus:export")&&(R=["print","pdf","excel"]);const q="resource/syllabus/",p=W(!1),C=k({subjects:[]}),b=k({}),j=s=>{Object.assign(C,s)},_=s=>{Object.assign(b,s)};return(s,u)=>{const B=n("PageHeaderAction"),r=n("PageHeader"),I=n("ParentTransition"),T=n("TextMuted"),S=n("DataCell"),F=n("FloatingMenuItem"),A=n("FloatingMenu"),H=n("DataRow"),O=n("BaseButton"),P=n("DataTable"),N=n("ListItem");return i(),f(N,{"init-url":q,"pre-requisites":!0,onSetPreRequisites:j,"additional-query":{},onSetItems:_},{header:e(()=>[a(r,{title:s.$trans("resource.syllabus.syllabus"),navs:[{label:s.$trans("resource.resource"),path:"Resource"}]},{default:e(()=>[a(B,{url:"resource/syllabuses/",name:"ResourceSyllabus",title:s.$trans("resource.syllabus.syllabus"),actions:l(g),"dropdown-actions":l(R),"config-path":"ResourceConfig",onToggleFilter:u[0]||(u[0]=t=>p.value=!p.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[a(I,{appear:"",visibility:p.value},{default:e(()=>[a(X,{onRefresh:u[1]||(u[1]=t=>l(m).emit("listItems")),"pre-requisites":C,onHide:u[2]||(u[2]=t=>p.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[a(I,{appear:"",visibility:!0},{default:e(()=>[a(P,{header:b.headers,meta:b.meta,module:"resource.syllabus",onRefresh:u[4]||(u[4]=t=>l(m).emit("listItems"))},{actionButton:e(()=>[l(y)("syllabus:create")?(i(),f(O,{key:0,onClick:u[3]||(u[3]=t=>l(h).push({name:"ResourceSyllabusCreate"}))},{default:e(()=>[c(o(s.$trans("global.add",{attribute:s.$trans("resource.syllabus.syllabus")})),1)]),_:1})):v("",!0)]),default:e(()=>[(i(!0),D(M,null,L(b.data,t=>(i(),f(H,{key:t.uuid},{default:e(()=>[a(S,{name:"records"},{default:e(()=>[(i(!0),D(M,null,L(t.records,d=>{var $;return i(),D("div",null,[c(o((($=d.batch.course)==null?void 0:$.name)+" "+d.batch.name)+" ",1),d.subject?(i(),f(T,{key:0},{default:e(()=>[c(o(d.subject.name),1)]),_:2},1024)):v("",!0)])}),256))]),_:2},1024),a(S,{name:"employee"},{default:e(()=>{var d;return[c(o(((d=t.employee)==null?void 0:d.name)||"-")+" ",1),a(T,{block:""},{default:e(()=>{var $;return[c(o(($=t.employee)==null?void 0:$.codeNumber),1)]}),_:2},1024)]}),_:2},1024),a(S,{name:"createdAt"},{default:e(()=>[c(o(t.createdAt.formatted),1)]),_:2},1024),a(S,{name:"action"},{default:e(()=>[a(A,null,{default:e(()=>[a(F,{icon:"fas fa-arrow-circle-right",onClick:d=>l(h).push({name:"ResourceSyllabusShow",params:{uuid:t.uuid}})},{default:e(()=>[c(o(s.$trans("general.show")),1)]),_:2},1032,["onClick"]),l(y)("syllabus:edit")&&t.isEditable?(i(),f(F,{key:0,icon:"fas fa-edit",onClick:d=>l(h).push({name:"ResourceSyllabusEdit",params:{uuid:t.uuid}})},{default:e(()=>[c(o(s.$trans("general.edit")),1)]),_:2},1032,["onClick"])):v("",!0),l(y)("syllabus:create")?(i(),f(F,{key:1,icon:"fas fa-copy",onClick:d=>l(h).push({name:"ResourceSyllabusDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[c(o(s.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):v("",!0),l(y)("syllabus:delete")&&t.isDeletable?(i(),f(F,{key:2,icon:"fas fa-trash",onClick:d=>l(m).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[c(o(s.$trans("general.delete")),1)]),_:2},1032,["onClick"])):v("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{x as default};
