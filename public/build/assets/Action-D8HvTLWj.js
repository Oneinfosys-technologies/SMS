import{f as S,E as N,G as J,m as L,n as K,r as p,o as f,q as D,w as m,d as l,e as i,u as s,s as V,t as u,b as O,a as H,F as T,v as Q,L as W,I as X}from"./app-DCfJDSeM.js";const Y={class:"grid grid-cols-4 gap-6"},Z={class:"col-span-4 sm:col-span-1"},x={class:"col-span-4 sm:col-span-1"},ee={class:"col-span-4 sm:col-span-1"},oe={class:"col-span-4 sm:col-span-1"},re={class:"mt-4 grid grid-cols-3 gap-6"},ae={class:"col-span-3 sm:col-span-1"},se={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},le=["onClick"],ie={class:"mt-4 grid grid-cols-4 gap-4"},de={class:"col-span-4 sm:col-span-1"},pe={class:"col-span-4 sm:col-span-1"},ue={class:"col-span-4 sm:col-span-1"},me={class:"col-span-4 sm:col-span-1"},ce={class:"mt-4"},be={class:"mt-4 grid grid-cols-1"},ye={class:"col"},ge={class:"col"},Ve={name:"ReceptionEnquiryForm"},ve=Object.assign(Ve,{setup(C){const v=S(),c={period:"",date:"",type:"",source:"",employee:"",name:"",email:"",contactNumber:"",records:[],remarks:"",media:[],mediaUpdated:!1,mediaToken:N(),mediaHash:[]},F={uuid:N(),name:"",birthDate:"",gender:"",course:""},q="reception/enquiry/",t=J(q),b=L({types:[],sources:[],genders:[],periods:[]}),a=L({...c}),y=L({isLoaded:!v.params.uuid}),w=r=>{Object.assign(b,r)},A=()=>{a.mediaToken=N(),a.mediaHash=[]},E=()=>{a.records.push({...F,uuid:N()}),y.isLoaded=!0},P=async r=>{await W()&&(a.records.length==1?a.records=[F]:a.records.splice(r,1))},j=r=>{var $,_,g,k;let o=r.records.map(U=>{var B,h,R;return{...U,birthDate:((B=U.birthDate)==null?void 0:B.value)||"",gender:((h=U.gender)==null?void 0:h.value)||"",course:((R=U.course)==null?void 0:R.uuid)||""}});Object.assign(c,{...r,date:r.date.value,period:r.period.uuid,type:(($=r.type)==null?void 0:$.uuid)||"",source:((_=r.source)==null?void 0:_.uuid)||"",employee:((g=r.employee)==null?void 0:g.uuid)||"",records:o}),Object.assign(a,X(c)),y.employee=(k=r.employee)==null?void 0:k.uuid,y.isLoaded=!0},M=()=>{y.isLoaded&&a.records.forEach(r=>{r.course=""})};return K(async()=>{v.params.uuid||E()}),(r,o)=>{const $=p("BaseSelect"),_=p("DatePicker"),g=p("BaseInput"),k=p("BaseSelectSearch"),U=p("BaseLabel"),B=p("BaseRadioGroup"),h=p("BaseFieldset"),R=p("BaseBadge"),I=p("BaseTextarea"),G=p("MediaUpload"),z=p("FormAction");return f(),D(z,{"pre-requisites":!0,onSetPreRequisites:w,"init-url":q,"init-form":c,form:a,"set-form":j,redirect:"ReceptionEnquiry",onResetMediaFiles:A},{default:m(()=>[l("div",Y,[l("div",Z,[i($,{modelValue:a.period,"onUpdate:modelValue":o[0]||(o[0]=e=>a.period=e),name:"period",label:r.$trans("global.select",{attribute:r.$trans("academic.period.period")}),options:b.periods,"label-prop":"name","value-prop":"uuid",error:s(t).period,"onUpdate:error":o[1]||(o[1]=e=>s(t).period=e),onChange:M},null,8,["modelValue","label","options","error"])]),l("div",x,[i(_,{modelValue:a.date,"onUpdate:modelValue":o[2]||(o[2]=e=>a.date=e),name:"date",label:r.$trans("reception.enquiry.props.date"),"no-clear":"",error:s(t).date,"onUpdate:error":o[3]||(o[3]=e=>s(t).date=e)},null,8,["modelValue","label","error"])]),l("div",ee,[i($,{modelValue:a.type,"onUpdate:modelValue":o[4]||(o[4]=e=>a.type=e),name:"type",label:r.$trans("reception.enquiry.props.type"),options:b.types,"label-prop":"name","value-prop":"uuid",error:s(t).type,"onUpdate:error":o[5]||(o[5]=e=>s(t).type=e)},null,8,["modelValue","label","options","error"])]),l("div",oe,[i($,{modelValue:a.source,"onUpdate:modelValue":o[6]||(o[6]=e=>a.source=e),name:"source",label:r.$trans("reception.enquiry.props.source"),options:b.sources,"label-prop":"name","value-prop":"uuid",error:s(t).source,"onUpdate:error":o[7]||(o[7]=e=>s(t).source=e)},null,8,["modelValue","label","options","error"])])]),l("div",re,[l("div",ae,[i(g,{type:"text",modelValue:a.name,"onUpdate:modelValue":o[8]||(o[8]=e=>a.name=e),name:"name",label:r.$trans("reception.enquiry.props.name"),error:s(t).name,"onUpdate:error":o[9]||(o[9]=e=>s(t).name=e)},null,8,["modelValue","label","error"])]),l("div",se,[i(g,{type:"text",modelValue:a.email,"onUpdate:modelValue":o[10]||(o[10]=e=>a.email=e),name:"email",label:r.$trans("reception.enquiry.props.email"),error:s(t).email,"onUpdate:error":o[11]||(o[11]=e=>s(t).email=e)},null,8,["modelValue","label","error"])]),l("div",te,[i(g,{type:"text",modelValue:a.contactNumber,"onUpdate:modelValue":o[12]||(o[12]=e=>a.contactNumber=e),name:"contactNumber",label:r.$trans("reception.enquiry.props.contact_number"),error:s(t).contactNumber,"onUpdate:error":o[13]||(o[13]=e=>s(t).contactNumber=e)},null,8,["modelValue","label","error"])]),l("div",ne,[y.isLoaded?(f(),D(k,{key:0,name:"employee",label:r.$trans("employee.employee"),placeholder:r.$trans("global.select",{attribute:r.$trans("employee.employee")}),modelValue:a.employee,"onUpdate:modelValue":o[14]||(o[14]=e=>a.employee=e),error:s(t).employee,"onUpdate:error":o[15]||(o[15]=e=>s(t).employee=e),"value-prop":"uuid","init-search":y.employee,"search-key":"name","search-action":"employee/summary"},{selectedOption:m(e=>[V(u(e.value.name)+" ("+u(e.value.designation)+") ",1)]),listOption:m(e=>[V(u(e.option.name)+" ("+u(e.option.designation)+") ",1)]),_:1},8,["label","placeholder","modelValue","error","init-search"])):O("",!0)])]),(f(!0),H(T,null,Q(a.records,(e,d)=>(f(),D(h,{class:"mt-4",key:e.uuid},{legend:m(()=>[V(u(d+1)+". ",1),l("span",{class:"text-danger ml-2 cursor-pointer",onClick:n=>P(d)},o[20]||(o[20]=[l("i",{class:"fas fa-times-circle"},null,-1)]),8,le)]),default:m(()=>[l("div",ie,[l("div",de,[i(g,{type:"text",modelValue:e.studentName,"onUpdate:modelValue":n=>e.studentName=n,name:`records.${d}.studentName`,label:r.$trans("reception.enquiry.props.student_name"),error:s(t)[`records.${d}.studentName`],"onUpdate:error":n=>s(t)[`records.${d}.studentName`]=n},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"])]),l("div",pe,[i(_,{modelValue:e.birthDate,"onUpdate:modelValue":n=>e.birthDate=n,name:`records.${d}.birthDate`,label:r.$trans("contact.props.birth_date"),"no-clear":"",error:s(t)[`records.${d}.birthDate`],"onUpdate:error":n=>s(t)[`records.${d}.birthDate`]=n},null,8,["modelValue","onUpdate:modelValue","name","label","error","onUpdate:error"])]),l("div",ue,[i(U,null,{default:m(()=>[V(u(r.$trans("contact.props.gender")),1)]),_:1}),i(B,{"top-margin":"",options:b.genders,name:`records.${d}.gender`,modelValue:e.gender,"onUpdate:modelValue":n=>e.gender=n,error:s(t)[`records.${d}.gender`],"onUpdate:error":n=>s(t)[`records.${d}.gender`]=n,horizontal:""},null,8,["options","name","modelValue","onUpdate:modelValue","error","onUpdate:error"])]),l("div",me,[y.isLoaded?(f(),D(k,{key:0,name:`records.${d}.course`,label:r.$trans("global.select",{attribute:r.$trans("academic.course.course")}),modelValue:e.course,"onUpdate:modelValue":n=>e.course=n,error:s(t)[`records.${d}.course`],"onUpdate:error":n=>s(t)[`records.${d}.course`]=n,"value-prop":"uuid","init-search":e.course,"init-search-key":s(v).params.uuid?"uuid":"name","additional-search-query":{period:a.period},"search-action":"academic/course/list"},{selectedOption:m(n=>[V(u(n.value.division.name)+" - "+u(n.value.name),1)]),listOption:m(n=>[V(u(n.option.division.name)+" - "+u(n.option.name),1)]),_:2},1032,["name","label","modelValue","onUpdate:modelValue","error","onUpdate:error","init-search","init-search-key","additional-search-query"])):O("",!0)])])]),_:2},1024))),128)),l("div",ce,[i(R,{design:"primary",onClick:E,class:"cursor-pointer"},{default:m(()=>[V(u(r.$trans("global.add",{attribute:r.$trans("general.record")})),1)]),_:1})]),l("div",be,[l("div",ye,[i(I,{rows:1,modelValue:a.remarks,"onUpdate:modelValue":o[16]||(o[16]=e=>a.remarks=e),name:"remarks",label:r.$trans("reception.enquiry.props.remarks"),error:s(t).remarks,"onUpdate:error":o[17]||(o[17]=e=>s(t).remarks=e)},null,8,["modelValue","label","error"])]),l("div",ge,[i(G,{multiple:"",label:r.$trans("general.file"),module:"enquiry",media:a.media,"media-token":a.mediaToken,onIsUpdated:o[18]||(o[18]=e=>a.mediaUpdated=!0),onSetHash:o[19]||(o[19]=e=>a.mediaHash.push(e))},null,8,["label","media","media-token"])])])]),_:1},8,["form"])}}}),$e={name:"ReceptionEnquiryAction"},fe=Object.assign($e,{setup(C){const v=S();return(c,F)=>{const q=p("PageHeaderAction"),t=p("PageHeader"),b=p("ParentTransition");return f(),H(T,null,[i(t,{title:c.$trans(s(v).meta.trans,{attribute:c.$trans(s(v).meta.label)}),navs:[{label:c.$trans("reception.reception"),path:"Reception"},{label:c.$trans("reception.enquiry.enquiry"),path:"ReceptionEnquiryList"}]},{default:m(()=>[i(q,{name:"ReceptionEnquiry",title:c.$trans("reception.enquiry.enquiry"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),i(b,{appear:"",visibility:!0},{default:m(()=>[i(ve)]),_:1})],64)}}});export{fe as default};
