import{f as U,m as I,n as j,r as n,o as m,q as b,w as e,d as C,e as o,s as d,t as s,b as h,y as g,l as E,u as r,a as R,v as T,F as q,h as O,j as x}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={__name:"Filter",emits:["hide"],setup(A,{emit:v}){const p=U(),w=v,$={title:"",employees:[],batches:[],startDate:"",endDate:""},c=I({...$}),f=I({employees:[],batches:[],isLoaded:!(p.query.employees||p.query.batches)});return j(async()=>{f.employees=p.query.employees?p.query.employees.split(","):[],f.batches=p.query.batches?p.query.batches.split(","):[],f.isLoaded=!0}),(_,i)=>{const l=n("BaseInput"),u=n("BaseSelectSearch"),B=n("DatePicker"),F=n("FilterForm");return m(),b(F,{"init-form":$,form:c,multiple:["employees","batches"],onHide:i[4]||(i[4]=a=>w("hide"))},{default:e(()=>[C("div",z,[C("div",G,[o(l,{type:"text",modelValue:c.title,"onUpdate:modelValue":i[0]||(i[0]=a=>c.title=a),name:"title",label:_.$trans("resource.download.props.title")},null,8,["modelValue","label"])]),C("div",J,[f.isLoaded?(m(),b(u,{key:0,multiple:"",name:"employees",label:_.$trans("global.select",{attribute:_.$trans("employee.employee")}),modelValue:c.employees,"onUpdate:modelValue":i[1]||(i[1]=a=>c.employees=a),"value-prop":"uuid","init-search":f.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(a=>[d(s(a.value.name)+" ("+s(a.value.codeNumber)+") ",1)]),listOption:e(a=>[d(s(a.option.name)+" ("+s(a.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):h("",!0)]),C("div",K,[o(B,{start:c.startDate,"onUpdate:start":i[2]||(i[2]=a=>c.startDate=a),end:c.endDate,"onUpdate:end":i[3]||(i[3]=a=>c.endDate=a),name:"startDateBetween",as:"range",label:_.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},W={name:"ResourceDownloadList"},Y=Object.assign(W,{setup(A){const v=O(),p=x("emitter");let w=["filter"];g("resource:config")&&w.push("config"),g("download:create")&&w.unshift("create");let $=[];g("download:export")&&($=["print","pdf","excel"]);const c="resource/download/",f=E(!1),_=I({}),i=l=>{Object.assign(_,l)};return(l,u)=>{const B=n("PageHeaderAction"),F=n("PageHeader"),a=n("ParentTransition"),D=n("DataCell"),L=n("TextMuted"),k=n("FloatingMenuItem"),M=n("FloatingMenu"),N=n("DataRow"),S=n("BaseButton"),H=n("DataTable"),P=n("ListItem");return m(),b(P,{"init-url":c,"additional-query":{},onSetItems:i},{header:e(()=>[o(F,{title:l.$trans("resource.download.download"),navs:[{label:l.$trans("resource.resource"),path:"Resource"}]},{default:e(()=>[o(B,{url:"resource/downloads/",name:"ResourceDownload",title:l.$trans("resource.download.download"),actions:r(w),"dropdown-actions":r($),"config-path":"ResourceConfig",onToggleFilter:u[0]||(u[0]=t=>f.value=!f.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[o(a,{appear:"",visibility:f.value},{default:e(()=>[o(Q,{onRefresh:u[1]||(u[1]=t=>r(p).emit("listItems")),onHide:u[2]||(u[2]=t=>f.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[o(a,{appear:"",visibility:!0},{default:e(()=>[o(H,{header:_.headers,meta:_.meta,module:"resource.download",onRefresh:u[4]||(u[4]=t=>r(p).emit("listItems"))},{actionButton:e(()=>[r(g)("download:create")?(m(),b(S,{key:0,onClick:u[3]||(u[3]=t=>r(v).push({name:"ResourceDownloadCreate"}))},{default:e(()=>[d(s(l.$trans("global.add",{attribute:l.$trans("resource.download.download")})),1)]),_:1})):h("",!0)]),default:e(()=>[(m(!0),R(q,null,T(_.data,t=>(m(),b(N,{key:t.uuid},{default:e(()=>[o(D,{name:"title"},{default:e(()=>[d(s(t.titleExcerpt),1)]),_:2},1024),o(D,{name:"employee"},{default:e(()=>{var y;return[d(s(((y=t.employee)==null?void 0:y.name)||"-")+" ",1),o(L,{block:""},{default:e(()=>{var V;return[d(s((V=t.employee)==null?void 0:V.codeNumber),1)]}),_:2},1024)]}),_:2},1024),o(D,{name:"expiresAt"},{default:e(()=>[d(s(t.expiresAt.formatted),1)]),_:2},1024),o(D,{name:"audience"},{default:e(()=>[(m(!0),R(q,null,T(t.audienceTypes,y=>(m(),R("div",null,s(y),1))),256))]),_:2},1024),o(D,{name:"createdAt"},{default:e(()=>[d(s(t.createdAt.formatted),1)]),_:2},1024),o(D,{name:"action"},{default:e(()=>[o(M,null,{default:e(()=>[o(k,{icon:"fas fa-arrow-circle-right",onClick:y=>r(v).push({name:"ResourceDownloadShow",params:{uuid:t.uuid}})},{default:e(()=>[d(s(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),r(g)("download:edit")&&t.isEditable?(m(),b(k,{key:0,icon:"fas fa-edit",onClick:y=>r(v).push({name:"ResourceDownloadEdit",params:{uuid:t.uuid}})},{default:e(()=>[d(s(l.$trans("general.edit")),1)]),_:2},1032,["onClick"])):h("",!0),r(g)("download:create")?(m(),b(k,{key:1,icon:"fas fa-copy",onClick:y=>r(v).push({name:"ResourceDownloadDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[d(s(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):h("",!0),r(g)("download:delete")&&t.isDeletable?(m(),b(k,{key:2,icon:"fas fa-trash",onClick:y=>r(p).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[d(s(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Y as default};
