import{m as F,r as o,o as u,q as f,w as e,d as y,e as a,y as B,l as O,u as r,s as d,t as p,b as V,a as U,v as S,F as j,h as z,i as G,j as J}from"./app-DCfJDSeM.js";const K={class:"grid grid-cols-3 gap-6"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(q,{emit:g}){const w=g,v=q,$={name:"",email:"",username:"",status:""},l=F({...$}),I=F({statuses:v.preRequisites.statuses});return(_,s)=>{const c=o("BaseInput"),h=o("BaseSelect"),R=o("FilterForm");return u(),f(R,{"init-form":$,form:l,onHide:s[4]||(s[4]=m=>w("hide"))},{default:e(()=>[y("div",K,[y("div",Q,[a(c,{type:"text",modelValue:l.name,"onUpdate:modelValue":s[0]||(s[0]=m=>l.name=m),name:"name",label:_.$trans("user.props.name")},null,8,["modelValue","label"])]),y("div",W,[a(c,{type:"text",modelValue:l.email,"onUpdate:modelValue":s[1]||(s[1]=m=>l.email=m),name:"email",label:_.$trans("user.props.email")},null,8,["modelValue","label"])]),y("div",X,[a(c,{type:"text",modelValue:l.username,"onUpdate:modelValue":s[2]||(s[2]=m=>l.username=m),name:"username",label:_.$trans("user.props.username")},null,8,["modelValue","label"])]),y("div",Y,[a(h,{modelValue:l.status,"onUpdate:modelValue":s[3]||(s[3]=m=>l.status=m),name:"status",label:_.$trans("user.status"),options:I.statuses},null,8,["modelValue","label","options"])])])]),_:1},8,["form"])}}},x={name:"UserList"},te=Object.assign(x,{setup(q){const g=z(),w=G(),v=J("emitter");let $=["filter"];B("user:create")&&$.unshift("create");let l=[];B("user:export")&&(l=["print","pdf","excel"]);const I="user/",_=F({}),s=O(!1),c=F({}),h=n=>{Object.assign(c,n)},R=n=>{Object.assign(_,n)},m=async n=>{await w.dispatch("auth/user/impersonate",{uuid:n}).then(i=>{window.location.href="/app"}).catch(i=>{})};return(n,i)=>{const H=o("PageHeaderAction"),T=o("PageHeader"),D=o("ParentTransition"),b=o("DataCell"),P=o("BaseBadge"),C=o("FloatingMenuItem"),A=o("FloatingMenu"),E=o("DataRow"),L=o("BaseButton"),M=o("DataTable"),N=o("ListItem");return u(),f(N,{"init-url":I,"pre-requisites":!0,onSetPreRequisites:R,onSetItems:h},{header:e(()=>[a(T,{title:n.$trans("user.user")},{default:e(()=>[a(H,{url:"users/",name:"User",title:n.$trans("user.user"),actions:r($),"dropdown-actions":r(l),onToggleFilter:i[0]||(i[0]=t=>s.value=!s.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title"])]),filter:e(()=>[a(D,{appear:"",visibility:s.value},{default:e(()=>[a(Z,{onRefresh:i[1]||(i[1]=t=>r(v).emit("listItems")),"pre-requisites":_,onHide:i[2]||(i[2]=t=>s.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[a(D,{appear:"",visibility:!0},{default:e(()=>[a(M,{header:c.headers,meta:c.meta,module:"user",onRefresh:i[4]||(i[4]=t=>r(v).emit("listItems"))},{actionButton:e(()=>[r(B)("user:create")?(u(),f(L,{key:0,onClick:i[3]||(i[3]=t=>r(g).push({name:"UserCreate"}))},{default:e(()=>[d(p(n.$trans("global.add",{attribute:n.$trans("user.user")})),1)]),_:1})):V("",!0)]),default:e(()=>[(u(!0),U(j,null,S(c.data,t=>(u(),f(E,{key:t.uuid},{default:e(()=>[a(b,{name:"name"},{default:e(()=>[d(p(t.profile.name),1)]),_:2},1024),a(b,{name:"email"},{default:e(()=>[d(p(t.email),1)]),_:2},1024),a(b,{name:"username"},{default:e(()=>[d(p(t.username),1)]),_:2},1024),a(b,{name:"roles"},{default:e(()=>[(u(!0),U(j,null,S(t.roles,k=>(u(),U("div",null,[a(P,{label:k.label},null,8,["label"])]))),256))]),_:2},1024),a(b,{name:"status"},{default:e(()=>[a(P,{label:t.status.label,design:t.status.color},null,8,["label","design"])]),_:2},1024),a(b,{name:"createdAt"},{default:e(()=>[d(p(t.createdAt.formatted),1)]),_:2},1024),a(b,{name:"action"},{default:e(()=>[t.isEditable||t.isDeletable||r(B)("user:impersonate")?(u(),f(A,{key:0},{default:e(()=>[r(B)("user:impersonate")?(u(),f(C,{key:0,icon:"fas fa-key",onClick:k=>m(t.uuid)},{default:e(()=>[d(p(n.$trans("user.impersonate")),1)]),_:2},1032,["onClick"])):V("",!0),a(C,{icon:"fas fa-eye",onClick:k=>r(g).push({name:"UserShow",params:{uuid:t.uuid}})},{default:e(()=>[d(p(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),t.isEditable?(u(),f(C,{key:1,icon:"fas fa-edit",onClick:k=>r(g).push({name:"UserEdit",params:{uuid:t.uuid}})},{default:e(()=>[d(p(n.$trans("general.edit")),1)]),_:2},1032,["onClick"])):V("",!0),t.isDeletable?(u(),f(C,{key:2,icon:"fas fa-trash",onClick:k=>r(v).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[d(p(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])):V("",!0)]),_:2},1024)):V("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{te as default};
