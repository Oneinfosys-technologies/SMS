import{f as w,h as T,G as E,m as I,n as F,r as a,o as f,q as k,w as m,d as r,e as i,u as l,l as O,a as P,b as S,F as R,A,j as U,z as x}from"./app-DCfJDSeM.js";import{_ as H}from"./Asset-Cna44GYw.js";const M={class:"grid w-full grid-cols-3 gap-y-4"},N={class:"col-span-3 sm:col-span-1"},D={class:"mt-4 grid w-full grid-cols-1 gap-y-4"},q={class:"col-span-1"},z={class:"col-span-1"},G={class:"col-span-1"},L={class:"col-span-1"},h={name:"SiteBlockEditContent"},J=Object.assign(h,{props:{block:{type:Object,default(){return{}}}},emits:["refresh"],setup(B,{emit:V}){w();const v=T(),p=V,u=B,c={name:"",title:"",subTitle:"",content:"",url:""},d="site/block/",o=E(d),s=I({...c}),_=()=>{p("refresh")};return F(()=>{Object.assign(c,{name:u.block.name,title:u.block.title,subTitle:u.block.subTitle,content:u.block.content,url:u.block.url}),Object.assign(s,c)}),(n,e)=>{const b=a("BaseInput"),$=a("MdEditor"),y=a("FormAction");return f(),k(y,{"no-card":"","no-data-fetch":"","button-padding":"",action:"update","keep-adding":!1,"stay-on":!0,"init-url":d,"init-form":c,form:s,"after-submit":_,onCancelled:e[10]||(e[10]=t=>l(v).push({name:"SiteBlockShow",params:{uuid:B.block.uuid}}))},{default:m(()=>[r("div",M,[r("div",N,[i(b,{type:"text",modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.name=t),name:"name",label:n.$trans("site.block.props.name"),error:l(o).name,"onUpdate:error":e[1]||(e[1]=t=>l(o).name=t)},null,8,["modelValue","label","error"])])]),r("div",D,[r("div",q,[i(b,{type:"text",modelValue:s.title,"onUpdate:modelValue":e[2]||(e[2]=t=>s.title=t),name:"title",label:n.$trans("site.block.props.title"),error:l(o).title,"onUpdate:error":e[3]||(e[3]=t=>l(o).title=t)},null,8,["modelValue","label","error"])]),r("div",z,[i(b,{type:"text",modelValue:s.subTitle,"onUpdate:modelValue":e[4]||(e[4]=t=>s.subTitle=t),name:"subTitle",label:n.$trans("site.block.props.sub_title"),error:l(o).subTitle,"onUpdate:error":e[5]||(e[5]=t=>l(o).subTitle=t)},null,8,["modelValue","label","error"])]),r("div",G,[i(b,{type:"text",modelValue:s.url,"onUpdate:modelValue":e[6]||(e[6]=t=>s.url=t),name:"url",label:n.$trans("site.block.props.url"),error:l(o).url,"onUpdate:error":e[7]||(e[7]=t=>l(o).url=t)},null,8,["modelValue","label","error"])]),r("div",L,[i($,{placeholder:n.$trans("site.block.props.content"),modelValue:s.content,"onUpdate:modelValue":e[8]||(e[8]=t=>s.content=t),error:l(o).content,"onUpdate:error":e[9]||(e[9]=t=>l(o).content=t)},null,8,["placeholder","modelValue","error"])])])]),_:1},8,["form"])}}}),K={class:"px-4 py-2"},Q={name:"SiteBlockEdit"},Y=Object.assign(Q,{setup(B){const V=w(),v=T(),p=U("$trans");U("emitter");const u={uuid:""},c="site/block/",d=O(!1),o=I({...u}),s=_=>{Object.assign(o,_)};return(_,n)=>{const e=a("BaseButton"),b=a("PageHeaderAction"),$=a("PageHeader"),y=a("BaseCard"),t=a("ShowItem"),j=a("ParentTransition"),C=x("tooltip");return f(),P(R,null,[o.uuid?(f(),k($,{key:0,title:o.title,navs:[{label:l(p)("site.site"),path:"Site"},{label:l(p)("site.block.block"),path:"SiteBlockList"}]},{default:m(()=>[i(b,{name:"SiteBlock",title:l(p)("site.block.block"),actions:["list"]},{default:m(()=>[A((f(),k(e,{design:"white",onClick:n[0]||(n[0]=g=>l(v).push({name:"SiteBlockShow",params:{uuid:o.uuid}}))},{default:m(()=>n[5]||(n[5]=[r("i",{class:"fas fa-eye"},null,-1)])),_:1})),[[C,l(p)("general.preview")]])]),_:1},8,["title"])]),_:1},8,["title","navs"])):S("",!0),i(j,{appear:"",visibility:!0},{default:m(()=>[i(t,{"init-url":c,uuid:l(V).params.uuid,onSetItem:s,onRedirectTo:n[3]||(n[3]=g=>l(v).push({name:"SiteBlock"})),refresh:d.value,onRefreshed:n[4]||(n[4]=g=>d.value=!1)},{default:m(()=>[i(y,{"no-padding":"","no-content-padding":""},{default:m(()=>[o.uuid?(f(),k(H,{key:0,block:o,onRefreshItem:n[1]||(n[1]=g=>d.value=!0)},null,8,["block"])):S("",!0),r("div",K,[o.uuid?(f(),k(J,{key:0,block:o,onRefreshItem:n[2]||(n[2]=g=>d.value=!0)},null,8,["block"])):S("",!0)])]),_:1})]),_:1},8,["uuid","refresh"])]),_:1})],64)}}});export{Y as default};
