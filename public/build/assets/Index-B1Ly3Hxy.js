import{f as H,m as D,n as N,r as o,o as _,q as g,w as e,d as B,e as t,l as j,u as d,s as i,t as l,a as V,v as q,b as S,F as U,h as E,j as O}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={__name:"Filter",emits:["hide"],setup(F,{emit:f}){H();const p=f,b={startDate:"",endDate:""},u=D({...b}),v=D({isLoaded:!1});return N(async()=>{v.isLoaded=!0}),(m,r)=>{const y=o("DatePicker"),s=o("FilterForm");return _(),g(s,{"init-form":b,form:u,multiple:[],onHide:r[2]||(r[2]=n=>p("hide"))},{default:e(()=>[B("div",z,[B("div",G,[t(y,{start:u.startDate,"onUpdate:start":r[0]||(r[0]=n=>u.startDate=n),end:u.endDate,"onUpdate:end":r[1]||(r[1]=n=>u.endDate=n),name:"dateBetween",as:"range",label:m.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},K={name:"LibraryTransactionList"},W=Object.assign(K,{setup(F){const f=E(),p=O("emitter");let b=["create","filter"],u=["print","pdf","excel"];const v="library/transaction/",m=j(!1),r=D({}),y=s=>{Object.assign(r,s)};return(s,n)=>{const w=o("PageHeaderAction"),T=o("PageHeader"),C=o("ParentTransition"),c=o("DataCell"),L=o("TextMuted"),I=o("BaseBadge"),$=o("FloatingMenuItem"),h=o("FloatingMenu"),P=o("DataRow"),M=o("BaseButton"),R=o("DataTable"),A=o("ListItem");return _(),g(A,{"init-url":v,onSetItems:y},{header:e(()=>[t(T,{title:s.$trans("library.transaction.transaction"),navs:[{label:s.$trans("library.library"),path:"Library"}]},{default:e(()=>[t(w,{url:"library/transactions/",name:"LibraryTransaction",title:s.$trans("library.transaction.transaction"),actions:d(b),"dropdown-actions":d(u),onToggleFilter:n[0]||(n[0]=a=>m.value=!m.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(C,{appear:"",visibility:m.value},{default:e(()=>[t(J,{onRefresh:n[1]||(n[1]=a=>d(p).emit("listItems")),onHide:n[2]||(n[2]=a=>m.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(C,{appear:"",visibility:!0},{default:e(()=>[t(R,{header:r.headers,meta:r.meta,module:"library.transaction",onRefresh:n[4]||(n[4]=a=>d(p).emit("listItems"))},{actionButton:e(()=>[t(M,{onClick:n[3]||(n[3]=a=>d(f).push({name:"LibraryTransactionCreate"}))},{default:e(()=>[i(l(s.$trans("global.add",{attribute:s.$trans("library.transaction.transaction")})),1)]),_:1})]),default:e(()=>[(_(!0),V(U,null,q(r.data,a=>(_(),g(P,{key:a.uuid},{default:e(()=>[t(c,{name:"to"},{default:e(()=>[i(l(a.to.label),1)]),_:2},1024),t(c,{name:"name"},{default:e(()=>[i(l(a.requester.name)+" ",1),t(L,{block:""},{default:e(()=>[i(l(a.requester.contactNumber),1)]),_:2},1024)]),_:2},1024),t(c,{name:"issueDate"},{default:e(()=>[i(l(a.issueDate.formatted)+" ",1),a.nonReturnedBooksCount<a.recordsCount?(_(),g(I,{key:0,design:"success"},{default:e(()=>[i(l(s.$trans("library.transaction.statuses.returned")),1)]),_:1})):S("",!0)]),_:2},1024),t(c,{name:"recordsCount"},{default:e(()=>[i(l(a.recordsCount),1)]),_:2},1024),t(c,{name:"createdAt"},{default:e(()=>[i(l(a.createdAt.formatted),1)]),_:2},1024),t(c,{name:"action"},{default:e(()=>[t(h,null,{default:e(()=>[t($,{icon:"fas fa-arrow-circle-right",onClick:k=>d(f).push({name:"LibraryTransactionShow",params:{uuid:a.uuid}})},{default:e(()=>[i(l(s.$trans("general.show")),1)]),_:2},1032,["onClick"]),t($,{icon:"fas fa-edit",onClick:k=>d(f).push({name:"LibraryTransactionEdit",params:{uuid:a.uuid}})},{default:e(()=>[i(l(s.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t($,{icon:"fas fa-trash",onClick:k=>d(p).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[i(l(s.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{W as default};
