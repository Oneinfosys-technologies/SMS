import{f as G,m as B,n as J,r as l,o as n,q as h,w as t,d as u,s as r,t as s,b as y,e as o,y as j,l as K,u as m,C as Q,a as g,v as I,F as L,h as X,j as Y}from"./app-DCfJDSeM.js";const Z={class:"grid grid-cols-3 gap-6"},C={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},se={class:"col-span-3 sm:col-span-1"},ae={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(x,{emit:$}){const _=G(),w=$,D=x,O={employees:[],batches:[],subjects:[],startDate:"",endDate:""},d=B({...O}),V=B({subjects:D.preRequisites.subjects}),c=B({employees:[],batches:[],subjects:[],isLoaded:!(_.query.employees||_.query.batches||_.query.subjects)});return J(async()=>{c.employees=_.query.employees?_.query.employees.split(","):[],c.batches=_.query.batches?_.query.batches.split(","):[],c.subjects=_.query.subjects?_.query.subjects.split(","):[],c.isLoaded=!0}),(v,f)=>{const i=l("BaseSelectSearch"),b=l("BaseSelect"),U=l("DatePicker"),S=l("FilterForm");return n(),h(S,{"init-form":O,form:d,multiple:["employees","batches","subjects"],onHide:f[5]||(f[5]=a=>w("hide"))},{default:t(()=>[u("div",Z,[u("div",C,[c.isLoaded?(n(),h(i,{key:0,multiple:"",name:"employees",label:v.$trans("global.select",{attribute:v.$trans("employee.employee")}),modelValue:d.employees,"onUpdate:modelValue":f[0]||(f[0]=a=>d.employees=a),"value-prop":"uuid","init-search":c.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:t(a=>[r(s(a.value.name)+" ("+s(a.value.codeNumber)+") ",1)]),listOption:t(a=>[r(s(a.option.name)+" ("+s(a.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):y("",!0)]),u("div",ee,[c.isLoaded?(n(),h(i,{key:0,multiple:"",name:"batches",label:v.$trans("global.select",{attribute:v.$trans("academic.batch.batch")}),modelValue:d.batches,"onUpdate:modelValue":f[1]||(f[1]=a=>d.batches=a),"value-prop":"uuid","init-search":c.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:t(a=>[r(s(a.value.course.name)+" "+s(a.value.name),1)]),listOption:t(a=>[r(s(a.option.course.nameWithTerm)+" "+s(a.option.name),1)]),_:1},8,["label","modelValue","init-search"])):y("",!0)]),u("div",te,[o(b,{multiple:"",modelValue:d.subjects,"onUpdate:modelValue":f[2]||(f[2]=a=>d.subjects=a),name:"subjects",label:v.$trans("academic.subject.subject"),"label-prop":"name","value-prop":"uuid",options:V.subjects},null,8,["modelValue","label","options"])]),u("div",se,[o(U,{start:d.startDate,"onUpdate:start":f[3]||(f[3]=a=>d.startDate=a),end:d.endDate,"onUpdate:end":f[4]||(f[4]=a=>d.endDate=a),name:"dateBetween",as:"range",label:v.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},oe={class:"grid grid-cols-1 gap-4 px-4 pt-4 md:grid-cols-2 lg:grid-cols-3"},ne=["onClick"],re={class:"px-2 py-2 text-gray-800 dark:text-gray-400"},ie={class:"flex items-center justify-between"},le={class:"font-medium"},ue={class:"mt-2 flex justify-between"},ce={class:"text-sm"},de={key:0,class:"text-xs"},me={class:"flex justify-between"},pe={class:"text-sm"},_e={key:0,class:"text-xs"},fe=["href"],be={key:0,class:"ml-1"},he={class:"mt-2 text-xs"},ye={class:"text-xl font-semibold"},ge=["href"],ve={key:0,class:"ml-1"},ke={name:"ResourceOnlineClassList"},je=Object.assign(ke,{setup(x){const $=X(),_=Y("emitter");let w=["filter"];j("resource:config")&&w.push("config"),j("online-class:create")&&w.unshift("create");let D=[];j("online-class:export")&&(D=["print","pdf","excel"]);const O="resource/onlineClass/",d=K(!1),V=B({subjects:[]}),c=B({}),v=i=>{Object.assign(V,i)},f=i=>{Object.assign(c,i)};return(i,b)=>{const U=l("PageHeaderAction"),S=l("PageHeader"),a=l("ParentTransition"),T=l("BaseBadge"),R=l("TextMuted"),A=l("CardView"),P=l("Pagination"),M=l("CardList"),q=l("DataCell"),F=l("FloatingMenuItem"),N=l("FloatingMenu"),H=l("DataRow"),E=l("BaseButton"),W=l("DataTable"),z=l("ListItem");return n(),h(z,{"init-url":O,"pre-requisites":!0,onSetPreRequisites:v,"additional-query":{},onSetItems:f},{header:t(()=>[o(S,{title:i.$trans("resource.online_class.online_class"),navs:[{label:i.$trans("resource.resource"),path:"Resource"}]},{default:t(()=>[o(U,{url:"resource/online-classes/",name:"ResourceOnlineClass",title:i.$trans("resource.online_class.online_class"),actions:m(w),"dropdown-actions":m(D),"config-path":"ResourceConfig",onToggleFilter:b[0]||(b[0]=e=>d.value=!d.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:t(()=>[o(a,{appear:"",visibility:d.value},{default:t(()=>[o(ae,{onRefresh:b[1]||(b[1]=e=>m(_).emit("listItems")),"pre-requisites":V,onHide:b[2]||(b[2]=e=>d.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:t(()=>[m(Q)(["student","guardian"],"any")?(n(),h(a,{key:0,appear:"",visibility:!0},{default:t(()=>[o(M,{header:c.headers,meta:c.meta},{content:t(()=>[u("div",ye,s(i.$trans("dashboard.nothing_to_show")),1)]),default:t(()=>[u("div",oe,[(n(!0),g(L,null,I(c.data,e=>(n(),g("div",{key:e.uuid,class:"cursor-pointer",onClick:p=>m($).push({name:"ResourceOnlineClassShow",params:{uuid:e.uuid}})},[o(A,{"no-padding":""},{default:t(()=>{var p,k;return[u("div",re,[u("div",ie,[u("span",le,s(e.topic),1)]),u("div",ue,[u("span",ce,s(((p=e.employee)==null?void 0:p.name)||"-"),1),e.employee?(n(),g("span",de,s((k=e.employee)==null?void 0:k.designation),1)):y("",!0)]),u("div",me,[u("p",pe,s(e.platform.label),1),o(T,{design:e.status.color},{default:t(()=>[r(s(e.status.label),1)]),_:2},1032,["design"])]),e.showUrl?(n(),g("div",_e,[u("a",{href:e.meetingUrl,target:"_blank"},[r(s(e.meetingUrl)+" ",1),e.password?(n(),g("span",be,"("+s(e.password)+")",1)):y("",!0)],8,fe)])):y("",!0),u("p",he,[r(s(e.startAt.formatted)+" ",1),o(R,null,{default:t(()=>[r("("+s(e.duration)+" "+s(i.$trans("list.durations.m"))+")",1)]),_:2},1024)])])]}),_:2},1024)],8,ne))),128))]),u("div",null,[o(P,{"card-view":"",meta:c.meta,onRefresh:b[3]||(b[3]=e=>m(_).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):(n(),h(a,{key:1,appear:"",visibility:!0},{default:t(()=>[o(W,{header:c.headers,meta:c.meta,module:"resource.online_class",onRefresh:b[5]||(b[5]=e=>m(_).emit("listItems"))},{actionButton:t(()=>[m(j)("online-class:create")?(n(),h(E,{key:0,onClick:b[4]||(b[4]=e=>m($).push({name:"ResourceOnlineClassCreate"}))},{default:t(()=>[r(s(i.$trans("global.add",{attribute:i.$trans("resource.online_class.online_class")})),1)]),_:1})):y("",!0)]),default:t(()=>[(n(!0),g(L,null,I(c.data,e=>(n(),h(H,{key:e.uuid},{default:t(()=>[o(q,{name:"topic"},{default:t(()=>[r(s(e.topicExcerpt)+" ",1),o(T,{design:e.status.color},{default:t(()=>[r(s(e.status.label),1)]),_:2},1032,["design"])]),_:2},1024),o(q,{name:"records"},{default:t(()=>[(n(!0),g(L,null,I(e.records,p=>{var k;return n(),g("div",null,[r(s(((k=p.batch.course)==null?void 0:k.name)+" "+p.batch.name)+" ",1),p.subject?(n(),h(R,{key:0},{default:t(()=>[r(s(p.subject.name),1)]),_:2},1024)):y("",!0)])}),256))]),_:2},1024),o(q,{name:"employee"},{default:t(()=>{var p;return[r(s(((p=e.employee)==null?void 0:p.name)||"-")+" ",1),o(R,{block:""},{default:t(()=>{var k;return[r(s((k=e.employee)==null?void 0:k.codeNumber),1)]}),_:2},1024)]}),_:2},1024),o(q,{name:"startAt"},{default:t(()=>[r(s(e.startAt.formatted)+" ("+s(e.duration)+" "+s(i.$trans("list.durations.m"))+") ",1),o(R,{block:""},{default:t(()=>[r(s(e.platform.label),1)]),_:2},1024),e.showUrl?(n(),h(R,{key:0,block:""},{default:t(()=>[u("a",{href:e.meetingUrl,target:"_blank"},s(e.meetingUrl),9,ge),e.password?(n(),g("span",ve,"("+s(e.password)+")",1)):y("",!0)]),_:2},1024)):y("",!0)]),_:2},1024),o(q,{name:"action"},{default:t(()=>[o(N,null,{default:t(()=>[o(F,{icon:"fas fa-arrow-circle-right",onClick:p=>m($).push({name:"ResourceOnlineClassShow",params:{uuid:e.uuid}})},{default:t(()=>[r(s(i.$trans("general.show")),1)]),_:2},1032,["onClick"]),m(j)("online-class:edit")&&e.isEditable?(n(),h(F,{key:0,icon:"fas fa-edit",onClick:p=>m($).push({name:"ResourceOnlineClassEdit",params:{uuid:e.uuid}})},{default:t(()=>[r(s(i.$trans("general.edit")),1)]),_:2},1032,["onClick"])):y("",!0),m(j)("online-class:create")?(n(),h(F,{key:1,icon:"fas fa-copy",onClick:p=>m($).push({name:"ResourceOnlineClassDuplicate",params:{uuid:e.uuid}})},{default:t(()=>[r(s(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):y("",!0),m(j)("online-class:delete")&&e.isDeletable?(n(),h(F,{key:2,icon:"fas fa-trash",onClick:p=>m(_).emit("deleteItem",{uuid:e.uuid})},{default:t(()=>[r(s(i.$trans("general.delete")),1)]),_:2},1032,["onClick"])):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1}))]),_:1})}}});export{je as default};
