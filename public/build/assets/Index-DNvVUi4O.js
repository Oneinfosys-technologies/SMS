import{m as q,r as u,o as f,q as V,w as e,d as b,e as t,s as i,t as s,l as O,u as c,a as C,v as S,b as F,F as U,h as N,j as W}from"./app-DCfJDSeM.js";const E={class:"grid grid-cols-3 gap-6"},z={class:"col-span-3 sm:col-span-1"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},X={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(k,{emit:v}){const y=v,h={type:"",courses:[],subjects:[],title:"",author:""},r=q({...h});return(m,o)=>{const $=u("BaseSelect"),p=u("BaseInput"),j=u("FilterForm");return f(),V(j,{"init-form":h,form:r,multiple:["courses","subjects"],onHide:o[5]||(o[5]=n=>y("hide"))},{default:e(()=>[b("div",E,[b("div",z,[t($,{modelValue:r.type,"onUpdate:modelValue":o[0]||(o[0]=n=>r.type=n),name:"type",label:m.$trans("academic.book_list.props.type"),options:k.preRequisites.types},null,8,["modelValue","label","options"])]),b("div",G,[t($,{multiple:"",modelValue:r.courses,"onUpdate:modelValue":o[1]||(o[1]=n=>r.courses=n),name:"courses","value-prop":"uuid",label:m.$trans("academic.course.course"),options:k.preRequisites.courses},{selectedOption:e(n=>[i(s(n.value.nameWithTerm),1)]),listOption:e(n=>[i(s(n.option.nameWithTerm),1)]),_:1},8,["modelValue","label","options"])]),b("div",J,[t($,{multiple:"",modelValue:r.subjects,"onUpdate:modelValue":o[2]||(o[2]=n=>r.subjects=n),name:"subjects","label-prop":"name","value-prop":"uuid",label:m.$trans("academic.subject.subject"),options:k.preRequisites.subjects},null,8,["modelValue","label","options"])]),b("div",K,[t(p,{type:"text",modelValue:r.title,"onUpdate:modelValue":o[3]||(o[3]=n=>r.title=n),name:"title",label:m.$trans("academic.book_list.props.title")},null,8,["modelValue","label"])]),b("div",Q,[t(p,{type:"text",modelValue:r.author,"onUpdate:modelValue":o[4]||(o[4]=n=>r.author=n),name:"author",label:m.$trans("academic.book_list.props.author")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},Y={class:"space-x-2"},Z={key:0},L={key:1},x={name:"AcademicBookListList"},te=Object.assign(x,{setup(k){const v=N(),y=W("emitter");let h=["create","filter"],r=["print","pdf","excel"];const m="academic/bookList/",o=O(!1),$=q({types:[],courses:[],subjects:[]}),p=q({}),j=l=>{Object.assign(p,l)},n=l=>{Object.assign($,l)};return(l,d)=>{const w=u("PageHeaderAction"),I=u("PageHeader"),A=u("ParentTransition"),_=u("DataCell"),R=u("TextMuted"),B=u("FloatingMenuItem"),T=u("FloatingMenu"),D=u("DataRow"),P=u("BaseButton"),H=u("DataTable"),M=u("ListItem");return f(),V(M,{"init-url":m,"pre-requisites":!0,onSetPreRequisites:n,onSetItems:j},{header:e(()=>[t(I,{title:l.$trans("academic.book_list.book_list"),navs:[{label:l.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[t(w,{url:"academic/book-lists/",name:"AcademicBookList",title:l.$trans("academic.book_list.book_list"),actions:c(h),"dropdown-actions":c(r),onToggleFilter:d[0]||(d[0]=a=>o.value=!o.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(A,{appear:"",visibility:o.value},{default:e(()=>[t(X,{onRefresh:d[1]||(d[1]=a=>c(y).emit("listItems")),"pre-requisites":$,onHide:d[2]||(d[2]=a=>o.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[t(A,{appear:"",visibility:!0},{default:e(()=>[t(H,{header:p.headers,meta:p.meta,module:"academic.book_list",onRefresh:d[4]||(d[4]=a=>c(y).emit("listItems"))},{actionButton:e(()=>[t(P,{onClick:d[3]||(d[3]=a=>c(v).push({name:"AcademicBookListCreate"}))},{default:e(()=>[i(s(l.$trans("global.add",{attribute:l.$trans("academic.book_list.book_list")})),1)]),_:1})]),default:e(()=>[(f(!0),C(U,null,S(p.data,a=>(f(),V(D,{key:a.uuid},{default:e(()=>[t(_,{name:"type"},{default:e(()=>[i(s(a.type.label),1)]),_:2},1024),t(_,{name:"course"},{default:e(()=>[i(s(a.course.nameWithTerm),1)]),_:2},1024),t(_,{name:"subject"},{default:e(()=>{var g;return[i(s(((g=a.subject)==null?void 0:g.name)||"-"),1)]}),_:2},1024),t(_,{name:"title"},{default:e(()=>[i(s(a.title)+" ",1),a.type.value=="notebook"?(f(),V(R,{key:0},{default:e(()=>[b("div",Y,[a.quantity?(f(),C("span",Z,"("+s(a.quantity)+" "+s(l.$trans("list.unit.pcs"))+")",1)):F("",!0),a.pages?(f(),C("span",L,"("+s(a.pages)+" "+s(l.$trans("academic.book_list.props.pages"))+")",1)):F("",!0)])]),_:2},1024)):F("",!0)]),_:2},1024),t(_,{name:"publisher"},{default:e(()=>[i(s(a.publisher)+" ",1),t(R,{block:""},{default:e(()=>[i(s(a.author),1)]),_:2},1024)]),_:2},1024),t(_,{name:"createdAt"},{default:e(()=>[i(s(a.createdAt.formatted),1)]),_:2},1024),t(_,{name:"action"},{default:e(()=>[t(T,null,{default:e(()=>[t(B,{icon:"fas fa-arrow-circle-right",onClick:g=>c(v).push({name:"AcademicBookListShow",params:{uuid:a.uuid}})},{default:e(()=>[i(s(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(B,{icon:"fas fa-edit",onClick:g=>c(v).push({name:"AcademicBookListEdit",params:{uuid:a.uuid}})},{default:e(()=>[i(s(l.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t(B,{icon:"fas fa-copy",onClick:g=>c(v).push({name:"AcademicBookListDuplicate",params:{uuid:a.uuid}})},{default:e(()=>[i(s(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),t(B,{icon:"fas fa-trash",onClick:g=>c(y).emit("deleteItem",{uuid:a.uuid})},{default:e(()=>[i(s(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{te as default};
