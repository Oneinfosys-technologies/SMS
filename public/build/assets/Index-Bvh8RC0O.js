import{f as E,m as h,n as P,r as d,o as N,q as V,w as s,d as p,e,s as i,t as r,b as j,l as L,u as _,a as M,v as H,F as O,h as A,j as W}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={class:"mt-4 grid grid-cols-3 gap-6"},Q={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ae={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(q,{emit:g}){const c=E(),S=g,$={codeNumber:"",firstName:"",lastName:"",fatherName:"",motherName:"",batches:[],reasons:[],admissionStartDate:"",admissionEndDate:"",transferStartDate:"",transferEndDate:""},n=h({...$});h({});const f=h({isLoaded:!(c.query.batches||c.query.reasons)});return P(async()=>{f.batches=c.query.batches?c.query.batches.split(","):[],f.reasons=c.query.reasons?c.query.reasons.split(","):[],f.isLoaded=!0}),(l,a)=>{const v=d("BaseInput"),y=d("BaseSelectSearch"),m=d("BaseSelect"),u=d("DatePicker"),k=d("FilterForm");return N(),V(k,{"init-form":$,form:n,multiple:["batches","reasons"],onHide:a[11]||(a[11]=t=>S("hide"))},{default:s(()=>[p("div",z,[p("div",G,[e(v,{type:"text",modelValue:n.codeNumber,"onUpdate:modelValue":a[0]||(a[0]=t=>n.codeNumber=t),name:"codeNumber",label:l.$trans("student.admission.props.code_number")},null,8,["modelValue","label"])]),p("div",J,[f.isLoaded?(N(),V(y,{key:0,multiple:"",name:"batches",label:l.$trans("global.select",{attribute:l.$trans("academic.batch.batch")}),modelValue:n.batches,"onUpdate:modelValue":a[1]||(a[1]=t=>n.batches=t),"value-prop":"uuid","init-search":f.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:s(t=>[i(r(t.value.course.name)+" "+r(t.value.name),1)]),listOption:s(t=>[i(r(t.option.course.nameWithTerm)+" "+r(t.option.name),1)]),_:1},8,["label","modelValue","init-search"])):j("",!0)])]),p("div",K,[p("div",Q,[e(v,{type:"text",modelValue:n.firstName,"onUpdate:modelValue":a[2]||(a[2]=t=>n.firstName=t),name:"firstName",label:l.$trans("contact.props.first_name")},null,8,["modelValue","label"])]),p("div",X,[e(v,{type:"text",modelValue:n.lastName,"onUpdate:modelValue":a[3]||(a[3]=t=>n.lastName=t),name:"lastName",label:l.$trans("contact.props.last_name")},null,8,["modelValue","label"])]),p("div",Y,[e(v,{type:"text",modelValue:n.fatherName,"onUpdate:modelValue":a[4]||(a[4]=t=>n.fatherName=t),name:"fatherName",label:l.$trans("contact.props.father_name")},null,8,["modelValue","label"])]),p("div",Z,[e(v,{type:"text",modelValue:n.motherName,"onUpdate:modelValue":a[5]||(a[5]=t=>n.motherName=t),name:"motherName",label:l.$trans("contact.props.mother_name")},null,8,["modelValue","label"])]),p("div",x,[e(m,{multiple:"",name:"reasons",label:l.$trans("global.select",{attribute:l.$trans("student.transfer_reason.transfer_reason")}),modelValue:n.reasons,"onUpdate:modelValue":a[6]||(a[6]=t=>n.reasons=t),options:q.preRequisites.reasons,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","options"])]),p("div",ee,[e(u,{start:n.admissionStartDate,"onUpdate:start":a[7]||(a[7]=t=>n.admissionStartDate=t),end:n.admissionEndDate,"onUpdate:end":a[8]||(a[8]=t=>n.admissionEndDate=t),name:"admissionDateBetween",as:"range",label:l.$trans("global.date_between",{attribute:l.$trans("student.admission.props.date")})},null,8,["start","end","label"])]),p("div",te,[e(u,{start:n.transferStartDate,"onUpdate:start":a[9]||(a[9]=t=>n.transferStartDate=t),end:n.transferEndDate,"onUpdate:end":a[10]||(a[10]=t=>n.transferEndDate=t),name:"transferDateBetween",as:"range",label:l.$trans("global.date_between",{attribute:l.$trans("student.transfer.props.date")})},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},se={name:"StudentTransferList"},oe=Object.assign(se,{setup(q){const g=A(),c=W("emitter");let S=["create","filter"],$=["print","pdf","excel"];const n="student/transfer/",f=h({reasons:[]}),l=L(!1),a=h({}),v=m=>{Object.assign(f,m)},y=m=>{Object.assign(a,m)};return(m,u)=>{const k=d("PageHeaderAction"),t=d("PageHeader"),w=d("ParentTransition"),D=d("TextMuted"),b=d("DataCell"),B=d("FloatingMenuItem"),F=d("FloatingMenu"),T=d("DataRow"),U=d("BaseButton"),I=d("DataTable"),R=d("ListItem");return N(),V(R,{"init-url":n,"pre-requisites":!0,onSetPreRequisites:v,onSetItems:y},{header:s(()=>[e(t,{title:m.$trans("student.transfer.transfer"),navs:[{label:m.$trans("student.student"),path:"Student"}]},{default:s(()=>[e(k,{url:"student/transfers/",name:"StudentTransfer",title:m.$trans("student.transfer.transfer"),actions:_(S),"dropdown-actions":_($),onToggleFilter:u[0]||(u[0]=o=>l.value=!l.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:s(()=>[e(w,{appear:"",visibility:l.value},{default:s(()=>[e(ae,{onRefresh:u[1]||(u[1]=o=>_(c).emit("listItems")),"pre-requisites":f,onHide:u[2]||(u[2]=o=>l.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:s(()=>[e(w,{appear:"",visibility:!0},{default:s(()=>[e(I,{header:a.headers,meta:a.meta,module:"student.transfer",onRefresh:u[4]||(u[4]=o=>_(c).emit("listItems"))},{actionButton:s(()=>[e(U,{onClick:u[3]||(u[3]=o=>_(g).push({name:"StudentTransferCreate"}))},{default:s(()=>[i(r(m.$trans("global.add",{attribute:m.$trans("student.transfer.transfer")})),1)]),_:1})]),default:s(()=>[(N(!0),M(O,null,H(a.data,o=>(N(),V(T,{key:o.uuid},{default:s(()=>[e(b,{name:"codeNumber"},{default:s(()=>[i(r(o.codeNumber)+" ",1),e(D,{block:""},{default:s(()=>[i(r(o.transferCertificateNumber),1)]),_:2},1024)]),_:2},1024),e(b,{name:"name"},{default:s(()=>[i(r(o.name)+" ",1),e(D,{block:""},{default:s(()=>[i(r(o.contactNumber),1)]),_:2},1024)]),_:2},1024),e(b,{name:"parent"},{default:s(()=>[i(r(o.fatherName)+" ",1),e(D,{block:""},{default:s(()=>[i(r(o.motherName),1)]),_:2},1024)]),_:2},1024),e(b,{name:"admissionDate"},{default:s(()=>[i(r(o.joiningDate.formatted),1)]),_:2},1024),e(b,{name:"course"},{default:s(()=>[i(r(o.courseName)+" ",1),e(D,{block:""},{default:s(()=>[i(r(o.batchName),1)]),_:2},1024)]),_:2},1024),e(b,{name:"transferDate"},{default:s(()=>[i(r(o.leavingDate.formatted),1)]),_:2},1024),e(b,{name:"reason"},{default:s(()=>[i(r(o.reason),1)]),_:2},1024),e(b,{name:"action"},{default:s(()=>[e(F,null,{default:s(()=>[e(B,{icon:"fas fa-arrow-circle-right",onClick:C=>_(g).push({name:"StudentTransferShow",params:{uuid:o.uuid}})},{default:s(()=>[i(r(m.$trans("general.show")),1)]),_:2},1032,["onClick"]),e(B,{icon:"fas fa-edit",onClick:C=>_(g).push({name:"StudentTransferEdit",params:{uuid:o.uuid}})},{default:s(()=>[i(r(m.$trans("general.edit")),1)]),_:2},1032,["onClick"]),e(B,{icon:"fas fa-trash",onClick:C=>_(c).emit("deleteItem",{uuid:o.uuid})},{default:s(()=>[i(r(m.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{oe as default};
