import{f as H,m as j,n as U,r as s,o as i,q as _,w as e,d as h,e as a,b as k,y as v,l as E,u as c,s as n,t as o,a as D,v as O,F as N,h as z,j as G}from"./app-DCfJDSeM.js";const J={class:"grid grid-cols-3 gap-6"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={__name:"Filter",emits:["hide"],setup(A,{emit:$}){const g=H(),C=$,B={codeNumber:"",subject:"",types:[],startDate:"",endDate:""},u=j({...B}),b=j({types:[],isLoaded:!g.query.types});return U(async()=>{b.types=g.query.types?g.query.types.split(","):[],b.isLoaded=!0}),(m,r)=>{const l=s("BaseInput"),p=s("BaseSelectSearch"),w=s("DatePicker"),V=s("FilterForm");return i(),_(V,{"init-form":B,form:u,multiple:["types"],onHide:r[5]||(r[5]=d=>C("hide"))},{default:e(()=>[h("div",J,[h("div",K,[a(l,{type:"text",modelValue:u.codeNumber,"onUpdate:modelValue":r[0]||(r[0]=d=>u.codeNumber=d),name:"codeNumber",label:m.$trans("reception.complaint.props.code_number")},null,8,["modelValue","label"])]),h("div",Q,[a(l,{type:"text",modelValue:u.subject,"onUpdate:modelValue":r[1]||(r[1]=d=>u.subject=d),name:"subject",label:m.$trans("reception.complaint.props.subject")},null,8,["modelValue","label"])]),h("div",W,[b.isLoaded?(i(),_(p,{key:0,multiple:"",name:"types",label:m.$trans("global.select",{attribute:m.$trans("reception.complaint.type.type")}),modelValue:u.types,"onUpdate:modelValue":r[2]||(r[2]=d=>u.types=d),"value-prop":"uuid","init-search":b.types,"search-action":"option/list","additional-search-query":{type:"complaint_type"}},null,8,["label","modelValue","init-search"])):k("",!0)]),h("div",X,[a(w,{start:u.startDate,"onUpdate:start":r[3]||(r[3]=d=>u.startDate=d),end:u.endDate,"onUpdate:end":r[4]||(r[4]=d=>u.endDate=d),name:"dateBetween",as:"range",label:m.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Z={name:"ReceptionComplaintList"},ee=Object.assign(Z,{setup(A){const $=z(),g=G("emitter");let C=["filter"];v("reception:config")&&C.push("config"),v("complaint:create")&&C.unshift("create");let B=[];v("complaint:export")&&(B=["print","pdf","excel"]);const u="reception/complaint/",b=E(!1),m=j({}),r=l=>{Object.assign(m,l)};return(l,p)=>{const w=s("PageHeaderAction"),V=s("PageHeader"),d=s("ParentTransition"),I=s("BaseBadge"),f=s("DataCell"),F=s("TextMuted"),R=s("FloatingMenuItem"),P=s("FloatingMenu"),L=s("DataRow"),M=s("BaseButton"),S=s("DataTable"),q=s("ListItem");return i(),_(q,{"init-url":u,"additional-query":{},onSetItems:r},{header:e(()=>[a(V,{title:l.$trans("reception.complaint.complaint"),navs:[{label:l.$trans("reception.reception"),path:"Reception"}]},{default:e(()=>[a(w,{url:"reception/complaints/",name:"ReceptionComplaint",title:l.$trans("reception.complaint.complaint"),actions:c(C),"dropdown-actions":c(B),"config-path":"ReceptionConfig",onToggleFilter:p[0]||(p[0]=t=>b.value=!b.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[a(d,{appear:"",visibility:b.value},{default:e(()=>[a(Y,{onRefresh:p[1]||(p[1]=t=>c(g).emit("listItems")),onHide:p[2]||(p[2]=t=>b.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(d,{appear:"",visibility:!0},{default:e(()=>[a(S,{header:m.headers,meta:m.meta,module:"reception.complaint",onRefresh:p[4]||(p[4]=t=>c(g).emit("listItems"))},{actionButton:e(()=>[c(v)("complaint:create")?(i(),_(M,{key:0,onClick:p[3]||(p[3]=t=>c($).push({name:"ReceptionComplaintCreate"}))},{default:e(()=>[n(o(l.$trans("global.add",{attribute:l.$trans("reception.complaint.complaint")})),1)]),_:1})):k("",!0)]),default:e(()=>[(i(!0),D(N,null,O(m.data,t=>(i(),_(L,{key:t.uuid},{default:e(()=>[a(f,{name:"codeNumber"},{default:e(()=>[n(o(t.codeNumber)+" ",1),t.isOnline?(i(),_(I,{key:0,design:"info"},{default:e(()=>[n(o(l.$trans("reception.complaint.online")),1)]),_:1})):k("",!0),a(I,{design:t.status.color},{default:e(()=>[n(o(t.status.label),1)]),_:2},1032,["design"])]),_:2},1024),a(f,{name:"name"},{default:e(()=>[t.student?(i(),D(N,{key:0},[n(o(t.student.name)+" ",1),a(F,{block:""},{default:e(()=>[n(o(t.student.contactNumber),1)]),_:2},1024)],64)):(i(),D(N,{key:1},[n("-")],64))]),_:2},1024),a(f,{name:"course"},{default:e(()=>[t.student?(i(),D(N,{key:0},[n(o(t.student.courseName)+" ",1),a(F,{block:""},{default:e(()=>[n(o(t.student.batchName),1)]),_:2},1024)],64)):(i(),D(N,{key:1},[n("-")],64))]),_:2},1024),a(f,{name:"type"},{default:e(()=>{var y;return[n(o(((y=t.type)==null?void 0:y.name)||"-"),1)]}),_:2},1024),a(f,{name:"subject"},{default:e(()=>[n(o(t.subjectExcerpt),1)]),_:2},1024),a(f,{name:"complainant"},{default:e(()=>[n(o(t.complainantName)+" ",1),a(F,{block:""},{default:e(()=>[n(o(t.complainantContactNumber),1)]),_:2},1024)]),_:2},1024),a(f,{name:"date"},{default:e(()=>[n(o(t.date.formatted)+" ",1),t.resolvedAt.value?(i(),_(F,{key:0,block:""},{default:e(()=>[n(o(t.resolvedAt.formatted),1)]),_:2},1024)):k("",!0)]),_:2},1024),a(f,{name:"assignedTo"},{default:e(()=>{var y,T;return[n(o(((T=(y=t.incharge)==null?void 0:y.employee)==null?void 0:T.name)||"-"),1)]}),_:2},1024),a(f,{name:"createdAt"},{default:e(()=>[n(o(t.createdAt.formatted),1)]),_:2},1024),a(f,{name:"action"},{default:e(()=>[a(P,null,{default:e(()=>[a(R,{icon:"fas fa-arrow-circle-right",onClick:y=>c($).push({name:"ReceptionComplaintShow",params:{uuid:t.uuid}})},{default:e(()=>[n(o(l.$trans("general.show")),1)]),_:2},1032,["onClick"]),c(v)("complaint:edit")&&t.isEditable?(i(),_(R,{key:0,icon:"fas fa-edit",onClick:y=>c($).push({name:"ReceptionComplaintEdit",params:{uuid:t.uuid}})},{default:e(()=>[n(o(l.$trans("general.edit")),1)]),_:2},1032,["onClick"])):k("",!0),c(v)("complaint:create")?(i(),_(R,{key:1,icon:"fas fa-copy",onClick:y=>c($).push({name:"ReceptionComplaintDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[n(o(l.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):k("",!0),c(v)("complaint:delete")&&t.isEditable?(i(),_(R,{key:2,icon:"fas fa-trash",onClick:y=>c(g).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[n(o(l.$trans("general.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{ee as default};
