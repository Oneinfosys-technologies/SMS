import{f as P,m as B,n as x,r as o,o as m,q as D,w as e,d as b,e as t,G as z,l as H,s as l,t as i,a as h,u as v,b as U,i as N,J as W,F as O,A as X,v as Y,h as Z,j as ee,z as te}from"./app-DCfJDSeM.js";import{d as V}from"./vuedraggable.umd-DO5pvILy.js";const ne={class:"grid grid-cols-3 gap-6"},se={class:"col-span-3 sm:col-span-1"},ae={__name:"Filter",emits:["hide"],setup(L,{emit:k}){P();const _=k,f={name:""},p=B({...f}),w=B({isLoaded:!0});return x(async()=>{w.isLoaded=!0}),(g,s)=>{const c=o("BaseInput"),$=o("FilterForm");return m(),D($,{"init-form":f,form:p,multiple:[],onHide:s[1]||(s[1]=M=>_("hide"))},{default:e(()=>[b("div",ne,[b("div",se,[t(c,{type:"text",modelValue:p.name,"onUpdate:modelValue":s[0]||(s[0]=M=>p.name=M),name:"name",label:g.$trans("site.menu.props.name")},null,8,["modelValue","label"])])])]),_:1},8,["form"])}}},oe={key:0},le={class:"flex border rounded-xl px-4 py-2"},ie={key:1},re={key:2,class:"mt-4"},ue={class:"flex border rounded-xl px-4 py-2"},de={key:3},me={key:4,class:"mt-4 flex justify-end"},ce={name:"SiteMenuReorder"},fe=Object.assign(ce,{props:{visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(L,{emit:k}){P();const _=N(),f=k,p={menus:[]};z("site/menu/");const g=H(!1),s=B({headerMenus:[],footerMenus:[]});B({...p});const c=async()=>{g.value=!0,await _.dispatch("site/menu/list",{params:{parent:!0,all:!0}}).then(u=>{g.value=!1,s.headerMenus=u.filter(a=>a.placement.value==="header"),s.footerMenus=u.filter(a=>a.placement.value==="footer")}).catch(u=>{g.value=!1})},$=async()=>{g.value=!0,await _.dispatch("site/menu/reorder",{data:{headerMenus:s.headerMenus,footerMenus:s.footerMenus}}).then(u=>{g.value=!1,f("refresh"),f("close")}).catch(u=>{g.value=!1})},M=()=>{f("close")};return x(()=>{c()}),(u,a)=>{const C=o("BaseHeading"),R=o("BaseLabel"),d=o("BaseAlert"),n=o("BaseButton"),S=o("BaseModal");return m(),D(S,{show:L.visibility,onClose:M},{title:e(()=>[l(i(u.$trans("global.reorder",{attribute:u.$trans("site.menu.menu")})),1)]),default:e(()=>[s.headerMenus.length?(m(),h("div",oe,[t(C,null,{default:e(()=>[l(i(u.$trans("site.menu.placements.header")),1)]),_:1}),t(v(V),{class:"space-y-2",list:s.headerMenus,"item-key":"uuid"},{item:e(({element:F,index:I})=>[b("div",le,[a[0]||(a[0]=b("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),t(R,null,{default:e(()=>[l(i(F.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(m(),h("div",ie,[t(d,{design:"info",size:"xs"},{default:e(()=>[l(i(u.$trans("general.errors.record_not_found")),1)]),_:1})])),s.footerMenus.length?(m(),h("div",re,[t(C,null,{default:e(()=>[l(i(u.$trans("site.menu.placements.footer")),1)]),_:1}),t(v(V),{class:"space-y-2",list:s.footerMenus,"item-key":"uuid"},{item:e(({element:F,index:I})=>[b("div",ue,[a[1]||(a[1]=b("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),t(R,null,{default:e(()=>[l(i(F.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(m(),h("div",de,[t(d,{design:"info",size:"xs"},{default:e(()=>[l(i(u.$trans("general.errors.record_not_found")),1)]),_:1})])),s.headerMenus.length||s.footerMenus.length?(m(),h("div",me,[t(n,{onClick:$},{default:e(()=>[l(i(u.$trans("general.reorder")),1)]),_:1})])):U("",!0)]),_:1},8,["show"])}}}),pe={key:0},_e={class:"flex border rounded-xl px-4 py-2"},ve={key:1},ge={key:2,class:"mt-4 flex justify-end"},$e={name:"SiteMenuReorderSubMenu"},Me=Object.assign($e,{props:{selectedMenu:{type:Object,default:()=>{}},visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(L,{emit:k}){P();const _=N(),f=k,p=L,w={menus:[]};z("site/menu/");const s=H(!1),c=B({menus:[]});B({...w});const $=async()=>{s.value=!0,await _.dispatch("site/menu/list",{params:{menu:p.selectedMenu.uuid}}).then(a=>{s.value=!1,c.menus=a}).catch(a=>{s.value=!1})},M=async()=>{s.value=!0,await _.dispatch("site/menu/reorderSubMenu",{data:{menu:p.selectedMenu.uuid,menus:c.menus}}).then(a=>{s.value=!1,f("refresh"),f("close")}).catch(a=>{s.value=!1})},u=()=>{f("close")};return W(()=>p.selectedMenu,a=>{a&&$()},{deep:!0}),(a,C)=>{const R=o("BaseHeading"),d=o("BaseLabel"),n=o("BaseAlert"),S=o("BaseButton"),F=o("BaseModal");return m(),D(F,{show:L.visibility,onClose:u},{title:e(()=>[l(i(a.$trans("global.reorder",{attribute:a.$trans("site.menu.menu")})),1)]),default:e(()=>[c.menus.length?(m(),h("div",pe,[t(R,null,{default:e(()=>[l(i(a.$trans("site.menu.menu")),1)]),_:1}),t(v(V),{class:"space-y-2",list:c.menus,"item-key":"uuid"},{item:e(({element:I,index:T})=>[b("div",_e,[C[0]||(C[0]=b("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),t(d,null,{default:e(()=>[l(i(I.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(m(),h("div",ve,[t(n,{design:"info",size:"xs"},{default:e(()=>[l(i(a.$trans("general.errors.record_not_found")),1)]),_:1})])),c.menus.length?(m(),h("div",ge,[t(S,{onClick:M},{default:e(()=>[l(i(a.$trans("general.reorder")),1)]),_:1})])):U("",!0)]),_:1},8,["show"])}}}),he={name:"SiteMenuList"},Be=Object.assign(he,{emits:["refresh"],setup(L,{emit:k}){const _=Z(),f=k,p=ee("emitter");let w=["filter"];w.unshift("create");let g=["print","pdf","excel"];const s="site/menu/",c=H(!1),$=H(!1),M=H(!1),u=B({}),a=B({selectedMenu:null}),C=d=>{Object.assign(u,d)},R=d=>{a.selectedMenu=d,M.value=!0};return(d,n)=>{const S=o("BaseButton"),F=o("PageHeaderAction"),I=o("PageHeader"),T=o("ParentTransition"),E=o("TextMuted"),j=o("DataCell"),A=o("FloatingMenuItem"),q=o("FloatingMenu"),G=o("DataRow"),J=o("DataTable"),K=o("ListItem"),Q=te("tooltip");return m(),h(O,null,[t(K,{"init-url":s,"additional-query":{},onSetItems:C},{header:e(()=>[t(I,{title:d.$trans("site.menu.menu"),navs:[{label:d.$trans("site.site"),path:"Site"}]},{default:e(()=>[t(F,{url:"site/menus/",name:"SiteMenu",title:d.$trans("site.menu.menu"),actions:v(w),"dropdown-actions":v(g),"config-path":"SiteConfig",onToggleFilter:n[2]||(n[2]=r=>c.value=!c.value)},{after:e(()=>[t(S,{design:"white",onClick:n[1]||(n[1]=r=>v(_).push({name:"SiteConfig"}))},{default:e(()=>n[12]||(n[12]=[b("i",{class:"fas fa-cog"},null,-1)])),_:1})]),default:e(()=>[X((m(),D(S,{design:"white",onClick:n[0]||(n[0]=r=>$.value=!$.value)},{default:e(()=>n[11]||(n[11]=[b("i",{class:"fas fa-arrows-up-down-left-right"},null,-1)])),_:1})),[[Q,d.$trans("global.reorder",{attribute:d.$trans("site.menu.menu")})]])]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(T,{appear:"",visibility:c.value},{default:e(()=>[t(ae,{onRefresh:n[3]||(n[3]=r=>v(p).emit("listItems")),onHide:n[4]||(n[4]=r=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(T,{appear:"",visibility:!0},{default:e(()=>[t(J,{header:u.headers,meta:u.meta,module:"site.menu",onRefresh:n[6]||(n[6]=r=>v(p).emit("listItems"))},{actionButton:e(()=>[t(S,{onClick:n[5]||(n[5]=r=>v(_).push({name:"SiteMenuCreate"}))},{default:e(()=>[l(i(d.$trans("global.add",{attribute:d.$trans("site.menu.menu")})),1)]),_:1})]),default:e(()=>[(m(!0),h(O,null,Y(u.data,r=>(m(),D(G,{key:r.uuid},{default:e(()=>[t(j,{name:"name"},{default:e(()=>[l(i(r.name)+" ",1),t(E,{block:""},{default:e(()=>{var y;return[l(i((y=r.parent)==null?void 0:y.name),1)]}),_:2},1024)]),_:2},1024),t(j,{name:"placement"},{default:e(()=>[l(i(r.placement.label),1)]),_:2},1024),t(j,{name:"page"},{default:e(()=>{var y;return[l(i(((y=r.page)==null?void 0:y.title)||"-"),1)]}),_:2},1024),t(j,{name:"action"},{default:e(()=>[t(q,null,{default:e(()=>[r.parent==null?(m(),D(A,{key:0,icon:"fas fa-arrows-alt",onClick:y=>R(r)},{default:e(()=>[l(i(d.$trans("general.reorder")),1)]),_:2},1032,["onClick"])):U("",!0),t(A,{icon:"fas fa-edit",onClick:y=>v(_).push({name:"SiteMenuEdit",params:{uuid:r.uuid}})},{default:e(()=>[l(i(d.$trans("general.edit")),1)]),_:2},1032,["onClick"]),t(A,{icon:"fas fa-copy",onClick:y=>v(_).push({name:"SiteMenuDuplicate",params:{uuid:r.uuid}})},{default:e(()=>[l(i(d.$trans("general.duplicate")),1)]),_:2},1032,["onClick"]),t(A,{icon:"fas fa-trash",onClick:y=>v(p).emit("deleteItem",{uuid:r.uuid})},{default:e(()=>[l(i(d.$trans("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1}),t(fe,{visibility:$.value,onClose:n[7]||(n[7]=r=>$.value=!1),onRefresh:n[8]||(n[8]=r=>f("refresh"))},null,8,["visibility"]),t(Me,{"selected-menu":a.selectedMenu,visibility:M.value,onClose:n[9]||(n[9]=r=>M.value=!1),onRefresh:n[10]||(n[10]=r=>f("refresh"))},null,8,["selected-menu","visibility"])],64)}}});export{Be as default};
