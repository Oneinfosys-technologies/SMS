import{f as P,m as A,n as E,r as u,o,q as b,w as e,d as w,e as t,b as C,G,l as U,s as l,t as i,a as $,u as m,i as J,J as Z,y as M,F as H,A as N,v as z,h as ee,j as te,z as se}from"./app-DCfJDSeM.js";import{d as K}from"./vuedraggable.umd-DO5pvILy.js";const ae={class:"grid grid-cols-3 gap-6"},oe={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},ie={class:"col-span-3 sm:col-span-1"},le={class:"col-span-3 sm:col-span-1"},re={__name:"Filter",emits:["hide"],setup(I,{emit:R}){const p=P(),v=R,y={name:"",code:"",shortcode:"",divisions:[]},_=A({...y}),h=A({divisions:[],isLoaded:!p.query.divisions});return E(async()=>{h.divisions=p.query.divisions?p.query.divisions.split(","):[],h.isLoaded=!0}),(r,d)=>{const g=u("BaseInput"),B=u("BaseSelectSearch"),f=u("FilterForm");return o(),b(f,{"init-form":y,form:_,multiple:["divisions"],onHide:d[4]||(d[4]=n=>v("hide"))},{default:e(()=>[w("div",ae,[w("div",oe,[t(g,{type:"text",modelValue:_.name,"onUpdate:modelValue":d[0]||(d[0]=n=>_.name=n),name:"name",label:r.$trans("academic.course.props.name")},null,8,["modelValue","label"])]),w("div",ne,[t(g,{type:"text",modelValue:_.code,"onUpdate:modelValue":d[1]||(d[1]=n=>_.code=n),name:"code",label:r.$trans("academic.course.props.code")},null,8,["modelValue","label"])]),w("div",ie,[t(g,{type:"text",modelValue:_.shortcode,"onUpdate:modelValue":d[2]||(d[2]=n=>_.shortcode=n),name:"shortcode",label:r.$trans("academic.course.props.shortcode")},null,8,["modelValue","label"])]),w("div",le,[h.isLoaded?(o(),b(B,{key:0,multiple:"",name:"divisions",label:r.$trans("global.select",{attribute:r.$trans("academic.division.division")}),modelValue:_.divisions,"onUpdate:modelValue":d[3]||(d[3]=n=>_.divisions=n),"value-prop":"uuid","init-search":h.divisions,"search-action":"academic/division/list"},null,8,["label","modelValue","init-search"])):C("",!0)])])]),_:1},8,["form"])}}},de={key:0},ce={class:"flex border rounded-xl px-4 py-2"},ue={key:1},me={key:2,class:"mt-4 flex justify-end"},fe={name:"AcademicCourseReorder"},pe=Object.assign(fe,{props:{visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(I,{emit:R}){P();const p=J(),v=R,y={courses:[]};G("academic/course/");const h=U(!1),r=A({courses:[]});A({...y});const d=async()=>{h.value=!0,await p.dispatch("academic/course/list",{params:{all:!0}}).then(f=>{h.value=!1,r.courses=f}).catch(f=>{h.value=!1})},g=async()=>{h.value=!0,await p.dispatch("academic/course/reorder",{data:{courses:r.courses}}).then(f=>{h.value=!1,v("refresh"),v("close")}).catch(f=>{h.value=!1})},B=()=>{v("close")};return E(()=>{d()}),(f,n)=>{const L=u("BaseLabel"),c=u("BaseAlert"),a=u("BaseButton"),F=u("BaseModal");return o(),b(F,{show:I.visibility,onClose:B},{title:e(()=>[l(i(f.$trans("global.reorder",{attribute:f.$trans("academic.course.course")})),1)]),default:e(()=>[r.courses.length?(o(),$("div",de,[t(m(K),{class:"space-y-2",list:r.courses,"item-key":"uuid"},{item:e(({element:D,index:S})=>[w("div",ce,[n[0]||(n[0]=w("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),t(L,null,{default:e(()=>[l(i(D.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(o(),$("div",ue,[t(c,{design:"info",size:"xs"},{default:e(()=>[l(i(f.$trans("general.errors.record_not_found")),1)]),_:1})])),r.courses.length?(o(),$("div",me,[t(a,{onClick:g},{default:e(()=>[l(i(f.$trans("general.reorder")),1)]),_:1})])):C("",!0)]),_:1},8,["show"])}}}),ve={key:0},_e={class:"flex border rounded-xl px-4 py-2"},he={key:1},be={key:2,class:"mt-4 flex justify-end"},$e={name:"AcademicCourseReorderBatch"},ye=Object.assign($e,{props:{selectedCourse:{type:Object,default:()=>{}},visibility:{type:Boolean,default:!1}},emits:["close","refresh"],setup(I,{emit:R}){P();const p=J(),v=R,y=I,_={batches:[]};G("academic/course/");const r=U(!1),d=A({batches:[]});A({..._});const g=async()=>{r.value=!0,await p.dispatch("academic/batch/list",{params:{courses:[y.selectedCourse.uuid],all:!0}}).then(n=>{r.value=!1,d.batches=n}).catch(n=>{r.value=!1})},B=async()=>{r.value=!0,await p.dispatch("academic/course/reorderBatch",{data:{course:y.selectedCourse.uuid,batches:d.batches}}).then(n=>{r.value=!1,v("refresh"),v("close")}).catch(n=>{r.value=!1})},f=()=>{v("close")};return Z(()=>y.selectedCourse,n=>{n&&g()},{deep:!0}),(n,L)=>{const c=u("BaseLabel"),a=u("BaseAlert"),F=u("BaseButton"),D=u("BaseModal");return o(),b(D,{show:I.visibility,onClose:f},{title:e(()=>[l(i(n.$trans("global.reorder",{attribute:n.$trans("academic.batch.batch")})),1)]),default:e(()=>[d.batches.length?(o(),$("div",ve,[t(m(K),{class:"space-y-2",list:d.batches,"item-key":"uuid"},{item:e(({element:S,index:q})=>[w("div",_e,[L[0]||(L[0]=w("i",{class:"fas fa-arrows mr-2 cursor-pointer"},null,-1)),t(c,null,{default:e(()=>[l(i(S.name),1)]),_:2},1024)])]),_:1},8,["list"])])):(o(),$("div",he,[t(a,{design:"info",size:"xs"},{default:e(()=>[l(i(n.$trans("general.errors.record_not_found")),1)]),_:1})])),d.batches.length?(o(),$("div",be,[t(F,{onClick:B},{default:e(()=>[l(i(n.$trans("general.reorder")),1)]),_:1})])):C("",!0)]),_:1},8,["show"])}}}),ge={key:0},ke={key:0,class:"far fa-check-circle fa-xl text-success"},Ce={key:1,class:"far fa-circle-xmark fa-xl text-danger"},Be={name:"AcademicCourseList"},Fe=Object.assign(Be,{emits:["refresh"],setup(I,{emit:R}){const p=ee(),v=te("emitter");let y=["filter"];M("course:create")&&y.unshift("create");let _=[];M("course:export")&&(_=["print","pdf","excel"]);const h="academic/course/",r=U(!1),d=U(!1),g=U(!1),B=A({}),f=A({selectedCourse:null}),n=c=>{Object.assign(B,c)},L=c=>{f.selectedCourse=c,g.value=!0};return(c,a)=>{const F=u("BaseButton"),D=u("PageHeaderAction"),S=u("PageHeader"),q=u("ParentTransition"),T=u("TextMuted"),V=u("DataCell"),j=u("FloatingMenuItem"),Q=u("FloatingMenu"),W=u("DataRow"),X=u("DataTable"),Y=u("ListItem"),O=se("tooltip");return o(),$(H,null,[t(Y,{"init-url":h,"additional-query":{details:!0},onSetItems:n},{header:e(()=>[t(S,{title:c.$trans("academic.course.course"),navs:[{label:c.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[t(D,{url:"academic/courses/",name:"AcademicCourse",title:c.$trans("academic.course.course"),actions:m(y),"dropdown-actions":m(_),"additional-dropdown-actions-query":{details:!0},onToggleFilter:a[2]||(a[2]=s=>r.value=!r.value)},{default:e(()=>[N((o(),b(F,{design:"white",onClick:a[0]||(a[0]=s=>d.value=!d.value)},{default:e(()=>a[11]||(a[11]=[w("i",{class:"fas fa-arrows-up-down-left-right"},null,-1)])),_:1})),[[O,c.$trans("global.reorder",{attribute:c.$trans("academic.course.course")})]]),m(M)("course-incharge:read")?(o(),b(F,{key:0,design:"white",onClick:a[1]||(a[1]=s=>m(p).push({name:"AcademicCourseIncharge"}))},{default:e(()=>[l(i(c.$trans("employee.incharge.incharge")),1)]),_:1})):C("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(q,{appear:"",visibility:r.value},{default:e(()=>[t(re,{onRefresh:a[3]||(a[3]=s=>m(v).emit("listItems")),onHide:a[4]||(a[4]=s=>r.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[t(q,{appear:"",visibility:!0},{default:e(()=>[t(X,{header:B.headers,meta:B.meta,module:"academic.course",onRefresh:a[6]||(a[6]=s=>m(v).emit("listItems"))},{actionButton:e(()=>[m(M)("course:create")?(o(),b(F,{key:0,onClick:a[5]||(a[5]=s=>m(p).push({name:"AcademicCourseCreate"}))},{default:e(()=>[l(i(c.$trans("global.add",{attribute:c.$trans("academic.course.course")})),1)]),_:1})):C("",!0)]),default:e(()=>[(o(!0),$(H,null,z(B.data,s=>(o(),b(W,{key:s.uuid},{default:e(()=>[t(V,{name:"name"},{default:e(()=>[l(i(s.name)+" ",1),s.term?(o(),$("span",ge,"("+i(s.term)+")",1)):C("",!0),s.enableRegistration?(o(),b(T,{key:1,block:""},{default:e(()=>[l(i(s.registrationFee.formatted),1)]),_:2},1024)):C("",!0),s.pgAccount?(o(),b(T,{key:2,block:""},{default:e(()=>[l(i(s.pgAccount),1)]),_:2},1024)):C("",!0)]),_:2},1024),t(V,{name:"division"},{default:e(()=>[l(i(s.division.name),1)]),_:2},1024),t(V,{name:"code"},{default:e(()=>[l(i(s.code)+" ",1),t(T,{block:""},{default:e(()=>[l(i(s.shortcode),1)]),_:2},1024)]),_:2},1024),t(V,{name:"incharge"},{default:e(()=>[(o(!0),$(H,null,z(s.incharges,k=>{var x;return o(),$("div",null,[l(i(((x=k==null?void 0:k.employee)==null?void 0:x.name)||"-")+" ",1),t(T,null,{default:e(()=>[l(i(k==null?void 0:k.period),1)]),_:2},1024)])}),256))]),_:2},1024),t(V,{name:"registration"},{default:e(()=>[s.enableRegistration?N((o(),$("i",ke,null,512)),[[O,c.$trans("academic.course.props.enable_registartion")]]):(o(),$("i",Ce))]),_:2},1024),t(V,{name:"createdAt"},{default:e(()=>[l(i(s.createdAt.formatted),1)]),_:2},1024),t(V,{name:"action"},{default:e(()=>[t(Q,null,{default:e(()=>[t(j,{icon:"fas fa-arrow-circle-right",onClick:k=>m(p).push({name:"AcademicCourseShow",params:{uuid:s.uuid}})},{default:e(()=>[l(i(c.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(j,{icon:"fas fa-arrows-alt",onClick:k=>L(s)},{default:e(()=>[l(i(c.$trans("general.reorder")),1)]),_:2},1032,["onClick"]),m(M)("course:edit")?(o(),b(j,{key:0,icon:"fas fa-edit",onClick:k=>m(p).push({name:"AcademicCourseEdit",params:{uuid:s.uuid}})},{default:e(()=>[l(i(c.$trans("general.edit")),1)]),_:2},1032,["onClick"])):C("",!0),m(M)("course:create")?(o(),b(j,{key:1,icon:"fas fa-copy",onClick:k=>m(p).push({name:"AcademicCourseDuplicate",params:{uuid:s.uuid}})},{default:e(()=>[l(i(c.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):C("",!0),m(M)("course:delete")?(o(),b(j,{key:2,icon:"fas fa-trash",onClick:k=>m(v).emit("deleteItem",{uuid:s.uuid})},{default:e(()=>[l(i(c.$trans("general.delete")),1)]),_:2},1032,["onClick"])):C("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1}),t(pe,{visibility:d.value,onClose:a[7]||(a[7]=s=>d.value=!1),onRefresh:a[8]||(a[8]=s=>m(v).emit("listItems"))},null,8,["visibility"]),t(ye,{"selected-course":f.selectedCourse,visibility:g.value,onClose:a[9]||(a[9]=s=>g.value=!1),onRefresh:a[10]||(a[10]=s=>m(v).emit("listItems"))},null,8,["selected-course","visibility"])],64)}}});export{Fe as default};
