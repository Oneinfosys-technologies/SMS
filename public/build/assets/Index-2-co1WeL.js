import{l as N,m as C,J as U,n as I,a as s,q as k,w as r,u as f,b,e as d,F as m,I as P,r as o,o as t,d as i,v as y,s as $,t as g,f as S,h as E,i as J}from"./app-DCfJDSeM.js";const W={class:"space-x-4"},z={class:"border border-gray-200 dark:border-gray-700 sm:rounded-lg scroller-thin-x scroller-hidden scrollbar-track-transparent scrollbar-thumb-body dark:scrollbar-thumb-dm-body"},G={key:0,class:"table min-w-full divide-y divide-gray-200 dark:divide-gray-700"},K={class:"bg-gray-50 dark:bg-neutral-700"},Q={class:"sticky-column bg-gray-50 dark:bg-neutral-700 px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"},X={class:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400"},Y={class:"dark:bg-dark-body divide-y divide-gray-200 bg-white dark:divide-gray-700"},Z={class:"sticky-column bg-white dark:bg-dark-body py-2 pl-6 text-sm text-gray-500 dark:text-gray-400"},ee={class:"py-2 pl-6 text-sm text-gray-500 dark:text-gray-400"},te={name:"TeamConfigPermissionAssign"},se=Object.assign(te,{props:{team:{type:Object,default(){return{name:""}}}},setup(_){const l=S(),v=E(),T=J(),p=N(!1),x="team/permission/",u=C({modules:[]}),n={selectedModule:"",assignedPermissions:[]},c=C({...n}),A=e=>{v.push({name:"TeamConfigPermissionAssignModule",params:{module:e}})},w=async()=>{p.value=!0,await T.dispatch(x+"preRequisite",{uuid:l.params.uuid,data:l.params.module||"general"}).then(e=>{p.value=!1,Object.assign(u,{modules:e.modules,selectedModule:e.selectedModule,roles:e.roles}),n.selectedModule=e.selectedModule,n.assignedPermissions=e.assignedPermissions,Object.assign(c,P(n))}).catch(e=>{p.value=!1})};return U(()=>l.params.module,e=>{e&&(n.selectedModule=e,Object.assign(c,P(n)),w())}),I(()=>{w()}),(e,B)=>{const M=o("DropdownItem"),V=o("DropdownButton"),D=o("BaseButton"),j=o("PageHeader"),F=o("CardHeader"),L=o("BaseCheckbox"),O=o("BaseLoader"),R=o("FormAction"),q=o("ParentTransition");return t(),s(m,null,[_.team.uuid?(t(),k(j,{key:0,title:e.$trans(f(l).meta.label),navs:[{label:e.$trans("team.team"),path:"TeamList"},{label:_.team.name,path:{name:"TeamShow",params:{uuid:_.team.uuid}}},{label:e.$trans("team.config.config"),path:"TeamConfig"}]},{default:r(()=>[i("div",W,[u.modules.length?(t(),k(V,{key:0,direction:"down",label:e.$trans("module."+u.selectedModule)},{default:r(()=>[(t(!0),s(m,null,y(u.modules,a=>(t(),s("div",{key:a.value},[a.value!=f(l).params.module?(t(),k(M,{key:0,as:"span",onClick:h=>A(a.value)},{default:r(()=>[$(g(a.label),1)]),_:2},1032,["onClick"])):b("",!0)]))),128))]),_:1},8,["label"])):b("",!0),d(D,{onClick:B[0]||(B[0]=a=>f(v).push({name:"TeamConfigUserPermission"}))},{default:r(()=>[$(g(e.$trans("team.config.permission.user_permission")),1)]),_:1})])]),_:1},8,["title","navs"])):b("",!0),d(q,{appear:"",visibility:!0},{default:r(()=>[d(R,{"no-data-fetch":"","init-url":x,uuid:f(l).params.uuid,action:"roleWiseAssign","init-form":n,form:c,"stay-on":""},{default:r(()=>[d(F,{first:"",title:e.$trans("team.config.permission.permission_config"),description:e.$trans("team.config.permission.permission_info")},null,8,["title","description"]),d(O,{"is-loading":p.value},{default:r(()=>[i("div",z,[c.assignedPermissions.length?(t(),s("table",G,[i("thead",K,[i("tr",null,[i("th",Q,g(e.$trans("team.config.permission.permission")),1),(t(!0),s(m,null,y(u.roles,a=>(t(),s("th",X,g(a.label),1))),256))])]),i("tbody",Y,[(t(!0),s(m,null,y(c.assignedPermissions,a=>(t(),s("tr",{key:a.name},[i("td",Z,g(a.name),1),(t(!0),s(m,null,y(a.roles,h=>(t(),s("td",ee,[d(L,{modelValue:h.isAssigned,"onUpdate:modelValue":H=>h.isAssigned=H},null,8,["modelValue","onUpdate:modelValue"])]))),256))]))),128))])])):b("",!0)])]),_:1},8,["is-loading"])]),_:1},8,["uuid","form"])]),_:1})],64)}}});export{se as default};
