import{f as N,m as F,n as R,r as u,o as f,q as v,w as e,d as k,s as l,t as a,b as h,e as o,y as _,l as A,u as d,a as U,v as E,F as P,h as W,j as z}from"./app-DCfJDSeM.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={__name:"Filter",emits:["hide"],setup(S,{emit:y}){const r=N(),I=y,j={batches:[],subjects:[],employees:[],startDate:"",endDate:""},m=F({...j}),c=F({batches:[],subjects:[],employees:[],isLoaded:!(r.query.batches||r.query.subjects||r.query.employees)});return R(async()=>{c.batches=r.query.batches?r.query.batches.split(","):[],c.subjects=r.query.subjects?r.query.subjects.split(","):[],c.employees=r.query.employees?r.query.employees.split(","):[],c.isLoaded=!0}),(p,i)=>{const $=u("BaseSelectSearch"),b=u("DatePicker"),n=u("FilterForm");return f(),v(n,{"init-form":j,form:m,multiple:["batches","subjects","employees"],onHide:i[5]||(i[5]=t=>I("hide"))},{default:e(()=>[k("div",G,[k("div",J,[c.isLoaded?(f(),v($,{key:0,multiple:"",name:"batches",label:p.$trans("global.select",{attribute:p.$trans("academic.batch.batch")}),modelValue:m.batches,"onUpdate:modelValue":i[0]||(i[0]=t=>m.batches=t),"value-prop":"uuid","init-search":c.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:e(t=>[l(a(t.value.course.name)+" "+a(t.value.name),1)]),listOption:e(t=>[l(a(t.option.course.nameWithTerm)+" "+a(t.option.name),1)]),_:1},8,["label","modelValue","init-search"])):h("",!0)]),k("div",K,[c.isLoaded?(f(),v($,{key:0,multiple:"",name:"subjects",label:p.$trans("global.select",{attribute:p.$trans("academic.subject.subject")}),modelValue:m.subjects,"onUpdate:modelValue":i[1]||(i[1]=t=>m.subjects=t),"value-prop":"uuid","init-search":c.subjects,"search-action":"academic/subject/list"},{selectedOption:e(t=>[l(a(t.value.name)+" ("+a(t.value.code)+") ",1)]),listOption:e(t=>[l(a(t.option.name)+" ("+a(t.option.code)+") ",1)]),_:1},8,["label","modelValue","init-search"])):h("",!0)]),k("div",Q,[c.isLoaded?(f(),v($,{key:0,multiple:"",name:"employees",label:p.$trans("global.select",{attribute:p.$trans("employee.employee")}),modelValue:m.employees,"onUpdate:modelValue":i[2]||(i[2]=t=>m.employees=t),"value-prop":"uuid","init-search":c.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(t=>[l(a(t.value.name)+" ("+a(t.value.codeNumber)+") ",1)]),listOption:e(t=>[l(a(t.option.name)+" ("+a(t.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):h("",!0)]),k("div",X,[o(b,{start:m.startDate,"onUpdate:start":i[3]||(i[3]=t=>m.startDate=t),end:m.endDate,"onUpdate:end":i[4]||(i[4]=t=>m.endDate=t),name:"dateBetween",as:"range",label:p.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Z={name:"AcademicSubjectInchargeList"},ee=Object.assign(Z,{setup(S){const y=W(),r=z("emitter");let I=["filter"];_("subject-incharge:create")&&I.unshift("create");let j=[];_("subject-incharge:export")&&(j=["print","pdf","excel"]),_("subject-incharge:create")&&j.unshift("import");const m="academic/subjectIncharge/",c=A(!1),p=A(!1),i=F({}),$=b=>{Object.assign(i,b)};return(b,n)=>{const t=u("PageHeaderAction"),V=u("PageHeader"),q=u("BaseImport"),D=u("ParentTransition"),w=u("TextMuted"),g=u("DataCell"),C=u("FloatingMenuItem"),T=u("FloatingMenu"),L=u("DataRow"),O=u("BaseButton"),H=u("DataTable"),M=u("ListItem");return f(),v(M,{"init-url":m,onSetItems:$},{header:e(()=>[o(V,{title:b.$trans("academic.subject_incharge.subject_incharge"),navs:[{label:b.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[o(t,{url:"academic/subject-incharges/",name:"AcademicSubjectIncharge",title:b.$trans("academic.subject_incharge.subject_incharge"),actions:d(I),"dropdown-actions":d(j),onToggleFilter:n[0]||(n[0]=s=>c.value=!c.value),onToggleImport:n[1]||(n[1]=s=>p.value=!p.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),import:e(()=>[o(D,{appear:"",visibility:p.value},{default:e(()=>[o(q,{path:"academic/subject-incharges/import",onCancelled:n[2]||(n[2]=s=>p.value=!1),onHide:n[3]||(n[3]=s=>p.value=!1),onCompleted:n[4]||(n[4]=s=>d(r).emit("listItems"))})]),_:1},8,["visibility"])]),filter:e(()=>[o(D,{appear:"",visibility:c.value},{default:e(()=>[o(Y,{onRefresh:n[5]||(n[5]=s=>d(r).emit("listItems")),onHide:n[6]||(n[6]=s=>c.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[o(D,{appear:"",visibility:!0},{default:e(()=>[o(H,{header:i.headers,meta:i.meta,module:"academic.subject_incharge",onRefresh:n[8]||(n[8]=s=>d(r).emit("listItems"))},{actionButton:e(()=>[d(_)("subject-incharge:create")?(f(),v(O,{key:0,onClick:n[7]||(n[7]=s=>d(y).push({name:"AcademicSubjectInchargeCreate"}))},{default:e(()=>[l(a(b.$trans("global.add",{attribute:b.$trans("academic.subject_incharge.subject_incharge")})),1)]),_:1})):h("",!0)]),default:e(()=>[(f(!0),U(P,null,E(i.data,s=>(f(),v(L,{key:s.uuid},{default:e(()=>[o(g,{name:"subject"},{default:e(()=>[l(a(s.subject.name)+" ",1),o(w,{block:""},{default:e(()=>[l(a(s.subject.code),1)]),_:2},1024)]),_:2},1024),o(g,{name:"batch"},{default:e(()=>[l(a(s.batch.course.name)+" ",1),o(w,{block:""},{default:e(()=>[l(a(s.batch.name),1)]),_:2},1024)]),_:2},1024),o(g,{name:"employee"},{default:e(()=>[l(a(s.employee.name)+" ",1),o(w,{block:""},{default:e(()=>[l(a(s.employee.codeNumber),1)]),_:2},1024)]),_:2},1024),o(g,{name:"period"},{default:e(()=>[l(a(s.period),1)]),_:2},1024),o(g,{name:"createdAt"},{default:e(()=>[l(a(s.createdAt.formatted),1)]),_:2},1024),o(g,{name:"action"},{default:e(()=>[o(T,null,{default:e(()=>[o(C,{icon:"fas fa-arrow-circle-right",onClick:B=>d(y).push({name:"AcademicSubjectInchargeShow",params:{uuid:s.uuid}})},{default:e(()=>[l(a(b.$trans("general.show")),1)]),_:2},1032,["onClick"]),d(_)("subject-incharge:edit")?(f(),v(C,{key:0,icon:"fas fa-edit",onClick:B=>d(y).push({name:"AcademicSubjectInchargeEdit",params:{uuid:s.uuid}})},{default:e(()=>[l(a(b.$trans("general.edit")),1)]),_:2},1032,["onClick"])):h("",!0),d(_)("subject-incharge:create")?(f(),v(C,{key:1,icon:"fas fa-copy",onClick:B=>d(y).push({name:"AcademicSubjectInchargeDuplicate",params:{uuid:s.uuid}})},{default:e(()=>[l(a(b.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):h("",!0),d(_)("subject-incharge:delete")?(f(),v(C,{key:2,icon:"fas fa-trash",onClick:B=>d(r).emit("deleteItem",{uuid:s.uuid})},{default:e(()=>[l(a(b.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{ee as default};
