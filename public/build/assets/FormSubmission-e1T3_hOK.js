import{l as H,m as I,n as te,J as ae,a as c,e as o,w as e,u as s,F as C,j as se,r as m,o as i,q as b,s as n,t as l,b as d,d as v,v as M,i as le,f as ne,h as oe,C as ie}from"./app-DCfJDSeM.js";const ue={class:"space-y-4"},de={class:"px-4 py-2 mb-4 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-2"},re={key:0},me={key:1,class:"grid grid-cols-1 gap-x-4 gap-y-8 px-4 pt-4 sm:grid-cols-3"},ce={key:2,class:"grid grid-cols-1 gap-x-4 gap-y-8 px-4 pt-4 sm:grid-cols-2"},fe=["innerHTML"],_e={key:3,class:"mt-4 px-4"},pe={key:4,class:"mt-4 px-4"},be={key:5,class:"mt-4 px-4"},xe={class:"mt-4"},he={key:6,class:"mt-4 px-4"},ve={class:"text-sm"},ge={key:7,class:"mt-4 px-4"},ye={class:"text-sm"},ke={key:1,class:"px-4"},Fe={name:"ExamScheduleFormSubmission"},Se=Object.assign(Fe,{setup(Ae){const g=le(),B=ne(),j=oe(),t=se("$trans"),P={},w=H(!1),r=H(!1),L="exam/schedule/",z=[{key:"sno",label:t("general.sno"),visibility:!0},{key:"subject",label:t("academic.subject.subject"),visibility:!0},{key:"date",label:t("exam.schedule.props.date"),visibility:!0},{key:"assessment",label:t("exam.assessment.assessment"),visibility:!0},{key:"action",label:"",visibility:!0}],a=I({...P}),f=I({student:{}}),R=u=>{Object.assign(a,u)},V=async()=>{r.value=!0,await g.dispatch("student/getSummary",{params:{feeSummary:!0,date:"today"}}).then(u=>{r.value=!1,Object.assign(f,u)}).catch(u=>{r.value=!1})},$=async()=>{r.value=!0,await g.dispatch(L+"confirmForm",{uuid:a.uuid}).then(u=>{r.value=!1,w.value=!0,V()}).catch(u=>{r.value=!1})},O=async()=>{r.value=!0,await g.dispatch(L+"submitForm",{uuid:a.uuid}).then(u=>{r.value=!1,w.value=!0}).catch(u=>{r.value=!1})},U=async()=>{r.value=!0,await g.dispatch("exam/form/printExamForm",{uuid:a.formUuid}).then(u=>{r.value=!1,window.open("/print").document.write(u)}).catch(u=>{r.value=!1})},q=async()=>{r.value=!0,await g.dispatch("exam/form/printAdmitCard",{uuid:a.formUuid}).then(u=>{r.value=!1,window.open("/print").document.write(u)}).catch(u=>{r.value=!1})};return te(()=>{V()}),ae(()=>a,u=>{(!a.hasForm||!ie("student"))&&j.push({name:"ExamScheduleShow",params:{uuid:u.uuid}})},{deep:!0}),(u,S)=>{const G=m("PageHeaderAction"),J=m("PageHeader"),_=m("ListItemView"),K=m("ListContainerVertical"),T=m("BaseCard"),y=m("TextMuted"),x=m("BaseDataView"),k=m("DataCell"),Q=m("DataRow"),W=m("SimpleTable"),F=m("BaseAlert"),D=m("BaseButton"),X=m("DetailLayoutVertical"),Y=m("ShowItem"),Z=m("ParentTransition");return i(),c(C,null,[o(J,{title:s(t)(s(B).meta.label),navs:[{label:s(t)("exam.exam"),path:"Exam"},{label:s(t)("exam.schedule.schedule"),path:"ExamScheduleList"}]},{default:e(()=>[o(G,{name:"ExamSchedule",title:s(t)("exam.schedule.schedule"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),o(Z,{appear:"",visibility:!0},{default:e(()=>[o(Y,{"additional-query":{formSubmission:!0},"init-url":L,uuid:s(B).params.uuid,onSetItem:R,onRedirectTo:S[0]||(S[0]=h=>s(j).push({name:"ExamSchedule"})),refresh:w.value,onRefreshed:S[1]||(S[1]=h=>w.value=!1)},{default:e(()=>[a.uuid?(i(),b(X,{key:0},{detail:e(()=>[f.student.uuid?(i(),b(T,{key:0,"no-padding":"","no-content-padding":""},{title:e(()=>[n(l(s(t)("global.detail",{attribute:s(t)("exam.schedule.schedule")})),1)]),default:e(()=>[o(K,null,{default:e(()=>[o(_,{label:s(t)("student.props.name")},{default:e(()=>[n(l(f.student.name),1)]),_:1},8,["label"]),o(_,{label:s(t)("contact.props.father_name")},{default:e(()=>[n(l(f.student.fatherName),1)]),_:1},8,["label"]),o(_,{label:s(t)("contact.props.mother_name")},{default:e(()=>[n(l(f.student.motherName),1)]),_:1},8,["label"]),o(_,{label:s(t)("contact.props.birth_date")},{default:e(()=>[n(l(f.student.birthDate.formatted),1)]),_:1},8,["label"]),o(_,{label:s(t)("contact.props.gender")},{default:e(()=>[n(l(f.student.gender.label),1)]),_:1},8,["label"]),o(_,{label:s(t)("academic.course.course")},{default:e(()=>[n(l(f.student.courseName+" "+f.student.batchName),1)]),_:1},8,["label"]),o(_,{label:s(t)("student.props.roll_number")},{default:e(()=>[n(l(f.student.rollNumber),1)]),_:1},8,["label"]),o(_,{label:s(t)("student.fee.total")},{default:e(()=>[n(l(f.feeSummary.totalFee.formatted),1)]),_:1},8,["label"]),o(_,{label:s(t)("student.fee.paid")},{default:e(()=>[n(l(f.feeSummary.paidFee.formatted),1)]),_:1},8,["label"]),o(_,{label:s(t)("student.fee.balance")},{default:e(()=>[n(l(f.feeSummary.balanceFee.formatted),1)]),_:1},8,["label"]),o(_,{label:s(t)("exam.form.props.submitted_at")},{default:e(()=>[n(l(a.submittedAt.formatted||"-"),1)]),_:1},8,["label"]),o(_,{label:s(t)("exam.form.props.approved_at")},{default:e(()=>[n(l(a.approvedAt.formatted||"-"),1)]),_:1},8,["label"])]),_:1})]),_:1})):d("",!0)]),default:e(()=>[v("div",ue,[o(T,{"no-padding":"","no-content-padding":"","bottom-content-padding":""},{title:e(()=>[n(l(a.exam.name)+" ",1),o(y,null,{default:e(()=>{var h,A;return[n(l((A=(h=a.exam.term)==null?void 0:h.division)==null?void 0:A.name),1)]}),_:1})]),default:e(()=>{var h,A,E;return[v("dl",de,[o(x,{label:s(t)("academic.batch.batch")},{default:e(()=>[n(l(a.batch.course.name)+" ",1),o(y,null,{default:e(()=>[n(l(a.batch.name),1)]),_:1})]),_:1},8,["label"]),o(x,{label:s(t)("exam.grade.grade")},{default:e(()=>[n(l(a.grade.name),1)]),_:1},8,["label"]),o(x,{label:s(t)("exam.assessment.assessment")},{default:e(()=>[n(l(a.assessment.name),1)]),_:1},8,["label"]),o(x,{label:s(t)("exam.observation.observation")},{default:e(()=>{var p;return[n(l((p=a.observation)==null?void 0:p.name),1)]}),_:1},8,["label"])]),a.records.length>0?(i(),c(C,{key:0},[a.records.length>0?(i(),b(W,{key:0,header:z},{default:e(()=>[(i(!0),c(C,null,M(a.records,(p,ee)=>(i(),b(Q,{key:p.uuid},{default:e(()=>[o(k,{name:"sno"},{default:e(()=>[n(l(ee+1),1)]),_:2},1024),o(k,{name:"subject"},{default:e(()=>[n(l(p.subject.name)+" ",1),p.subject.code?(i(),c("span",re,"("+l(p.subject.code)+")",1)):d("",!0),p.hasGrading?(i(),b(y,{key:1,block:""},{default:e(()=>[n("("+l(s(t)("exam.schedule.props.grading"))+")",1)]),_:1})):d("",!0),p.examFee.value?(i(),b(y,{key:2,block:""},{default:e(()=>[n(l(s(t)("academic.subject.props.exam_fee"))+" : "+l(p.examFee.formatted),1)]),_:2},1024)):d("",!0)]),_:2},1024),o(k,{name:"date"},{default:e(()=>[n(l(p.date.formatted),1)]),_:2},1024),o(k,{name:"assessment"},{default:e(()=>[(i(!0),c(C,null,M(p.assessments,N=>(i(),c("div",null,[n(l(N.name)+" ",1),o(y,null,{default:e(()=>[n(l(N.maxMark),1)]),_:2},1024)]))),256))]),_:2},1024),o(k,{name:"action"})]),_:2},1024))),128))]),_:1})):d("",!0),(h=a.exam.configDetail)!=null&&h.examFormFee.value?(i(),c("dl",me,[o(x,{label:s(t)("exam.form.props.fee")},{default:e(()=>[n(l(a.exam.configDetail.examFormFee.formatted),1)]),_:1},8,["label"]),(A=a.exam.configDetail)!=null&&A.examFormLastDate.value?(i(),b(x,{key:0,label:s(t)("exam.form.props.last_date")},{default:e(()=>[n(l(a.exam.configDetail.examFormLastDate.formatted),1)]),_:1},8,["label"])):d("",!0),(E=a.exam.configDetail)!=null&&E.examFormLateFee.value?(i(),b(x,{key:1,label:s(t)("exam.form.props.late_fee")},{default:e(()=>[n(l(a.exam.configDetail.examFormLateFee.formatted),1)]),_:1},8,["label"])):d("",!0)])):d("",!0),a.description?(i(),c("dl",ce,[o(x,{class:"col-span-1 sm:col-span-2",label:s(t)("exam.schedule.props.description")},{default:e(()=>[v("div",{innerHTML:a.description},null,8,fe)]),_:1},8,["label"])])):d("",!0),!a.confirmedAt.value&&a.payableFee.value?(i(),c("div",_e,[o(F,{size:"xs",design:"info"},{default:e(()=>[n(l(s(t)("exam.form.fee_info",{attribute:a.payableFee.formatted})),1)]),_:1})])):d("",!0),a.confirmedAt.value&&!a.submittedAt.value?(i(),c("div",pe,[o(F,{size:"xs",design:"info"},{default:e(()=>[n(l(s(t)("exam.form.confirmed_info",{datetime:a.confirmedAt.formatted})),1)]),_:1})])):d("",!0),a.submittedAt.value?(i(),c("div",be,[a.approvedAt.value?(i(),b(F,{key:0,size:"xs",design:"success"},{default:e(()=>[n(l(s(t)("exam.form.approved_info",{datetime:a.approvedAt.formatted})),1)]),_:1})):(i(),b(F,{key:1,size:"xs",design:"info",class:"text-sm"},{default:e(()=>[n(l(s(t)("exam.form.submitted_info",{datetime:a.submittedAt.formatted})),1)]),_:1})),v("div",xe,[a.submittedAt.value?(i(),b(D,{key:0,onClick:U},{default:e(()=>[n(l(s(t)("global.print",{attribute:s(t)("exam.schedule.form")})),1)]),_:1})):d("",!0),a.submittedAt.value&&a.publishAdmitCard&&a.approvedAt.value?(i(),b(D,{key:1,onClick:q,design:"success"},{default:e(()=>[n(l(s(t)("global.print",{attribute:s(t)("exam.admit_card.admit_card")})),1)]),_:1})):d("",!0)])])):d("",!0),a.confirmedAt.value?d("",!0):(i(),c("div",he,[v("p",ve,l(s(t)("exam.form.fee_confirmation")),1),o(D,{class:"mt-4",onClick:$},{default:e(()=>[n(l(s(t)("general.confirm")),1)]),_:1})])),a.confirmedAt.value&&!a.submittedAt.value?(i(),c("div",ge,[v("p",ye,l(s(t)("exam.form.disclaimer")),1),o(D,{class:"mt-4",onClick:O},{default:e(()=>[n(l(s(t)("general.submit")),1)]),_:1})])):d("",!0)],64)):(i(),c("div",ke,[o(F,{design:"error",size:"xs"},{default:e(()=>[n(l(s(t)("exam.form.not_eligible_to_submit")),1)]),_:1})]))]}),_:1})])]),_:1})):d("",!0)]),_:1},8,["uuid","refresh"])]),_:1})],64)}}});export{Se as default};
