import{f as S,G as M,m as x,r as i,o as m,q as g,w as t,d as y,e as r,u as e,a as $,F as w,j as C,s as o,t as s,v as E,b as L,i as O,h as z}from"./app-DCfJDSeM.js";const G={class:"grid grid-cols-3 gap-6"},J={class:"col-span-3 sm:col-span-1"},K={class:"col-span-3 sm:col-span-1"},Q={name:"LibraryBookIssueReturnForm"},W=Object.assign(Q,{emits:["refresh"],setup(A,{emit:_}){S();const V=_,a={number:"",returnDate:""},v="library/transaction/",f=M(v),b=x({...a}),T=()=>{V("refresh")};return(n,l)=>{const D=i("BaseInput"),u=i("DatePicker"),h=i("FormAction");return m(),g(h,{"no-card":"","no-data-fetch":"",action:"returnBook","keep-adding":!1,"init-url":v,"init-form":a,form:b,"after-submit":T},{default:t(()=>[y("div",G,[y("div",J,[r(D,{type:"text",modelValue:b.number,"onUpdate:modelValue":l[0]||(l[0]=d=>b.number=d),name:"number",label:n.$trans("library.book.props.number"),error:e(f).number,"onUpdate:error":l[1]||(l[1]=d=>e(f).number=d)},null,8,["modelValue","label","error"])]),y("div",K,[r(u,{modelValue:b.returnDate,"onUpdate:modelValue":l[2]||(l[2]=d=>b.returnDate=d),name:"returnDate",label:n.$trans("library.transaction.props.return_date"),"no-clear":"",error:e(f).returnDate,"onUpdate:error":l[3]||(l[3]=d=>e(f).returnDate=d)},null,8,["modelValue","label","error"])])])]),_:1},8,["form"])}}}),X={class:"space-y-2"},Y=["innerHTML"],Z={class:"space-y-4"},tt={key:1,class:"px-4 py-2"},et={name:"LibraryTransactionShow"},rt=Object.assign(et,{setup(A){O();const _=S(),V=z(),a=C("$trans"),v=C("emitter"),f={},b="library/transaction/",T=[{key:"number",label:a("library.book.props.number"),visibility:!0},{key:"title",label:a("library.book.props.title"),visibility:!0},{key:"author",label:a("library.book.props.author"),visibility:!0},{key:"condition",label:a("library.book.props.condition"),visibility:!0},{key:"returnDate",label:a("library.transaction.props.return_date"),visibility:!0}],n=x({...f}),l=D=>{Object.assign(n,D)};return(D,u)=>{const h=i("PageHeaderAction"),d=i("PageHeader"),p=i("ListItemView"),P=i("TextMuted"),R=i("ListContainerVertical"),B=i("BaseCard"),k=i("DataCell"),F=i("DataRow"),H=i("SimpleTable"),U=i("BaseAlert"),j=i("DetailLayoutVertical"),N=i("ShowItem"),q=i("ParentTransition");return m(),$(w,null,[r(d,{title:e(a)(e(_).meta.trans,{attribute:e(a)(e(_).meta.label)}),navs:[{label:e(a)("library.library"),path:"Library"},{label:e(a)("library.transaction.transaction"),path:"LibraryTransactionList"}]},{default:t(()=>[r(h,{name:"LibraryTransaction",title:e(a)("library.transaction.transaction"),actions:["list"]},null,8,["title"])]),_:1},8,["title","navs"]),r(q,{appear:"",visibility:!0},{default:t(()=>[r(N,{"init-url":b,uuid:e(_).params.uuid,onSetItem:l,onRedirectTo:u[1]||(u[1]=c=>e(V).push({name:"LibraryTransaction"}))},{default:t(()=>[n.uuid?(m(),g(j,{key:0},{detail:t(()=>[y("div",X,[r(B,{"no-padding":"","no-content-padding":""},{title:t(()=>[o(s(e(a)("library.transaction.transaction")),1)]),action:t(()=>u[2]||(u[2]=[])),default:t(()=>[r(R,null,{default:t(()=>[r(p,{label:e(a)("library.transaction.props.to")},{default:t(()=>[o(s(n.to.label),1)]),_:1},8,["label"]),r(p,{label:e(a)("library.transaction.props.requester")},{default:t(()=>[o(s(n.requester.name)+" ",1),r(P,{block:""},{default:t(()=>[o(s(n.requester.contactNumber),1)]),_:1})]),_:1},8,["label"]),r(p,{label:e(a)("library.transaction.props.issue_date")},{default:t(()=>[o(s(n.issueDate.formatted),1)]),_:1},8,["label"]),r(p,{label:e(a)("library.transaction.props.due_date")},{default:t(()=>[o(s(n.dueDate.formatted),1)]),_:1},8,["label"]),r(p,{label:e(a)("library.transaction.props.remarks")},{default:t(()=>[y("div",{innerHTML:n.remarks},null,8,Y)]),_:1},8,["label"]),r(p,{label:e(a)("general.created_at")},{default:t(()=>[o(s(n.createdAt.formatted),1)]),_:1},8,["label"]),r(p,{label:e(a)("general.updated_at")},{default:t(()=>[o(s(n.updatedAt.formatted),1)]),_:1},8,["label"])]),_:1})]),_:1})])]),default:t(()=>[y("div",Z,[r(B,{"no-padding":"","no-content-padding":""},{title:t(()=>[o(s(e(a)("library.transaction.props.details")),1)]),footer:t(()=>u[3]||(u[3]=[])),default:t(()=>[n.records.length>0?(m(),g(H,{key:0,header:T},{default:t(()=>[(m(!0),$(w,null,E(n.records,c=>(m(),g(F,{key:c.uuid},{default:t(()=>[r(k,{name:"number"},{default:t(()=>[o(s(c.copy.number),1)]),_:2},1024),r(k,{name:"title"},{default:t(()=>[o(s(c.copy.book.title),1)]),_:2},1024),r(k,{name:"author"},{default:t(()=>[o(s(c.copy.book.author.name),1)]),_:2},1024),r(k,{name:"condition"},{default:t(()=>{var I;return[o(s(((I=c.copy.condition)==null?void 0:I.name)||"-"),1)]}),_:2},1024),r(k,{name:"returnDate"},{default:t(()=>[o(s(c.returnDate.formatted),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):L("",!0),n.records.length===0?(m(),$("div",tt,[r(U,{design:"info",size:"xs"},{default:t(()=>[o(s(e(a)("general.errors.record_not_found")),1)]),_:1})])):L("",!0)]),_:1}),n.isReturned?L("",!0):(m(),g(B,{key:0},{title:t(()=>[o(s(e(a)("library.transaction.return")),1)]),default:t(()=>[r(W,{uuid:e(_).params.uuid,onRefresh:u[0]||(u[0]=c=>e(v).emit("refreshItem"))},null,8,["uuid"])]),_:1}))])]),_:1})):L("",!0)]),_:1},8,["uuid"])]),_:1})],64)}}});export{rt as default};
