import{f as P,m as w,n as R,r as i,o as c,q as y,w as e,d as L,s as m,t as o,b as k,e as a,y as $,l as T,u as s,a as M,v as O,F as j,h as q,j as U}from"./app-DCfJDSeM.js";import{_ as A}from"./ModuleDropdown-DnYRB0M_.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",emits:["hide"],setup(E,{emit:v}){const _=P(),D=v,b={employees:[],startDate:"",endDate:""},u=w({...b}),p=w({employees:[],isLoaded:!_.query.employees});return R(async()=>{p.employees=_.query.employees?_.query.employees.split(","):[],p.isLoaded=!0}),(f,d)=>{const n=i("BaseSelectSearch"),r=i("DatePicker"),C=i("FilterForm");return c(),y(C,{"init-form":b,form:u,multiple:["employees"],onHide:d[3]||(d[3]=l=>D("hide"))},{default:e(()=>[L("div",z,[L("div",G,[p.isLoaded?(c(),y(n,{key:0,multiple:"",name:"employees",label:f.$trans("global.select",{attribute:f.$trans("employee.employee")}),modelValue:u.employees,"onUpdate:modelValue":d[0]||(d[0]=l=>u.employees=l),"value-prop":"uuid","init-search":p.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(l=>[m(o(l.value.name)+" ("+o(l.value.codeNumber)+") ",1)]),listOption:e(l=>[m(o(l.option.name)+" ("+o(l.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):k("",!0)]),L("div",J,[a(r,{start:u.startDate,"onUpdate:start":d[1]||(d[1]=l=>u.startDate=l),end:u.endDate,"onUpdate:end":d[2]||(d[2]=l=>u.endDate=l),name:"dateBetween",as:"range",label:f.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},Q={name:"EmployeeLeaveAllocationList"},Y=Object.assign(Q,{setup(E){const v=q(),_=U("emitter");let D=["filter"];$("leave-allocation:create")&&D.unshift("create");let b=[];$("leave-allocation:export")&&(b=["print","pdf","excel"]);const u="employee/leave/allocation/",p=T(!1),f=w({}),d=n=>{Object.assign(f,n)};return(n,r)=>{const C=i("PageHeaderAction"),l=i("PageHeader"),B=i("ParentTransition"),g=i("DataCell"),h=i("FloatingMenuItem"),I=i("FloatingMenu"),N=i("DataRow"),S=i("BaseButton"),V=i("DataTable"),H=i("ListItem");return c(),y(H,{"init-url":u,onSetItems:d},{header:e(()=>[a(l,{title:n.$trans("employee.leave.allocation.allocation"),navs:[{label:n.$trans("employee.employee"),path:"Employee"},{label:n.$trans("employee.leave.leave"),path:"EmployeeLeave"}]},{default:e(()=>[a(C,{url:"employee/leave/allocations/",name:"EmployeeLeaveAllocation",title:n.$trans("employee.leave.allocation.allocation"),actions:s(D),"dropdown-actions":s(b),onToggleFilter:r[0]||(r[0]=t=>p.value=!p.value)},{moduleOption:e(()=>[a(A)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[a(B,{appear:"",visibility:p.value},{default:e(()=>[a(K,{onRefresh:r[1]||(r[1]=t=>s(_).emit("listItems")),onHide:r[2]||(r[2]=t=>p.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(B,{appear:"",visibility:!0},{default:e(()=>[a(V,{header:f.headers,meta:f.meta,module:"employee.leave.allocation",onRefresh:r[4]||(r[4]=t=>s(_).emit("listItems"))},{actionButton:e(()=>[s($)("leave-allocation:create")?(c(),y(S,{key:0,onClick:r[3]||(r[3]=t=>s(v).push({name:"EmployeeLeaveAllocationCreate"}))},{default:e(()=>[m(o(n.$trans("global.add",{attribute:n.$trans("employee.leave.allocation.allocation")})),1)]),_:1})):k("",!0)]),default:e(()=>[(c(!0),M(j,null,O(f.data,t=>(c(),y(N,{key:t.uuid},{default:e(()=>[a(g,{name:"employee"},{default:e(()=>[m(o(t.employee.name)+" ("+o(t.employee.codeNumber)+") ",1)]),_:2},1024),a(g,{name:"designation"},{default:e(()=>[m(o(t.employee.designation),1)]),_:2},1024),a(g,{name:"startDate"},{default:e(()=>[m(o(t.startDate.formatted),1)]),_:2},1024),a(g,{name:"endDate"},{default:e(()=>[m(o(t.endDate.formatted),1)]),_:2},1024),a(g,{name:"createdAt"},{default:e(()=>[m(o(t.createdAt.formatted),1)]),_:2},1024),a(g,{name:"action"},{default:e(()=>[a(I,null,{default:e(()=>[a(h,{icon:"fas fa-arrow-circle-right",onClick:F=>s(v).push({name:"EmployeeLeaveAllocationShow",params:{uuid:t.uuid}})},{default:e(()=>[m(o(n.$trans("general.show")),1)]),_:2},1032,["onClick"]),s($)("leave-allocation:edit")?(c(),y(h,{key:0,icon:"fas fa-edit",onClick:F=>s(v).push({name:"EmployeeLeaveAllocationEdit",params:{uuid:t.uuid}})},{default:e(()=>[m(o(n.$trans("general.edit")),1)]),_:2},1032,["onClick"])):k("",!0),s($)("leave-allocation:create")?(c(),y(h,{key:1,icon:"fas fa-copy",onClick:F=>s(v).push({name:"EmployeeLeaveAllocationDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[m(o(n.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):k("",!0),s($)("leave-allocation:delete")?(c(),y(h,{key:2,icon:"fas fa-trash",onClick:F=>s(_).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[m(o(n.$trans("general.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Y as default};
