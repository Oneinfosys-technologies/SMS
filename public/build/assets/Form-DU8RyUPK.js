import{f as F,G as D,g as z,m as B,n as G,I as H,r as q,o as v,q as w,w as c,d as m,e as d,s as k,t as b,u as i,b as V,E as J,H as W,J as Z,a as S,j as x,l as Q,K as ee,F as M,i as X,L as te,h as ae}from"./app-DCfJDSeM.js";import{_ as se,a as re,b as ne,c as oe,d as ie}from"./Billdesk-rvYHEUh7.js";const le={class:"grid grid-cols-3 gap-6"},de={class:"col-span-3 sm:col-span-1"},ue={class:"col-span-3 sm:col-span-1"},me={class:"col-span-3 sm:col-span-1"},pe={class:"col-span-3 sm:col-span-1"},ce={class:"col-span-3 sm:col-span-1"},ge={class:"col-span-3 sm:col-span-1"},be={class:"col-span-3 sm:col-span-1"},fe={class:"col-span-3 sm:col-span-1"},ye={class:"col-span-3 sm:col-span-1"},ve={class:"col-span-3 sm:col-span-1"},$e={class:"col-span-3 sm:col-span-1"},ke={class:"col-span-3 sm:col-span-1"},Ue={class:"col-span-3 sm:col-span-1"},_e={class:"col-span-3 sm:col-span-1"},Ae={class:"grid grid-cols-3 gap-6"},Ve={class:"col-span-3 sm:col-span-1"},we={class:"col-span-3 sm:col-span-1"},qe={name:"OnlineRegistrationBasicForm"},Le=Object.assign(qe,{props:{registration:{type:Object,required:!0},preRequisites:{type:Object,required:!0}},emits:["completed"],setup(R,{emit:O}){const N=F(),h=O,I=R,U={birthDate:"",birthPlace:"",gender:"",fatherName:"",motherName:"",nationality:"",motherTongue:"",bloodGroup:"",maritalStatus:"",uniqueIdNumber1:"",uniqueIdNumber2:"",uniqueIdNumber3:"",category:"",caste:"",religion:""},L="onlineRegistration/",n=D(L),a=z("contact.uniqueIdNumber1Label"),u=z("contact.uniqueIdNumber2Label"),f=z("contact.uniqueIdNumber3Label"),r=B({...U}),$=B({isLoaded:!N.params.uuid}),g=e=>{h("completed")};return G(()=>{var t,T,o,p,A,_,l;let e=I.registration.contact;Object.assign(U,{birthDate:((t=e.birthDate)==null?void 0:t.value)||"",birthPlace:e.birthPlace,gender:((T=e.gender)==null?void 0:T.value)||"",fatherName:e.fatherName,motherName:e.motherName,nationality:e.nationality,motherTongue:e.motherTongue,bloodGroup:((o=e.bloodGroup)==null?void 0:o.value)||"",maritalStatus:((p=e.maritalStatus)==null?void 0:p.value)||"",uniqueIdNumber1:e.uniqueIdNumber1,uniqueIdNumber2:e.uniqueIdNumber2,uniqueIdNumber3:e.uniqueIdNumber3,category:((A=e.category)==null?void 0:A.uuid)||"",caste:((_=e.caste)==null?void 0:_.uuid)||"",religion:((l=e.religion)==null?void 0:l.uuid)||""}),Object.assign(r,H(U)),$.isLoaded=!0}),(e,t)=>{const T=q("BaseLabel"),o=q("BaseRadioGroup"),p=q("DatePicker"),A=q("BaseInput"),_=q("BaseSelect"),l=q("BaseFieldset"),P=q("FormAction");return v(),w(P,{"no-card":"","init-url":L,"no-data-fetch":"",uuid:i(N).params.number,action:"updateBasic","init-form":U,form:r,"stay-on":"","validate-unchanged":!1,"submit-text":e.$trans("pagination.next"),"after-submit":g},{default:c(()=>[m("div",le,[m("div",de,[d(T,null,{default:c(()=>[k(b(e.$trans("contact.props.gender")),1)]),_:1}),d(o,{"top-margin":"",options:R.preRequisites.genders,name:"gender",modelValue:r.gender,"onUpdate:modelValue":t[0]||(t[0]=s=>r.gender=s),error:i(n).gender,"onUpdate:error":t[1]||(t[1]=s=>i(n).gender=s),horizontal:""},null,8,["options","modelValue","error"])]),m("div",ue,[d(p,{modelValue:r.birthDate,"onUpdate:modelValue":t[2]||(t[2]=s=>r.birthDate=s),name:"birthDate",label:e.$trans("contact.props.birth_date"),"no-clear":"",error:i(n).birthDate,"onUpdate:error":t[3]||(t[3]=s=>i(n).birthDate=s)},null,8,["modelValue","label","error"])]),m("div",me,[d(p,{modelValue:r.anniversaryDate,"onUpdate:modelValue":t[4]||(t[4]=s=>r.anniversaryDate=s),name:"anniversaryDate",label:e.$trans("contact.props.anniversary_date"),"no-clear":"",error:i(n).anniversaryDate,"onUpdate:error":t[5]||(t[5]=s=>i(n).anniversaryDate=s)},null,8,["modelValue","label","error"])]),m("div",pe,[d(A,{type:"text",modelValue:r.birthPlace,"onUpdate:modelValue":t[6]||(t[6]=s=>r.birthPlace=s),name:"birthPlace",label:e.$trans("contact.props.birth_place"),error:i(n).birthPlace,"onUpdate:error":t[7]||(t[7]=s=>i(n).birthPlace=s)},null,8,["modelValue","label","error"])]),m("div",ce,[d(A,{type:"text",modelValue:r.nationality,"onUpdate:modelValue":t[8]||(t[8]=s=>r.nationality=s),name:"nationality",label:e.$trans("contact.props.nationality"),error:i(n).nationality,"onUpdate:error":t[9]||(t[9]=s=>i(n).nationality=s)},null,8,["modelValue","label","error"])]),m("div",ge,[d(A,{type:"text",modelValue:r.motherTongue,"onUpdate:modelValue":t[10]||(t[10]=s=>r.motherTongue=s),name:"motherTongue",label:e.$trans("contact.props.mother_tongue"),error:i(n).motherTongue,"onUpdate:error":t[11]||(t[11]=s=>i(n).motherTongue=s)},null,8,["modelValue","label","error"])]),m("div",be,[d(A,{type:"text",modelValue:r.uniqueIdNumber1,"onUpdate:modelValue":t[12]||(t[12]=s=>r.uniqueIdNumber1=s),name:"uniqueIdNumber1",label:i(a),error:i(n).uniqueIdNumber1,"onUpdate:error":t[13]||(t[13]=s=>i(n).uniqueIdNumber1=s)},null,8,["modelValue","label","error"])]),m("div",fe,[d(A,{type:"text",modelValue:r.uniqueIdNumber2,"onUpdate:modelValue":t[14]||(t[14]=s=>r.uniqueIdNumber2=s),name:"uniqueIdNumber2",label:i(u),error:i(n).uniqueIdNumber2,"onUpdate:error":t[15]||(t[15]=s=>i(n).uniqueIdNumber2=s)},null,8,["modelValue","label","error"])]),m("div",ye,[d(A,{type:"text",modelValue:r.uniqueIdNumber3,"onUpdate:modelValue":t[16]||(t[16]=s=>r.uniqueIdNumber3=s),name:"uniqueIdNumber3",label:i(f),error:i(n).uniqueIdNumber3,"onUpdate:error":t[17]||(t[17]=s=>i(n).uniqueIdNumber3=s)},null,8,["modelValue","label","error"])]),m("div",ve,[$.isLoaded?(v(),w(_,{key:0,modelValue:r.bloodGroup,"onUpdate:modelValue":t[18]||(t[18]=s=>r.bloodGroup=s),name:"bloodGroup",label:e.$trans("contact.props.blood_group"),options:R.preRequisites.bloodGroups,error:i(n).bloodGroup,"onUpdate:error":t[19]||(t[19]=s=>i(n).bloodGroup=s)},null,8,["modelValue","label","options","error"])):V("",!0)]),m("div",$e,[$.isLoaded?(v(),w(_,{key:0,modelValue:r.maritalStatus,"onUpdate:modelValue":t[20]||(t[20]=s=>r.maritalStatus=s),name:"maritalStatus",label:e.$trans("contact.props.marital_status"),options:R.preRequisites.maritalStatuses,error:i(n).maritalStatus,"onUpdate:error":t[21]||(t[21]=s=>i(n).maritalStatus=s)},null,8,["modelValue","label","options","error"])):V("",!0)]),m("div",ke,[$.isLoaded?(v(),w(_,{key:0,name:"religion",label:e.$trans("global.select",{attribute:e.$trans("contact.religion.religion")}),modelValue:r.religion,"onUpdate:modelValue":t[22]||(t[22]=s=>r.religion=s),error:i(n).religion,"onUpdate:error":t[23]||(t[23]=s=>i(n).religion=s),options:R.preRequisites.religions,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):V("",!0)]),m("div",Ue,[$.isLoaded?(v(),w(_,{key:0,name:"category",label:e.$trans("global.select",{attribute:e.$trans("contact.category.category")}),modelValue:r.category,"onUpdate:modelValue":t[24]||(t[24]=s=>r.category=s),error:i(n).category,"onUpdate:error":t[25]||(t[25]=s=>i(n).category=s),options:R.preRequisites.categories,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):V("",!0)]),m("div",_e,[$.isLoaded?(v(),w(_,{key:0,name:"caste",label:e.$trans("global.select",{attribute:e.$trans("contact.caste.caste")}),modelValue:r.caste,"onUpdate:modelValue":t[26]||(t[26]=s=>r.caste=s),error:i(n).caste,"onUpdate:error":t[27]||(t[27]=s=>i(n).caste=s),options:R.preRequisites.castes,"label-prop":"name","value-prop":"uuid"},null,8,["label","modelValue","error","options"])):V("",!0)])]),d(l,{class:"mt-4"},{legend:c(()=>[k(b(e.$trans("student.props.parent")),1)]),default:c(()=>[m("div",Ae,[m("div",Ve,[d(A,{type:"text",modelValue:r.fatherName,"onUpdate:modelValue":t[28]||(t[28]=s=>r.fatherName=s),name:"fatherName",label:e.$trans("contact.props.father_name"),error:i(n).fatherName,"onUpdate:error":t[29]||(t[29]=s=>i(n).fatherName=s)},null,8,["modelValue","label","error"])]),m("div",we,[d(A,{type:"text",modelValue:r.motherName,"onUpdate:modelValue":t[30]||(t[30]=s=>r.motherName=s),name:"motherName",label:e.$trans("contact.props.mother_name"),error:i(n).motherName,"onUpdate:error":t[31]||(t[31]=s=>i(n).motherName=s)},null,8,["modelValue","label","error"])])])]),_:1})]),_:1},8,["uuid","form","submit-text"])}}}),Re={class:"grid grid-cols-3 gap-6"},Ne={class:"col-span-3 sm:col-span-1"},he={class:"col-span-3 sm:col-span-1"},Ie={class:"col-span-3"},Te={class:"grid grid-cols-3 gap-6"},Be={class:"col-span-3"},Oe={class:"grid grid-cols-3 gap-6"},Pe={class:"col-span-3 sm:col-span-1"},Se={class:"mt-4 grid grid-cols-3 gap-6"},Ce={class:"grid grid-cols-1"},je={class:"col"},Fe={class:"col"},ze={name:"OnlineRegistrationContactForm"},De=Object.assign(ze,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(R,{emit:O}){const N=F(),h=O,I=R,U={alternateRecords:{contactNumber:"",email:""},presentAddress:{addressLine1:"",addressLine2:"",city:"",state:"",zipcode:"",country:""},permanentAddress:{sameAsPresentAddress:!0,addressLine1:"",addressLine2:"",city:"",state:"",zipcode:"",country:""},idProof:[],addressProof:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]},L="onlineRegistration/",n=D(L),a=B({}),u=B({...U}),f=B({isLoaded:!N.params.uuid}),r=g=>{Object.assign(a,g)},$=g=>{h("completed")};return G(()=>{var e,t,T,o,p,A,_,l,P,s,j,y,E,C;let g=I.registration.contact;Object.assign(U,{alternateRecords:{contactNumber:(e=g.alternateRecords)==null?void 0:e.contactNumber,email:(t=g.alternateRecords)==null?void 0:t.email},presentAddress:{addressLine1:(T=g.presentAddress)==null?void 0:T.addressLine1,addressLine2:(o=g.presentAddress)==null?void 0:o.addressLine2,city:(p=g.presentAddress)==null?void 0:p.city,state:(A=g.presentAddress)==null?void 0:A.state,zipcode:(_=g.presentAddress)==null?void 0:_.zipcode,country:(l=g.presentAddress)==null?void 0:l.country},permanentAddress:{sameAsPresentAddress:g.sameAsPresentAddress,addressLine1:(P=g.permanentAddress)==null?void 0:P.addressLine1,addressLine2:(s=g.permanentAddress)==null?void 0:s.addressLine2,city:(j=g.permanentAddress)==null?void 0:j.city,state:(y=g.permanentAddress)==null?void 0:y.state,zipcode:(E=g.permanentAddress)==null?void 0:E.zipcode,country:(C=g.permanentAddress)==null?void 0:C.country},idProof:I.registration.media.filter(K=>K.section=="id_proof"),addressProof:I.registration.media.filter(K=>K.section=="address_proof"),mediaToken:I.registration.mediaToken}),Object.assign(u,H(U)),f.isLoaded=!0}),(g,e)=>{const t=q("BaseInput"),T=q("AddressInput"),o=q("BaseFieldset"),p=q("BaseSwitch"),A=q("MediaUpload"),_=q("FormAction");return f.isLoaded?(v(),w(_,{key:0,"no-card":"","pre-requisites":!1,onSetPreRequisites:r,"init-url":L,"no-data-fetch":"",uuid:i(N).params.number,action:"updateContact","init-form":U,form:u,"stay-on":"","validate-unchanged":!1,"submit-text":g.$trans("pagination.next"),"after-submit":$},{default:c(()=>[m("div",Re,[m("div",Ne,[d(t,{type:"text",modelValue:u.alternateRecords.contactNumber,"onUpdate:modelValue":e[0]||(e[0]=l=>u.alternateRecords.contactNumber=l),name:"alternateContactNumber",label:g.$trans("global.alternate",{attribute:g.$trans("contact.props.contact_number")}),error:i(n).alternateContactNumber,"onUpdate:error":e[1]||(e[1]=l=>i(n).alternateContactNumber=l)},null,8,["modelValue","label","error"])]),m("div",he,[d(t,{type:"text",modelValue:u.alternateRecords.email,"onUpdate:modelValue":e[2]||(e[2]=l=>u.alternateRecords.email=l),name:"alternateEmail",label:g.$trans("global.alternate",{attribute:g.$trans("contact.props.email")}),error:i(n).alternateEmail,"onUpdate:error":e[3]||(e[3]=l=>i(n).alternateEmail=l)},null,8,["modelValue","label","error"])]),m("div",Ie,[d(o,null,{legend:c(()=>[k(b(g.$trans("contact.props.present_address")),1)]),default:c(()=>[m("div",Te,[d(T,{prefix:"presentAddress",addressLine1:u.presentAddress.addressLine1,"onUpdate:addressLine1":e[4]||(e[4]=l=>u.presentAddress.addressLine1=l),addressLine2:u.presentAddress.addressLine2,"onUpdate:addressLine2":e[5]||(e[5]=l=>u.presentAddress.addressLine2=l),city:u.presentAddress.city,"onUpdate:city":e[6]||(e[6]=l=>u.presentAddress.city=l),state:u.presentAddress.state,"onUpdate:state":e[7]||(e[7]=l=>u.presentAddress.state=l),zipcode:u.presentAddress.zipcode,"onUpdate:zipcode":e[8]||(e[8]=l=>u.presentAddress.zipcode=l),country:u.presentAddress.country,"onUpdate:country":e[9]||(e[9]=l=>u.presentAddress.country=l),formErrors:i(n),"onUpdate:formErrors":e[10]||(e[10]=l=>W(n)?n.value=l:null)},null,8,["addressLine1","addressLine2","city","state","zipcode","country","formErrors"])])]),_:1})]),m("div",Be,[d(o,null,{legend:c(()=>[k(b(g.$trans("contact.props.permanent_address")),1)]),default:c(()=>[m("div",Oe,[m("div",Pe,[d(p,{modelValue:u.permanentAddress.sameAsPresentAddress,"onUpdate:modelValue":e[11]||(e[11]=l=>u.permanentAddress.sameAsPresentAddress=l),name:"sameAsPresentAddress",label:g.$trans("contact.props.same_as_present_address"),error:i(n).sameAsPresentAddress,"onUpdate:error":e[12]||(e[12]=l=>i(n).sameAsPresentAddress=l)},null,8,["modelValue","label","error"])])]),m("div",Se,[u.permanentAddress.sameAsPresentAddress?V("",!0):(v(),w(T,{key:0,prefix:"permanentAddress",addressLine1:u.permanentAddress.addressLine1,"onUpdate:addressLine1":e[13]||(e[13]=l=>u.permanentAddress.addressLine1=l),addressLine2:u.permanentAddress.addressLine2,"onUpdate:addressLine2":e[14]||(e[14]=l=>u.permanentAddress.addressLine2=l),city:u.permanentAddress.city,"onUpdate:city":e[15]||(e[15]=l=>u.permanentAddress.city=l),state:u.permanentAddress.state,"onUpdate:state":e[16]||(e[16]=l=>u.permanentAddress.state=l),zipcode:u.permanentAddress.zipcode,"onUpdate:zipcode":e[17]||(e[17]=l=>u.permanentAddress.zipcode=l),country:u.permanentAddress.country,"onUpdate:country":e[18]||(e[18]=l=>u.permanentAddress.country=l),formErrors:i(n),"onUpdate:formErrors":e[19]||(e[19]=l=>W(n)?n.value=l:null)},null,8,["addressLine1","addressLine2","city","state","zipcode","country","formErrors"]))])]),_:1})])]),m("div",Ce,[m("div",je,[d(A,{multiple:"",guest:"",label:g.$trans("contact.props.id_proof"),module:"registration",section:"id_proof",media:u.idProof,"media-token":u.mediaToken,onIsUpdated:e[20]||(e[20]=l=>u.mediaUpdated=!0),onSetHash:e[21]||(e[21]=l=>u.mediaHash.push(l)),error:i(n).idProof,"onUpdate:error":e[22]||(e[22]=l=>i(n).idProof=l)},null,8,["label","media","media-token","error"])]),m("div",Fe,[d(A,{multiple:"",guest:"",label:g.$trans("contact.props.address_proof"),module:"registration",section:"address_proof",media:u.addressProof,"media-token":u.mediaToken,onIsUpdated:e[23]||(e[23]=l=>u.mediaUpdated=!0),onSetHash:e[24]||(e[24]=l=>u.mediaHash.push(l)),error:i(n).addressProof,"onUpdate:error":e[25]||(e[25]=l=>i(n).addressProof=l)},null,8,["label","media","media-token","error"])])])]),_:1},8,["uuid","form","submit-text"])):V("",!0)}}}),Ge={class:"grid grid-cols-1"},Ee={class:"col-span-1"},He={name:"OnlineRegistrationAvatarForm"},Me=Object.assign(He,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(R,{emit:O}){const N=O,h=R,I=F(),U={photo:"",idProof:[],addressProof:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]};D("onlineRegistration/");const n=B({...U}),a=B({headers:{"auth-token":localStorage.getItem("authToken")}}),u=B({isLoaded:!I.params.uuid}),f=$=>{N("completed");let g=h.registration.contact;n.photo=g==null?void 0:g.photo},r=()=>{N("completed");let $=h.registration.contact;n.photo=$==null?void 0:$.photo};return G(()=>{let $=h.registration.contact;Object.assign(U,{photo:$.photo}),Object.assign(n,H(U)),u.isLoaded=!0}),Z(()=>h.registration.contact,$=>{$&&(n.photo=$.photo)},{deep:!0}),($,g)=>{const e=q("ImageUpload");return v(),S("div",Ge,[m("div",Ee,[d(e,{label:$.$trans("contact.props.photo"),src:n.photo,"upload-path":`online-registrations/${R.registration.applicationNumber}/photo`,"remove-path":`online-registrations/${R.registration.applicationNumber}/photo`,headers:a.headers,onUploaded:f,onRemoved:r},null,8,["label","src","upload-path","remove-path","headers"])])])}}}),Je={class:"grid grid-cols-1"},Ke={class:"col"},Ye={class:"col"},Qe={name:"OnlineRegistrationUploadForm"},We=Object.assign(Qe,{props:{registration:{type:Object,default(){return{}}}},emits:["close","completed"],setup(R,{emit:O}){const N=F(),h=O,I=R,U={marksheet:[],transferCertificate:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]},L="onlineRegistration/",n=D(L),a=B({...U}),u=B({isLoaded:!N.params.number}),f=r=>{h("completed")};return G(()=>{Object.assign(U,{marksheet:I.registration.media.filter(r=>r.section=="marksheet"),transferCertificate:I.registration.media.filter(r=>r.section=="transfer_certificate"),mediaToken:I.registration.mediaToken}),Object.assign(a,H(U)),u.isLoaded=!0}),(r,$)=>{const g=q("MediaUpload"),e=q("FormAction");return u.isLoaded?(v(),w(e,{key:0,"no-card":"","no-data-fetch":"","cancel-action":"",uuid:i(N).params.number,action:"uploadFile","init-url":L,"init-form":U,form:a,"validate-unchanged":!1,"keep-adding":!1,"after-submit":f},{default:c(()=>[m("div",Je,[m("div",Ke,[d(g,{multiple:"",guest:"",label:r.$trans("student.online_registration.wizard.marksheet"),module:"registration",section:"marksheet",media:a.marksheet,"media-token":a.mediaToken,onIsUpdated:$[0]||($[0]=t=>a.mediaUpdated=!0),onSetHash:$[1]||($[1]=t=>a.mediaHash.push(t)),error:i(n).marksheet,"onUpdate:error":$[2]||($[2]=t=>i(n).marksheet=t)},null,8,["label","media","media-token","error"])]),m("div",Ye,[d(g,{multiple:"",guest:"",label:r.$trans("student.online_registration.wizard.transfer_certificate"),module:"registration",section:"transfer_certificate",media:a.transferCertificate,"media-token":a.mediaToken,onIsUpdated:$[3]||($[3]=t=>a.mediaUpdated=!0),onSetHash:$[4]||($[4]=t=>a.mediaHash.push(t)),error:i(n).transferCertificate,"onUpdate:error":$[5]||($[5]=t=>i(n).transferCertificate=t)},null,8,["label","media","media-token","error"])])])]),_:1},8,["uuid","form"])):V("",!0)}}}),Xe={class:"grid grid-cols-3 gap-6"},Ze={class:"col-span-3"},xe={class:"col-span-3 sm:col-span-1"},et={class:"col-span-3 sm:col-span-1"},tt={class:"grid grid-cols-1"},at={class:"col"},st={name:"OnlineRegistrationReviewForm"},rt=Object.assign(st,{props:{registration:{type:Object,required:!0}},emits:["completed"],setup(R,{emit:O}){const N=F(),h=x("moment"),I=O,U=R,L={declaration:!1,dateOfSubmission:h().format("D MMM Y"),placeOfSubmission:"",signature:[],mediaUpdated:!1,mediaToken:J(),mediaHash:[]},n="onlineRegistration/",a=D(n),u=B({}),f=B({...L}),r=B({isLoaded:!N.params.uuid}),$=e=>{Object.assign(u,e)},g=e=>{I("completed",e)};return G(()=>{Object.assign(L,{signature:U.registration.media.filter(e=>e.section=="signature"),mediaToken:U.registration.mediaToken}),Object.assign(f,H(L)),r.isLoaded=!0}),(e,t)=>{const T=q("BaseSwitch"),o=q("BaseInput"),p=q("MediaUpload"),A=q("FormAction");return r.isLoaded?(v(),w(A,{key:0,"no-card":"","pre-requisites":!1,onSetPreRequisites:$,"init-url":n,"no-data-fetch":"",uuid:i(N).params.number,action:"updateReview","keep-adding":!1,"init-form":L,form:f,"submit-text":e.$trans("general.submit"),"after-submit":g},{default:c(()=>[m("div",Xe,[m("div",Ze,[d(T,{reverse:"",modelValue:f.declaration,"onUpdate:modelValue":t[0]||(t[0]=_=>f.declaration=_),name:"declaration",label:e.$trans("student.online_registration.declaration"),error:i(a).declaration,"onUpdate:error":t[1]||(t[1]=_=>i(a).declaration=_)},null,8,["modelValue","label","error"])]),m("div",xe,[d(o,{readonly:"",type:"text",modelValue:f.dateOfSubmission,"onUpdate:modelValue":t[2]||(t[2]=_=>f.dateOfSubmission=_),name:"dateOfSubmission",label:e.$trans("student.online_registration.props.date_of_submission"),error:i(a).dateOfSubmission,"onUpdate:error":t[3]||(t[3]=_=>i(a).dateOfSubmission=_)},null,8,["modelValue","label","error"])]),m("div",et,[d(o,{type:"text",modelValue:f.placeOfSubmission,"onUpdate:modelValue":t[4]||(t[4]=_=>f.placeOfSubmission=_),name:"placeOfSubmission",label:e.$trans("student.online_registration.props.place_of_submission"),error:i(a).placeOfSubmission,"onUpdate:error":t[5]||(t[5]=_=>i(a).placeOfSubmission=_)},null,8,["modelValue","label","error"])])]),m("div",tt,[m("div",at,[d(p,{multiple:"",guest:"",label:e.$trans("contact.props.signature"),module:"registration",section:"signature",media:f.signature,"media-token":f.mediaToken,onIsUpdated:t[6]||(t[6]=_=>f.mediaUpdated=!0),onSetHash:t[7]||(t[7]=_=>f.mediaHash.push(_)),error:i(a).signature,"onUpdate:error":t[8]||(t[8]=_=>i(a).signature=_)},null,8,["label","media","media-token","error"])])])]),_:1},8,["uuid","form","submit-text"])):V("",!0)}}}),nt={class:"grid grid-cols-3 gap-4"},ot={class:"col-span-3 sm:col-span-1"},it={key:0,class:"col-span-3"},lt={class:"mt-4"},dt={name:"OnlineApplicationPayment"},ut=Object.assign(dt,{props:{visibility:{type:Boolean,default:!1},registration:{type:Object,default:()=>({})},preRequisites:{type:Object,default:()=>({})}},emits:["close","completed"],setup(R,{emit:O}){const N=F(),h=X(),I=O,U=R,L={uuid:N.params.number,amount:"",gateway:""},n="onlineRegistration/",a=D(n),u=Q(!1),f=B({initiated:!1,payment:null}),r=B({...L}),$=()=>{T(),h.dispatch(n+"resetFormErrors"),I("close")},g=()=>{f.initiated=!1,I("completed")},e=p=>{u.value=p},t=p=>!!U.preRequisites.paymentGateways.find(A=>A.value==p),T=()=>{f.initiated=!1,f.payment=null,r.gateway=""},o=async()=>{await te()&&(u.value=!0,await h.dispatch(n+"initiatePayment",r).then(p=>{if(p.hasOwnProperty("payment")&&p.payment.amount<=0){location.reload();return}f.initiated=!0,f.payment=p,u.value=!1}).catch(p=>{u.value=!1}))};return ee(async()=>{var p,A;((A=(p=U.preRequisites)==null?void 0:p.paymentGateways)==null?void 0:A.length)==1&&(L.gateway=U.preRequisites.paymentGateways[0].value),L.amount=U.registration.fee.value,Object.assign(r,L)}),(p,A)=>{const _=q("BaseInput"),l=q("BaseRadioGroup"),P=q("BaseButton"),s=q("BaseModal");return v(),w(s,{show:R.visibility,onClose:$},{title:c(()=>[k(b(p.$trans("global.pay",{attribute:p.$trans("student.fee.fee")})),1)]),default:c(()=>{var j,y,E;return[m("div",nt,[m("div",ot,[d(_,{disabled:!0,modelValue:r.amount,"onUpdate:modelValue":A[0]||(A[0]=C=>r.amount=C),name:"amount",label:p.$trans("student.fee.props.amount"),currency:"",error:i(a).amount,"onUpdate:error":A[1]||(A[1]=C=>i(a).amount=C)},null,8,["modelValue","label","error"])]),R.preRequisites.paymentGateways.length>1?(v(),S("div",it,[d(l,{disabled:f.initiated,options:R.preRequisites.paymentGateways,name:"gateway",modelValue:r.gateway,"onUpdate:modelValue":A[2]||(A[2]=C=>r.gateway=C),error:i(a).gateway,"onUpdate:error":A[3]||(A[3]=C=>i(a).gateway=C),horizontal:""},null,8,["disabled","options","modelValue","error"])])):V("",!0)]),t("razorpay")&&r.gateway=="razorpay"?(v(),w(se,{key:0,"init-url":n,form:r,payment:f.payment,onLoading:e,onRefresh:g},null,8,["form","payment"])):V("",!0),t("stripe")&&r.gateway=="stripe"?(v(),w(re,{key:1,"init-url":n,form:r,payment:f.payment,onCancel:T,onLoading:e,onRefresh:g},null,8,["form","payment"])):V("",!0),t("paypal")&&r.gateway=="paypal"&&((j=f.payment)!=null&&j.token)?(v(),w(ne,{key:2,"init-url":n,form:r,payment:f.payment,onCancel:T,onLoading:e,onRefresh:g},null,8,["form","payment"])):V("",!0),t("ccavenue")&&r.gateway=="ccavenue"&&((y=f.payment)!=null&&y.token)?(v(),w(oe,{key:3,payment:f.payment},null,8,["payment"])):V("",!0),t("billdesk")&&r.gateway=="billdesk"&&((E=f.payment)!=null&&E.token)?(v(),w(ie,{key:4,payment:f.payment},null,8,["payment"])):V("",!0),m("div",lt,[r.gateway?(v(),S(M,{key:0},[r.gateway!="stripe"&&r.gateway!="paypal"&&r.gateway!="ccavenue"&&r.gateway!="billdesk"?(v(),w(P,{key:0,design:"primary",onClick:o},{default:c(()=>[k(b(p.$trans("general.proceed")),1)]),_:1})):V("",!0),r.gateway=="stripe"&&!f.payment?(v(),w(P,{key:1,design:"primary",onClick:o},{default:c(()=>[k(b(p.$trans("general.proceed")),1)]),_:1})):V("",!0),r.gateway=="paypal"&&!f.payment?(v(),w(P,{key:2,design:"primary",onClick:o},{default:c(()=>[k(b(p.$trans("general.proceed")),1)]),_:1})):V("",!0),r.gateway=="ccavenue"&&!f.payment?(v(),w(P,{key:3,design:"primary",onClick:o},{default:c(()=>[k(b(p.$trans("general.proceed")),1)]),_:1})):V("",!0),r.gateway=="billdesk"&&!f.payment?(v(),w(P,{key:4,design:"primary",onClick:o},{default:c(()=>[k(b(p.$trans("general.proceed")),1)]),_:1})):V("",!0)],64)):V("",!0)])]}),_:1},8,["show"])}}}),mt={class:"flex justify-end"},pt={class:"flex justify-center"},ct={href:"/",class:"mb-6"},gt=["src"],bt={class:"text-primary dark:text-darken-secondary text-center text-xl"},ft={class:"text-dark-primary dark:text-darken-secondary text-center"},yt={class:"text-lg text-dark-primary dark:text-darken-secondary font-semibold text-center"},vt={key:0,class:"mt-8"},$t={key:0},kt={key:1},Ut={class:"font-bold"},_t={key:2},At={class:"mt-8 border-t border-gray-200 dark:border-gray-800"},Vt={class:"mt-8 grid grid-cols-1 gap-x-4 gap-y-8 sm:grid-cols-3"},wt={key:1,class:"mt-8"},qt={key:3,class:"mt-8"},Y="onlineRegistration/",Nt={__name:"Form",setup(R){const O=X(),N=F(),h=ae(),I=z("layout.display").value=="dark"?z("assets.iconLight"):z("assets.icon"),U=Q(null),L=Q(!1),n=B({genders:[],bloodGroups:[],religions:[],categories:[],castes:[],maritalStatuses:[],paymentGateways:[]}),a=B({registration:{},activeTab:"basic"}),u=()=>{L.value=!1,r()},f=async()=>{U.value=!0,await O.dispatch(Y+"preRequisite",{number:N.params.number}).then(o=>{a.preRequisites=o,U.value=!1}).catch(o=>{U.value=!1,h.push({name:"OnlineRegistration"})})},r=async()=>{U.value=!0,await O.dispatch(Y+"getRegistration",{number:N.params.number}).then(o=>{a.registration=o,a.registration.status.value=="pending"&&(a.activeTab="review"),a.registration.status.value=="pending"&&a.registration.fee.value>0&&$(),U.value=!1}).catch(o=>{U.value=!1,h.push({name:"OnlineRegistration"})})},$=async()=>{U.value=!0,await O.dispatch(Y+"paymentPreRequisite",{uuid:N.params.number}).then(o=>{n.paymentGateways=o.paymentGateways,U.value=!1}).catch(o=>{U.value=!1})},g=async()=>{let o=localStorage.getItem("authToken"),p=`/online-registrations/${N.params.number}/download?auth-token=${o}`;window.open(p)},e=()=>{a.activeTab="contact",r()},t=()=>{a.activeTab="upload",r()},T=()=>{a.activeTab="review",r()};return G(async()=>{await f(),await r()}),(o,p)=>{const A=q("BaseButton"),_=q("BaseAlert"),l=q("TabItem"),P=q("TabGroup"),s=q("BaseDataView"),j=q("BaseLoader");return v(),S(M,null,[m("div",mt,[m("span",{class:"text-sm text-gray-500 cursor-pointer",onClick:p[0]||(p[0]=y=>i(h).push({name:"Dashboard"}))},[p[7]||(p[7]=m("i",{class:"fas fa-home mr-1"},null,-1)),k(" "+b(o.$trans("global.go_to",{attribute:o.$trans("dashboard.home")})),1)])]),m("div",pt,[m("a",ct,[m("img",{class:"h-16 w-auto",src:i(I),alt:""},null,8,gt)])]),d(j,{"is-loading":U.value},{default:c(()=>[m("div",null,[m("p",bt,b(o.$trans("student.online_registration.title")),1),m("p",ft,b(o.$trans("student.online_registration.subtitle")),1),m("div",yt,b(o.$trans("student.online_registration.application_number"))+" : "+b(a.registration.applicationNumber),1)]),a.registration.uuid?(v(),S("div",vt,[a.registration.status.value=="pending"?(v(),S("div",$t,[a.registration.fee.value>0?(v(),S(M,{key:0},[a.registration.paymentStatus.value=="unpaid"?(v(),w(A,{key:0,block:"",onClick:p[1]||(p[1]=y=>L.value=!0)},{default:c(()=>[k(b(o.$trans("student.online_registration.proceed_with_payment")),1)]),_:1})):(v(),w(_,{key:1,size:"xs",design:"success"},{default:c(()=>[k(b(o.$trans("student.online_registration.pending_info")),1)]),_:1}))],64)):(v(),w(_,{key:1,size:"xs",design:"success"},{default:c(()=>[k(b(o.$trans("student.online_registration.pending_info")),1)]),_:1}))])):a.registration.status.value=="rejected"?(v(),S("div",kt,[d(_,{size:"xs",design:"error"},{default:c(()=>[k(b(o.$trans("student.online_registration.rejected_info",{attribute:a.registration.rejectedAt.formatted}))+" ",1),m("p",Ut,b(a.registration.rejectionRemarks),1)]),_:1})])):a.registration.status.value=="approved"?(v(),S("div",_t,[d(_,{size:"xs",design:"success"},{default:c(()=>[k(b(o.$trans("student.online_registration.approved_info")),1)]),_:1})])):V("",!0),m("div",At,[a.registration.status.value!="pending"?(v(),w(P,{key:0},{default:c(()=>[d(l,{first:"",label:o.$trans("student.online_registration.wizard.first_step"),onClick:p[2]||(p[2]=y=>a.activeTab="basic"),"is-active":a.activeTab=="basic"},null,8,["label","is-active"]),d(l,{label:o.$trans("student.online_registration.wizard.second_step"),onClick:p[3]||(p[3]=y=>a.activeTab="contact"),"is-active":a.activeTab=="contact"},null,8,["label","is-active"]),d(l,{label:o.$trans("student.online_registration.wizard.third_step"),onClick:p[4]||(p[4]=y=>a.activeTab="upload"),"is-active":a.activeTab=="upload"},null,8,["label","is-active"]),d(l,{last:"",label:o.$trans("student.online_registration.wizard.final_step"),onClick:p[5]||(p[5]=y=>a.activeTab="review"),"is-active":a.activeTab=="review"},null,8,["label","is-active"])]),_:1})):V("",!0),m("dl",Vt,[d(s,{label:o.$trans("contact.props.name")},{default:c(()=>[k(b(a.registration.contact.name),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.contact_number")},{default:c(()=>[k(b(a.registration.contact.contactNumber),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.email")},{default:c(()=>[k(b(a.registration.contact.email),1)]),_:1},8,["label"]),d(s,{label:o.$trans("academic.program.program")},{default:c(()=>{var y;return[k(b((y=a.registration.course.division.program)==null?void 0:y.name),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("academic.period.period")},{default:c(()=>[k(b(a.registration.period.name),1)]),_:1},8,["label"]),d(s,{label:o.$trans("academic.course.course")},{default:c(()=>[k(b(a.registration.course.name),1)]),_:1},8,["label"]),a.registration.status.value=="initiated"&&a.activeTab=="review"||a.registration.status.value=="pending"||a.registration.status.value=="approved"?(v(),S(M,{key:0},[d(s,{label:o.$trans("contact.props.father_name")},{default:c(()=>[k(b(a.registration.contact.fatherName),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.mother_name")},{default:c(()=>[k(b(a.registration.contact.motherName),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.gender")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.gender)==null?void 0:y.label)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.birth_date")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.birthDate)==null?void 0:y.formatted)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.birth_place")},{default:c(()=>[k(b(a.registration.contact.birthPlace),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.nationality")},{default:c(()=>[k(b(a.registration.contact.nationality),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.mother_tongue")},{default:c(()=>[k(b(a.registration.contact.motherTongue),1)]),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.blood_group")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.bloodGroup)==null?void 0:y.label)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("contact.props.marital_status")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.maritalStatus)==null?void 0:y.label)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("contact.category.category")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.category)==null?void 0:y.name)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("contact.caste.caste")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.caste)==null?void 0:y.name)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("contact.religion.religion")},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.religion)==null?void 0:y.name)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("global.alternate",{attribute:o.$trans("contact.props.contact_number")})},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.alternateRecords)==null?void 0:y.contactNumber)||"-"),1)]}),_:1},8,["label"]),d(s,{label:o.$trans("global.alternate",{attribute:o.$trans("contact.props.email")})},{default:c(()=>{var y;return[k(b(((y=a.registration.contact.alternateRecords)==null?void 0:y.email)||"-"),1)]}),_:1},8,["label"]),d(s,{class:"col-span-1 sm:col-span-3",label:o.$trans("contact.props.present_address")},{default:c(()=>[k(b(a.registration.contact.presentAddressDisplay),1)]),_:1},8,["label"]),d(s,{class:"col-span-1 sm:col-span-3",label:o.$trans("contact.props.permanent_address")},{default:c(()=>[k(b(a.registration.contact.sameAsPresentAddress?a.registration.contact.presentAddressDisplay:a.registration.contact.permanentAddressDisplay),1)]),_:1},8,["label"])],64)):V("",!0)]),a.registration.status.value!="pending"?(v(),S("div",wt,[a.activeTab=="basic"&&a.registration?(v(),w(Le,{key:0,registration:a.registration,"pre-requisites":a.preRequisites,onCompleted:e},null,8,["registration","pre-requisites"])):V("",!0),a.activeTab=="contact"&&a.registration?(v(),w(De,{key:1,registration:a.registration,onCompleted:t},null,8,["registration"])):V("",!0),a.activeTab=="upload"&&a.registration?(v(),w(Me,{key:2,registration:a.registration,onCompleted:r},null,8,["registration"])):V("",!0),a.activeTab=="upload"&&a.registration?(v(),w(We,{key:3,registration:a.registration,onCompleted:T},null,8,["registration"])):V("",!0),a.activeTab=="review"&&a.registration?(v(),w(rt,{key:4,registration:a.registration,onCompleted:r},null,8,["registration"])):V("",!0)])):V("",!0)]),a.registration.status.value!="initiated"?(v(),S("div",qt,[d(A,{block:"",onClick:g},{default:c(()=>[k(b(o.$trans("general.download")),1)]),_:1})])):V("",!0)])):V("",!0)]),_:1},8,["is-loading"]),d(ut,{visibility:L.value,"pre-requisites":n,registration:a.registration,onClose:p[6]||(p[6]=y=>L.value=!1),onCompleted:u},null,8,["visibility","pre-requisites","registration"])],64)}}};export{Nt as default};
