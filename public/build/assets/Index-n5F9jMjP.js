import{f as N,m as I,n as O,r as l,o as u,q as m,w as e,d as F,e as a,s,t as n,b,y as $,l as U,u as o,a as w,v as D,F as L,h as W,j as E}from"./app-DCfJDSeM.js";const z={class:"grid grid-cols-3 gap-6"},G={class:"col-span-3 sm:col-span-1"},J={class:"col-span-3 sm:col-span-1"},K={__name:"Filter",emits:["hide"],setup(M,{emit:h}){const v=N(),B=h,k={name:"",courses:[]},g=I({...k}),p=I({courses:[],isLoaded:!v.query.courses});return O(async()=>{p.courses=v.query.courses?v.query.courses.split(","):[],p.isLoaded=!0}),(f,_)=>{const i=l("BaseInput"),r=l("BaseSelectSearch"),A=l("FilterForm");return u(),m(A,{"init-form":k,form:g,multiple:["courses"],onHide:_[2]||(_[2]=c=>B("hide"))},{default:e(()=>[F("div",z,[F("div",G,[a(i,{type:"text",modelValue:g.name,"onUpdate:modelValue":_[0]||(_[0]=c=>g.name=c),name:"name",label:f.$trans("academic.batch.props.name")},null,8,["modelValue","label"])]),F("div",J,[p.isLoaded?(u(),m(r,{key:0,multiple:"",name:"courses",label:f.$trans("global.select",{attribute:f.$trans("academic.course.course")}),modelValue:g.courses,"onUpdate:modelValue":_[1]||(_[1]=c=>g.courses=c),"value-prop":"uuid","init-search":p.courses,"search-action":"academic/course/list"},{selectedOption:e(c=>[s(n(c.value.nameWithTerm),1)]),listOption:e(c=>[s(n(c.option.nameWithTerm),1)]),_:1},8,["label","modelValue","init-search"])):b("",!0)])])]),_:1},8,["form"])}}},Q={name:"AcademicBatchList"},Y=Object.assign(Q,{setup(M){const h=W(),v=E("emitter");let B=["filter"];$("batch:create")&&B.unshift("create");let k=[];$("batch:export")&&(k=["print","pdf","excel"]);const g="academic/batch/",p=U(!1),f=I({}),_=i=>{Object.assign(f,i)};return(i,r)=>{const A=l("BaseButton"),c=l("PageHeaderAction"),q=l("PageHeader"),T=l("ParentTransition"),S=l("TextMuted"),y=l("DataCell"),C=l("FloatingMenuItem"),H=l("FloatingMenu"),P=l("DataRow"),R=l("DataTable"),j=l("ListItem");return u(),m(j,{"init-url":g,"additional-query":{details:!0},onSetItems:_},{header:e(()=>[a(q,{title:i.$trans("academic.batch.batch"),navs:[{label:i.$trans("academic.academic"),path:"Academic"}]},{default:e(()=>[a(c,{url:"academic/batches/",name:"AcademicBatch",title:i.$trans("academic.batch.batch"),actions:o(B),"dropdown-actions":o(k),"additional-dropdown-actions-query":{details:!0},onToggleFilter:r[1]||(r[1]=t=>p.value=!p.value)},{default:e(()=>[o($)("batch-incharge:read")?(u(),m(A,{key:0,design:"white",onClick:r[0]||(r[0]=t=>o(h).push({name:"AcademicBatchIncharge"}))},{default:e(()=>[s(n(i.$trans("employee.incharge.incharge")),1)]),_:1})):b("",!0)]),_:1},8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[a(T,{appear:"",visibility:p.value},{default:e(()=>[a(K,{onRefresh:r[2]||(r[2]=t=>o(v).emit("listItems")),onHide:r[3]||(r[3]=t=>p.value=!1)})]),_:1},8,["visibility"])]),default:e(()=>[a(T,{appear:"",visibility:!0},{default:e(()=>[a(R,{header:f.headers,meta:f.meta,module:"academic.batch",onRefresh:r[5]||(r[5]=t=>o(v).emit("listItems"))},{actionButton:e(()=>[o($)("batch:create")?(u(),m(A,{key:0,onClick:r[4]||(r[4]=t=>o(h).push({name:"AcademicBatchCreate"}))},{default:e(()=>[s(n(i.$trans("global.add",{attribute:i.$trans("academic.batch.batch")})),1)]),_:1})):b("",!0)]),default:e(()=>[(u(!0),w(L,null,D(f.data,t=>(u(),m(P,{key:t.uuid},{default:e(()=>[a(y,{name:"name"},{default:e(()=>[s(n(t.name)+" ",1),t.pgAccount?(u(),m(S,{key:0,block:""},{default:e(()=>[s(n(t.pgAccount),1)]),_:2},1024)):b("",!0)]),_:2},1024),a(y,{name:"course"},{default:e(()=>[s(n(t.course.nameWithTerm),1)]),_:2},1024),a(y,{name:"maxStrength"},{default:e(()=>[s(n(t.currentStrength)+"/"+n(t.maxStrength),1)]),_:2},1024),a(y,{name:"incharge"},{default:e(()=>[(u(!0),w(L,null,D(t.incharges,d=>{var V;return u(),w("div",null,[s(n(((V=d==null?void 0:d.employee)==null?void 0:V.name)||"-")+" ",1),a(S,null,{default:e(()=>[s(n(d==null?void 0:d.period),1)]),_:2},1024)])}),256))]),_:2},1024),a(y,{name:"createdAt"},{default:e(()=>[s(n(t.createdAt.formatted),1)]),_:2},1024),a(y,{name:"action"},{default:e(()=>[a(H,null,{default:e(()=>[a(C,{icon:"fas fa-arrow-circle-right",onClick:d=>o(h).push({name:"AcademicBatchShow",params:{uuid:t.uuid}})},{default:e(()=>[s(n(i.$trans("general.show")),1)]),_:2},1032,["onClick"]),o($)("batch:edit")?(u(),m(C,{key:0,icon:"fas fa-edit",onClick:d=>o(h).push({name:"AcademicBatchEdit",params:{uuid:t.uuid}})},{default:e(()=>[s(n(i.$trans("general.edit")),1)]),_:2},1032,["onClick"])):b("",!0),o($)("batch:create")?(u(),m(C,{key:1,icon:"fas fa-copy",onClick:d=>o(h).push({name:"AcademicBatchDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[s(n(i.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):b("",!0),o($)("batch:delete")?(u(),m(C,{key:2,icon:"fas fa-trash",onClick:d=>o(v).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[s(n(i.$trans("general.delete")),1)]),_:2},1032,["onClick"])):b("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{Y as default};
