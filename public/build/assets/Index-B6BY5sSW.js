import{f as A,m as V,n as H,r as l,o as v,q as _,w as e,d as $,e as t,y as k,l as L,u as m,s as d,t as p,b as w,a as O,v as E,F as Q,h as z,j as G,aI as J}from"./app-DCfJDSeM.js";const K={class:"grid grid-cols-3 gap-6"},W={class:"col-span-3 sm:col-span-1"},X={class:"col-span-3 sm:col-span-1"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},ee={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(S,{emit:g}){A();const q=g,y=S,I={codeNumber:"",startDate:"",endDate:"",inventory:"",vendors:[],places:[]},r=V({...I}),f=V({vendors:y.preRequisites.vendors,inventories:y.preRequisites.inventories,places:y.preRequisites.places}),B=V({isLoaded:!0});return H(async()=>{B.isLoaded=!0}),(c,a)=>{const F=l("BaseInput"),C=l("BaseSelect"),o=l("DatePicker"),u=l("FilterForm");return v(),_(u,{"init-form":I,form:r,multiple:["vendors","places"],onHide:a[6]||(a[6]=s=>q("hide"))},{default:e(()=>[$("div",K,[$("div",W,[t(F,{type:"text",modelValue:r.codeNumber,"onUpdate:modelValue":a[0]||(a[0]=s=>r.codeNumber=s),name:"codeNumber",label:c.$trans("inventory.stock_requisition.props.code_number")},null,8,["modelValue","label"])]),$("div",X,[t(C,{modelValue:r.inventory,"onUpdate:modelValue":a[1]||(a[1]=s=>r.inventory=s),name:"inventory","label-prop":"name","value-prop":"uuid",label:c.$trans("inventory.inventory"),options:f.inventories},null,8,["modelValue","label","options"])]),$("div",Y,[t(C,{multiple:"",modelValue:r.vendors,"onUpdate:modelValue":a[2]||(a[2]=s=>r.vendors=s),name:"vendors","label-prop":"name","value-prop":"uuid",label:c.$trans("inventory.vendor"),options:f.vendors},null,8,["modelValue","label","options"])]),$("div",Z,[t(C,{multiple:"",modelValue:r.places,"onUpdate:modelValue":a[3]||(a[3]=s=>r.places=s),name:"places","label-prop":"fullName","value-prop":"uuid",label:c.$trans("inventory.place"),options:f.places},null,8,["modelValue","label","options"])]),$("div",x,[t(o,{start:r.startDate,"onUpdate:start":a[4]||(a[4]=s=>r.startDate=s),end:r.endDate,"onUpdate:end":a[5]||(a[5]=s=>r.endDate=s),name:"dateBetween",as:"range",label:c.$trans("general.date_between")},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},te={name:"InventoryStockRequisitionList"},oe=Object.assign(te,{setup(S){const g=z(),q=G("emitter");let y=["filter"];k("inventory:config")&&y.push("config"),k("stock-requisition:create")&&y.unshift("create");let I=[];k("stock-requisition:export")&&(I=["print","pdf","excel"]);const r="inventory/stockRequisition/",f=L(!1),B=V({inventories:[],vendors:[],places:[]}),c=V({}),a=o=>{Object.assign(B,o)},F=o=>{Object.assign(c,o)},C=o=>{let u="/app/inventory/stock-requisitions/"+o.uuid+"/export",s={};window.open(J(u,s),"_blank").focus()};return(o,u)=>{const s=l("PageHeaderAction"),h=l("PageHeader"),N=l("ParentTransition"),P=l("TextMuted"),b=l("DataCell"),D=l("FloatingMenuItem"),R=l("FloatingMenu"),T=l("DataRow"),M=l("BaseButton"),U=l("DataTable"),j=l("ListItem");return v(),_(j,{"init-url":r,"pre-requisites":!0,onSetPreRequisites:a,onSetItems:F},{header:e(()=>[t(h,{title:o.$trans("inventory.stock_requisition.stock_requisition"),navs:[{label:o.$trans("inventory.inventory"),path:"Inventory"}]},{default:e(()=>[t(s,{url:"inventory/stock-requisitions/",name:"InventoryStockRequisition",title:o.$trans("inventory.stock_requisition.stock_requisition"),actions:m(y),"dropdown-actions":m(I),"config-path":"InventoryConfig",onToggleFilter:u[0]||(u[0]=n=>f.value=!f.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[t(N,{appear:"",visibility:f.value},{default:e(()=>[t(ee,{onRefresh:u[1]||(u[1]=n=>m(q).emit("listItems")),"pre-requisites":B,onHide:u[2]||(u[2]=n=>f.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[t(N,{appear:"",visibility:!0},{default:e(()=>[t(U,{header:c.headers,meta:c.meta,module:"inventory.stock_requisition",onRefresh:u[4]||(u[4]=n=>m(q).emit("listItems"))},{actionButton:e(()=>[m(k)("stock-requisition:create")?(v(),_(M,{key:0,onClick:u[3]||(u[3]=n=>m(g).push({name:"InventoryStockRequisitionCreate"}))},{default:e(()=>[d(p(o.$trans("global.add",{attribute:o.$trans("inventory.stock_requisition.stock_requisition")})),1)]),_:1})):w("",!0)]),default:e(()=>[(v(!0),O(Q,null,E(c.data,n=>(v(),_(T,{key:n.uuid},{default:e(()=>[t(b,{name:"codeNumber"},{default:e(()=>[d(p(n.codeNumber)+" ",1),t(P,{block:""},{default:e(()=>{var i;return[d(p((i=n.inventory)==null?void 0:i.name),1)]}),_:2},1024)]),_:2},1024),t(b,{name:"vendor"},{default:e(()=>{var i;return[d(p(((i=n.vendor)==null?void 0:i.name)||"-"),1)]}),_:2},1024),t(b,{name:"date"},{default:e(()=>[d(p(n.date.formatted),1)]),_:2},1024),t(b,{name:"place"},{default:e(()=>{var i;return[d(p(((i=n.place)==null?void 0:i.fullName)||"-"),1)]}),_:2},1024),t(b,{name:"employee"},{default:e(()=>{var i;return[d(p(((i=n.employee)==null?void 0:i.name)||"-")+" ",1),n.employee?(v(),_(P,{key:0,block:""},{default:e(()=>[d(p(n.employee.designation),1)]),_:2},1024)):w("",!0)]}),_:2},1024),t(b,{name:"createdAt"},{default:e(()=>[d(p(n.createdAt.formatted),1)]),_:2},1024),t(b,{name:"action"},{default:e(()=>[t(R,null,{default:e(()=>[t(D,{icon:"fas fa-arrow-circle-right",onClick:i=>m(g).push({name:"InventoryStockRequisitionShow",params:{uuid:n.uuid}})},{default:e(()=>[d(p(o.$trans("general.show")),1)]),_:2},1032,["onClick"]),t(D,{icon:"fas fa-arrow-circle-right",onClick:i=>C(n)},{default:e(()=>[d(p(o.$trans("global.print",{attribute:o.$trans("inventory.stock_requisition.slip")})),1)]),_:2},1032,["onClick"]),m(k)("stock-requisition:edit")?(v(),_(D,{key:0,icon:"fas fa-edit",onClick:i=>m(g).push({name:"InventoryStockRequisitionEdit",params:{uuid:n.uuid}})},{default:e(()=>[d(p(o.$trans("general.edit")),1)]),_:2},1032,["onClick"])):w("",!0),m(k)("stock-requisition:create")?(v(),_(D,{key:1,icon:"fas fa-copy",onClick:i=>m(g).push({name:"InventoryStockRequisitionDuplicate",params:{uuid:n.uuid}})},{default:e(()=>[d(p(o.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):w("",!0),m(k)("stock-requisition:delete")?(v(),_(D,{key:2,icon:"fas fa-trash",onClick:i=>m(q).emit("deleteItem",{uuid:n.uuid})},{default:e(()=>[d(p(o.$trans("general.delete")),1)]),_:2},1032,["onClick"])):w("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{oe as default};
