import{f as O,m as I,n as z,r as o,o as y,q as v,w as e,d as q,e as n,b as k,y as g,l as S,u as m,s as r,t as u,a as G,v as J,F as K,h as Q,j as W}from"./app-DCfJDSeM.js";const X={class:"grid grid-cols-3 gap-6"},Y={class:"col-span-3 sm:col-span-1"},Z={class:"col-span-3 sm:col-span-1"},x={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},ae={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(h,{emit:B}){const f=O(),R=B,C={codeNumber:"",name:"",types:[],sources:[],startDate:"",endDate:"",status:""},i=I({...C}),b=I({types:[],sources:[],isLoaded:!(f.query.types||f.query.sources)});return z(async()=>{b.types=f.query.types?f.query.types.split(","):[],b.sources=f.query.sources?f.query.sources.split(","):[],b.isLoaded=!0}),(p,a)=>{const $=o("BaseInput"),V=o("BaseSelectSearch"),w=o("DatePicker"),d=o("BaseSelect"),s=o("FilterForm");return y(),v(s,{"init-form":C,form:i,multiple:["types","sources"],onHide:a[7]||(a[7]=l=>R("hide"))},{default:e(()=>[q("div",X,[q("div",Y,[n($,{type:"text",modelValue:i.codeNumber,"onUpdate:modelValue":a[0]||(a[0]=l=>i.codeNumber=l),name:"codeNumber",label:p.$trans("reception.enquiry.props.code_number")},null,8,["modelValue","label"])]),q("div",Z,[n($,{type:"text",modelValue:i.name,"onUpdate:modelValue":a[1]||(a[1]=l=>i.name=l),name:"name",label:p.$trans("reception.enquiry.props.name")},null,8,["modelValue","label"])]),q("div",x,[b.isLoaded?(y(),v(V,{key:0,multiple:"",name:"types",label:p.$trans("global.select",{attribute:p.$trans("reception.enquiry.type.type")}),modelValue:i.types,"onUpdate:modelValue":a[2]||(a[2]=l=>i.types=l),"value-prop":"uuid","init-search":b.types,"search-action":"option/list","additional-search-query":{type:"enquiry_type"}},null,8,["label","modelValue","init-search"])):k("",!0)]),q("div",ee,[b.isLoaded?(y(),v(V,{key:0,multiple:"",name:"sources",label:p.$trans("global.select",{attribute:p.$trans("reception.enquiry.source.source")}),modelValue:i.sources,"onUpdate:modelValue":a[3]||(a[3]=l=>i.sources=l),"value-prop":"uuid","init-search":b.sources,"search-action":"option/list","additional-search-query":{type:"enquiry_source"}},null,8,["label","modelValue","init-search"])):k("",!0)]),q("div",te,[n(w,{start:i.startDate,"onUpdate:start":a[4]||(a[4]=l=>i.startDate=l),end:i.endDate,"onUpdate:end":a[5]||(a[5]=l=>i.endDate=l),name:"dateBetween",as:"range",label:p.$trans("general.date_between")},null,8,["start","end","label"])]),q("div",ne,[n(d,{name:"status",label:p.$trans("global.select",{attribute:p.$trans("reception.enquiry.props.status")}),modelValue:i.status,"onUpdate:modelValue":a[6]||(a[6]=l=>i.status=l),options:h.preRequisites.statuses},null,8,["label","modelValue","options"])])])]),_:1},8,["form"])}}},se={name:"ReceptionEnquiryList"},ie=Object.assign(se,{setup(h){const B=Q(),f=W("emitter");let R=["filter"];g("reception:config")&&R.push("config"),g("enquiry:create")&&R.unshift("create");let C=[];g("enquiry:export")&&(C=["print","pdf","excel"]),g("enquiry:create")&&C.unshift("import");const i="reception/enquiry/",b=I({statuses:[]}),p=S(!1),a=S(!1),$=I({}),V=d=>{Object.assign($,d)},w=d=>{Object.assign(b,d)};return(d,s)=>{const l=o("PageHeaderAction"),T=o("PageHeader"),E=o("BaseImport"),F=o("ParentTransition"),_=o("DataCell"),N=o("TextMuted"),L=o("BaseBadge"),D=o("FloatingMenuItem"),U=o("FloatingMenu"),H=o("DataRow"),M=o("BaseButton"),j=o("DataTable"),A=o("ListItem");return y(),v(A,{"init-url":i,"additional-query":{},onSetItems:V,"pre-requisites":!0,onSetPreRequisites:w},{header:e(()=>[n(T,{title:d.$trans("reception.enquiry.enquiry"),navs:[{label:d.$trans("reception.reception"),path:"Reception"}]},{default:e(()=>[n(l,{url:"reception/enquiries/",name:"ReceptionEnquiry",title:d.$trans("reception.enquiry.enquiry"),actions:m(R),"dropdown-actions":m(C),"config-path":"ReceptionConfig",onToggleFilter:s[0]||(s[0]=t=>p.value=!p.value),onToggleImport:s[1]||(s[1]=t=>a.value=!a.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),import:e(()=>[n(F,{appear:"",visibility:a.value},{default:e(()=>[n(E,{path:"reception/enquiries/import",onCancelled:s[2]||(s[2]=t=>a.value=!1),onHide:s[3]||(s[3]=t=>a.value=!1),onCompleted:s[4]||(s[4]=t=>m(f).emit("listItems"))})]),_:1},8,["visibility"])]),filter:e(()=>[n(F,{appear:"",visibility:p.value},{default:e(()=>[n(ae,{onRefresh:s[5]||(s[5]=t=>m(f).emit("listItems")),"pre-requisites":b,onHide:s[6]||(s[6]=t=>p.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[n(F,{appear:"",visibility:!0},{default:e(()=>[n(j,{header:$.headers,meta:$.meta,module:"reception.enquiry",onRefresh:s[8]||(s[8]=t=>m(f).emit("listItems"))},{actionButton:e(()=>[m(g)("enquiry:create")?(y(),v(M,{key:0,onClick:s[7]||(s[7]=t=>m(B).push({name:"ReceptionEnquiryCreate"}))},{default:e(()=>[r(u(d.$trans("global.add",{attribute:d.$trans("reception.enquiry.enquiry")})),1)]),_:1})):k("",!0)]),default:e(()=>[(y(!0),G(K,null,J($.data,t=>(y(),v(H,{key:t.uuid},{default:e(()=>[n(_,{name:"codeNumber"},{default:e(()=>[r(u(t.codeNumber),1)]),_:2},1024),n(_,{name:"date"},{default:e(()=>[r(u(t.date.formatted),1)]),_:2},1024),n(_,{name:"name"},{default:e(()=>[r(u(t.name)+" ",1),n(N,{block:""},{default:e(()=>[r(u(t.contactNumber),1)]),_:2},1024)]),_:2},1024),n(_,{name:"type"},{default:e(()=>{var c;return[r(u(((c=t.type)==null?void 0:c.name)||"-"),1)]}),_:2},1024),n(_,{name:"source"},{default:e(()=>{var c;return[r(u(((c=t.source)==null?void 0:c.name)||"-"),1)]}),_:2},1024),n(_,{name:"count"},{default:e(()=>[r(u(t.recordsCount),1)]),_:2},1024),n(_,{name:"employee"},{default:e(()=>{var c;return[r(u(((c=t.employee)==null?void 0:c.name)||"-")+" ",1),t.employee?(y(),v(N,{key:0,block:""},{default:e(()=>{var P;return[r(u(((P=t.employee)==null?void 0:P.designation)||"-"),1)]}),_:2},1024)):k("",!0)]}),_:2},1024),n(_,{name:"status"},{default:e(()=>[n(L,{design:t.status.color},{default:e(()=>[r(u(t.status.label),1)]),_:2},1032,["design"])]),_:2},1024),n(_,{name:"createdAt"},{default:e(()=>[r(u(t.createdAt.formatted),1)]),_:2},1024),n(_,{name:"action"},{default:e(()=>[n(U,null,{default:e(()=>[n(D,{icon:"fas fa-arrow-circle-right",onClick:c=>m(B).push({name:"ReceptionEnquiryShow",params:{uuid:t.uuid}})},{default:e(()=>[r(u(d.$trans("general.show")),1)]),_:2},1032,["onClick"]),m(g)("enquiry:edit")?(y(),v(D,{key:0,icon:"fas fa-edit",onClick:c=>m(B).push({name:"ReceptionEnquiryEdit",params:{uuid:t.uuid}})},{default:e(()=>[r(u(d.$trans("general.edit")),1)]),_:2},1032,["onClick"])):k("",!0),m(g)("enquiry:create")?(y(),v(D,{key:1,icon:"fas fa-copy",onClick:c=>m(B).push({name:"ReceptionEnquiryDuplicate",params:{uuid:t.uuid}})},{default:e(()=>[r(u(d.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):k("",!0),m(g)("enquiry:delete")?(y(),v(D,{key:2,icon:"fas fa-trash",onClick:c=>m(f).emit("deleteItem",{uuid:t.uuid})},{default:e(()=>[r(u(d.$trans("general.delete")),1)]),_:2},1032,["onClick"])):k("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1})]),_:1})}}});export{ie as default};
