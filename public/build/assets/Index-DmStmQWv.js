import{f as z,m as w,n as W,r as d,o as u,q as _,w as e,d as m,s as c,t as a,b as h,e as o,y as k,l as G,u as b,C as J,a as j,v as L,ac as K,F as I,h as Q,j as X}from"./app-DCfJDSeM.js";const Y={class:"grid grid-cols-3 gap-6"},Z={class:"col-span-3 sm:col-span-1"},ee={class:"col-span-3 sm:col-span-1"},te={class:"col-span-3 sm:col-span-1"},se={class:"col-span-3 sm:col-span-1"},ae={class:"col-span-3 sm:col-span-1"},ne={class:"col-span-3 sm:col-span-1"},oe={__name:"Filter",props:{preRequisites:{type:Object,default(){return{}}}},emits:["hide"],setup(T,{emit:$}){const p=z(),q=$,C=T,R={employees:[],types:[],batches:[],subjects:[],startDate:"",endDate:"",startDueDate:"",endDueDate:""},n=w({...R}),V=w({subjects:C.preRequisites.subjects}),l=w({employees:[],types:[],batches:[],subjects:[],isLoaded:!(p.query.employees||p.query.types||p.query.batches||p.query.subjects)});return W(async()=>{l.employees=p.query.employees?p.query.employees.split(","):[],l.types=p.query.types?p.query.types.split(","):[],l.batches=p.query.batches?p.query.batches.split(","):[],l.subjects=p.query.subjects?p.query.subjects.split(","):[],l.isLoaded=!0}),(g,i)=>{const r=d("BaseSelectSearch"),f=d("BaseSelect"),B=d("DatePicker"),S=d("FilterForm");return u(),_(S,{"init-form":R,form:n,multiple:["employees","types","batches","subjects"],onHide:i[8]||(i[8]=t=>q("hide"))},{default:e(()=>[m("div",Y,[m("div",Z,[l.isLoaded?(u(),_(r,{key:0,multiple:"",name:"employees",label:g.$trans("global.select",{attribute:g.$trans("employee.employee")}),modelValue:n.employees,"onUpdate:modelValue":i[0]||(i[0]=t=>n.employees=t),"value-prop":"uuid","init-search":l.employees,"search-key":"name","search-action":"employee/list"},{selectedOption:e(t=>[c(a(t.value.name)+" ("+a(t.value.codeNumber)+") ",1)]),listOption:e(t=>[c(a(t.option.name)+" ("+a(t.option.codeNumber)+") ",1)]),_:1},8,["label","modelValue","init-search"])):h("",!0)]),m("div",ee,[l.isLoaded?(u(),_(r,{key:0,multiple:"",name:"types",label:g.$trans("global.select",{attribute:g.$trans("resource.assignment.type.type")}),modelValue:n.types,"onUpdate:modelValue":i[1]||(i[1]=t=>n.types=t),"value-prop":"uuid","init-search":l.types,"search-action":"option/list","additional-search-query":{type:"assignment_type"}},null,8,["label","modelValue","init-search"])):h("",!0)]),m("div",te,[l.isLoaded?(u(),_(r,{key:0,multiple:"",name:"batches",label:g.$trans("global.select",{attribute:g.$trans("academic.batch.batch")}),modelValue:n.batches,"onUpdate:modelValue":i[2]||(i[2]=t=>n.batches=t),"value-prop":"uuid","init-search":l.batches,"search-key":"course_batch","search-action":"academic/batch/list"},{selectedOption:e(t=>[c(a(t.value.course.name)+" "+a(t.value.name),1)]),listOption:e(t=>[c(a(t.option.course.nameWithTerm)+" "+a(t.option.name),1)]),_:1},8,["label","modelValue","init-search"])):h("",!0)]),m("div",se,[o(f,{multiple:"",modelValue:n.subjects,"onUpdate:modelValue":i[3]||(i[3]=t=>n.subjects=t),name:"subjects",label:g.$trans("academic.subject.subject"),"label-prop":"name","value-prop":"uuid",options:V.subjects},null,8,["modelValue","label","options"])]),m("div",ae,[o(B,{start:n.startDate,"onUpdate:start":i[4]||(i[4]=t=>n.startDate=t),end:n.endDate,"onUpdate:end":i[5]||(i[5]=t=>n.endDate=t),name:"dateBetween",as:"range",label:g.$trans("general.date_between")},null,8,["start","end","label"])]),m("div",ne,[o(B,{start:n.startDueDate,"onUpdate:start":i[6]||(i[6]=t=>n.startDueDate=t),end:n.endDueDate,"onUpdate:end":i[7]||(i[7]=t=>n.endDueDate=t),name:"dueDateBetween",as:"range",label:g.$trans("global.date_between",{attribute:g.$trans("resource.assignment.props.due_date")})},null,8,["start","end","label"])])])]),_:1},8,["form"])}}},le={class:"grid grid-cols-1 gap-4 px-4 pt-4 md:grid-cols-2 lg:grid-cols-3"},ie=["onClick"],re={class:"px-2 py-2 text-gray-800 dark:text-gray-400"},ue={class:"flex items-center justify-between"},de={class:"font-medium"},ce={class:"mt-2 flex justify-between items-center"},me={class:"text-sm font-medium"},pe={class:"mt-2"},be={key:0,class:"mt-2 flex justify-between"},ye={class:"text-xs"},fe={class:"text-xl font-semibold"},_e={name:"ResourceAssignmentList"},he=Object.assign(_e,{setup(T){const $=Q(),p=X("emitter");let q=["filter"];k("resource:config")&&q.push("config"),k("assignment:create")&&q.unshift("create");let C=[];k("assignment:export")&&(C=["print","pdf","excel"]);const R="resource/assignment/",n=G(!1),V=w({subjects:[]}),l=w({}),g=r=>{Object.assign(V,r)},i=r=>{Object.assign(l,r)};return(r,f)=>{const B=d("PageHeaderAction"),S=d("PageHeader"),t=d("ParentTransition"),A=d("TextMuted"),U=d("CardView"),O=d("Pagination"),P=d("CardList"),D=d("DataCell"),F=d("FloatingMenuItem"),M=d("FloatingMenu"),N=d("DataRow"),H=d("BaseButton"),x=d("DataTable"),E=d("ListItem");return u(),_(E,{"init-url":R,"pre-requisites":!0,onSetPreRequisites:g,"additional-query":{},onSetItems:i},{header:e(()=>[o(S,{title:r.$trans("resource.assignment.assignment"),navs:[{label:r.$trans("resource.resource"),path:"Resource"}]},{default:e(()=>[o(B,{url:"resource/assignments/",name:"ResourceAssignment",title:r.$trans("resource.assignment.assignment"),actions:b(q),"dropdown-actions":b(C),"config-path":"ResourceConfig",onToggleFilter:f[0]||(f[0]=s=>n.value=!n.value)},null,8,["title","actions","dropdown-actions"])]),_:1},8,["title","navs"])]),filter:e(()=>[o(t,{appear:"",visibility:n.value},{default:e(()=>[o(oe,{onRefresh:f[1]||(f[1]=s=>b(p).emit("listItems")),"pre-requisites":V,onHide:f[2]||(f[2]=s=>n.value=!1)},null,8,["pre-requisites"])]),_:1},8,["visibility"])]),default:e(()=>[b(J)(["student","guardian"],"any")?(u(),_(t,{key:0,appear:"",visibility:!0},{default:e(()=>[o(P,{header:l.headers,meta:l.meta},{content:e(()=>[m("div",fe,a(r.$trans("dashboard.nothing_to_show")),1)]),default:e(()=>[m("div",le,[(u(!0),j(I,null,L(l.data,s=>(u(),j("div",{key:s.uuid,class:"cursor-pointer",onClick:y=>b($).push({name:"ResourceAssignmentShow",params:{uuid:s.uuid}})},[o(U,{"no-padding":""},{default:e(()=>{var y,v;return[m("div",re,[m("div",ue,[m("span",de,a(s.title),1)]),m("div",ce,[m("span",me,a(s.date.formatted),1),m("span",{class:"px-2 py-1 text-gray-50 text-xs rounded-lg mr-2",style:K(`background-color: ${s.type.color}`)},a(s.type.name),5)]),m("p",pe,[o(A,{block:""},{default:e(()=>[c(a(r.$trans("resource.assignment.props.due_date"))+" "+a(s.dueDate.formatted),1)]),_:2},1024)]),s.employee?(u(),j("div",be,[m("span",ye,a(((y=s.employee)==null?void 0:y.name)||"-")+" "+a(((v=s.employee)==null?void 0:v.designation)||""),1)])):h("",!0)])]}),_:2},1024)],8,ie))),128))]),m("div",null,[o(O,{"card-view":"",meta:l.meta,onRefresh:f[3]||(f[3]=s=>b(p).emit("listItems"))},null,8,["meta"])])]),_:1},8,["header","meta"])]),_:1})):(u(),_(t,{key:1,appear:"",visibility:!0},{default:e(()=>[o(x,{header:l.headers,meta:l.meta,module:"resource.assignment",onRefresh:f[5]||(f[5]=s=>b(p).emit("listItems"))},{actionButton:e(()=>[b(k)("assignment:create")?(u(),_(H,{key:0,onClick:f[4]||(f[4]=s=>b($).push({name:"ResourceAssignmentCreate"}))},{default:e(()=>[c(a(r.$trans("global.add",{attribute:r.$trans("resource.assignment.assignment")})),1)]),_:1})):h("",!0)]),default:e(()=>[(u(!0),j(I,null,L(l.data,s=>(u(),_(N,{key:s.uuid},{default:e(()=>[o(D,{name:"title"},{default:e(()=>[c(a(s.titleExcerpt),1)]),_:2},1024),o(D,{name:"records"},{default:e(()=>[(u(!0),j(I,null,L(s.records,y=>{var v;return u(),j("div",null,[c(a(((v=y.batch.course)==null?void 0:v.name)+" "+y.batch.name)+" ",1),y.subject?(u(),_(A,{key:0},{default:e(()=>[c(a(y.subject.name),1)]),_:2},1024)):h("",!0)])}),256))]),_:2},1024),o(D,{name:"employee"},{default:e(()=>{var y;return[c(a(((y=s.employee)==null?void 0:y.name)||"-")+" ",1),o(A,{block:""},{default:e(()=>{var v;return[c(a((v=s.employee)==null?void 0:v.codeNumber),1)]}),_:2},1024)]}),_:2},1024),o(D,{name:"date"},{default:e(()=>[c(a(s.date.formatted)+" ",1),o(A,{block:""},{default:e(()=>[c(a(s.dueDate.formatted),1)]),_:2},1024)]),_:2},1024),o(D,{name:"createdAt"},{default:e(()=>[c(a(s.createdAt.formatted),1)]),_:2},1024),o(D,{name:"action"},{default:e(()=>[o(M,null,{default:e(()=>[o(F,{icon:"fas fa-arrow-circle-right",onClick:y=>b($).push({name:"ResourceAssignmentShow",params:{uuid:s.uuid}})},{default:e(()=>[c(a(r.$trans("general.show")),1)]),_:2},1032,["onClick"]),b(k)("assignment:edit")&&s.isEditable?(u(),_(F,{key:0,icon:"fas fa-edit",onClick:y=>b($).push({name:"ResourceAssignmentEdit",params:{uuid:s.uuid}})},{default:e(()=>[c(a(r.$trans("general.edit")),1)]),_:2},1032,["onClick"])):h("",!0),b(k)("assignment:create")?(u(),_(F,{key:1,icon:"fas fa-copy",onClick:y=>b($).push({name:"ResourceAssignmentDuplicate",params:{uuid:s.uuid}})},{default:e(()=>[c(a(r.$trans("general.duplicate")),1)]),_:2},1032,["onClick"])):h("",!0),b(k)("assignment:delete")&&s.isDeletable?(u(),_(F,{key:2,icon:"fas fa-trash",onClick:y=>b(p).emit("deleteItem",{uuid:s.uuid})},{default:e(()=>[c(a(r.$trans("general.delete")),1)]),_:2},1032,["onClick"])):h("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["header","meta"])]),_:1}))]),_:1})}}});export{he as default};
